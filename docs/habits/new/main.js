var WQ=(Q)=>{let $=Object.entries(Q).sort((W,X)=>W[0].localeCompare(X[0]));return $.forEach(([W,X],J)=>{if(X&&typeof X==="object"&&!Array.isArray(X))$[J]=[W,WQ(X)]}),Object.fromEntries($)},XQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},i=(Q)=>{if(Array.isArray(Q)){let $=[...Q],W=[];return $.forEach((X)=>{W.push(i(X))}),W}if(XQ(Q)){let $={...Q},W={};return Object.keys($).forEach((X)=>{W[X]=i($[X])}),Object.freeze(W)}return Q},v=(Q)=>{if(Array.isArray(Q)){let W=[...Q],X=[];return W.forEach((J)=>{X.push(v(J))}),X}if(XQ(Q)){let W={...Q},X={};return Object.keys(W).forEach((J)=>{X[J]=v(W[J])}),X}return Q},FQ=(Q,$="index")=>Q.map((W,X)=>({[$]:X,value:W})),YX=(Q,$)=>{let W=WQ(Q),X=WQ($),J=Object.keys(W),Z=Object.keys(X);if(J.length!==Z.length)return!1;for(let Y of J)if(!Z.includes(Y)||!ZQ(W[Y],X[Y]))return!1;return!0},zX=(Q,$)=>{if(Q.length!==$.length)return!1;if(Q.length===0)return!0;for(let W=0;W<Q.length;W++)if(!ZQ(Q[W],$[W]))return!1;return!0},ZQ=(Q,$)=>{if(typeof Q!==typeof $)return!1;if(Array.isArray(Q))return zX(Q,$);if(Q===null||$===null)return Q===$;if(typeof Q==="object"&&!(Q instanceof Set))return YX(Q,$);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===$;return Q===$},qX=(Q,$,W)=>{let J=FQ(v(Q),"index");return FQ(v($),"index").map((Y)=>{let G="add",B=-1,F=Y.value;return J.some((R,D)=>{if(G=ZQ(R.value,Y.value)?R.index===Y.index?"idle":"shuffle":W&&R.value[W]!==void 0&&R.value[W]===Y.value[W]?"update":"add",G!=="add")return B=R.index,J.splice(D,1),!0;return!1}),{type:G,oldIndex:B,value:F}})},a=null,x=(Q)=>{let $=i(Q),W=new Set;return{type:"source-signal",get value(){if(a)W.add(a);return v($)},set value(X){if(X===$)return;$=i(X),W.forEach((J)=>J&&J())}}},u=(Q)=>{a=Q,Q(),a=null},U=(Q)=>{let $,W=x($);return u(()=>{$=Q($),W.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return W.value}}},q=(Q)=>YQ(Q)?Q.value:Q,g=(Q)=>["source-signal","derived-signal"].includes(Q?.type),NQ=(Q,$)=>Q?.type==="non-signal"&&(!$||!$.length||$.some((W)=>typeof Q?.value===W)),YQ=(Q)=>g(Q)||NQ(Q),HQ=(Q)=>NQ(Q,["string"]),wQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every(($)=>typeof $==="string"),b=(Q,...$)=>{return U(()=>{let W=$.map((X)=>q(X));return Q(...W)})},O=(Q)=>{let $=typeof Q==="function"?Q:()=>q(Q);return{...{get truthy(){return U(()=>!!$())},get falsy(){return U(()=>!$())},get truthyFalsyPair(){return U(()=>{let X=!!$();return[X,!X]})},ternary:(X,J)=>U(()=>{return $()?q(X):q(J)})},or:(X)=>O(()=>{return!!($()||q(X))}),orNot:(X)=>O(()=>{return!!($()||!q(X))}),and:(X)=>O(()=>{return!!($()&&q(X))}),andNot:(X)=>O(()=>{return!!($()&&!q(X))}),equals:(X)=>O(()=>{return $()===q(X)}),notEquals:(X)=>O(()=>{return $()!==q(X)}),orBothEqual:(X,J)=>O(()=>{let Z=$(),Y=q(X)===q(J);return!!(Z||Y)}),orBothUnequal:(X,J)=>O(()=>{let Z=$(),Y=q(X)!==q(J);return!!(Z||Y)}),andBothEqual:(X,J)=>O(()=>{let Z=$(),Y=q(X)===q(J);return!!(Z&&Y)}),andBothUnequal:(X,J)=>O(()=>{let Z=$(),Y=q(X)!==q(J);return!!(Z&&Y)}),orThisIsLT:(X,J)=>O(()=>{let Z=$(),Y=q(X)<q(J);return!!(Z||Y)}),orThisIsLTE:(X,J)=>O(()=>{let Z=$(),Y=q(X)<=q(J);return!!(Z||Y)}),orThisIsGT:(X,J)=>O(()=>{let Z=$(),Y=q(X)>q(J);return!!(Z||Y)}),orThisIsGTE:(X,J)=>O(()=>{let Z=$(),Y=q(X)>=q(J);return!!(Z||Y)}),andThisIsLT:(X,J)=>O(()=>{let Z=$(),Y=q(X)<q(J);return!!(Z&&Y)}),andThisIsLTE:(X,J)=>O(()=>{let Z=$(),Y=q(X)<=q(J);return!!(Z&&Y)}),andThisIsGT:(X,J)=>O(()=>{let Z=$(),Y=q(X)>q(J);return!!(Z&&Y)}),andThisIsGTE:(X,J)=>O(()=>{let Z=$(),Y=q(X)>=q(J);return!!(Z&&Y)})}},C=(Q)=>{let $=typeof Q==="function"?Q:()=>q(Q);return{...O(Q),get result(){return U($)},add:(W)=>C(()=>{return $()+q(W)}),sub:(W)=>C(()=>{return $()-q(W)}),mul:(W)=>C(()=>{return $()*q(W)}),div:(W)=>C(()=>{return $()/q(W)}),mod:(W)=>C(()=>{return $()%q(W)}),pow:(W)=>C(()=>{return $()**q(W)}),isBetween:(W,X,J=!0,Z=!0)=>O(()=>{let Y=$(),G=q(W),B=q(X),F=J?Y>=G:Y>G,R=Z?Y<=B:Y<B;return F&&R}),isLT:(W)=>O(()=>$()<q(W)),isLTE:(W)=>O(()=>$()<=q(W)),isGT:(W)=>O(()=>$()>q(W)),isGTE:(W)=>O(()=>$()>=q(W))}},GX=(Q)=>{let $=typeof Q==="function"?Q:()=>q(Q);return{...O(Q),lengthBetween:(W,X,J=!0,Z=!0)=>O(()=>{let G=$().length,B=q(W),F=q(X),R=J?G>=B:G>B,D=Z?G<=F:G<F;return R&&D}),lengthEquals:(W)=>O(()=>{return $().length===q(W)}),lengthNotEquals:(W)=>O(()=>{return $().length!==q(W)}),lengthLT:(W)=>O(()=>{return $().length<q(W)}),lengthLTE:(W)=>O(()=>{return $().length<=q(W)}),lengthGT:(W)=>O(()=>{return $().length>q(W)}),lengthGTE:(W)=>O(()=>{return $().length>=q(W)})}},E=(Q)=>{let W=(typeof Q==="function"?Q:()=>q(Q))();return typeof W==="number"?C(Q):typeof W==="string"||Array.isArray(W)?GX(Q):O(Q)},zQ=(...Q)=>Q.map(($)=>q($)),r=(Q)=>{return{get string(){return U(()=>{let $=q(Q);return $===void 0||$===null?void 0:$.toString()})},or:($)=>U(()=>q(Q)||q($))}},UX=(Q)=>{let W=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce((X,J)=>{let Z=(...Y)=>{return U(()=>{let G=zQ(...Y);return q(Q)[J](...G)})};return X[J]=Z,X},{});return{...r(Q),...W,concat:(X)=>U(()=>q(Q).concat(q(X))),every:(X)=>U(()=>q(Q).every(X)),filter:(X)=>U(()=>q(Q).filter(X)),find:(X)=>U(()=>q(Q).find(X)),findIndex:(X)=>U(()=>q(Q).findIndex(X)),findLast:(X)=>U(()=>q(Q).findLast(X)),findLastIndex:(X)=>U(()=>q(Q).findLastIndex(X)),get lastItem(){return U(()=>{return v(q(Q)).pop()})},get length(){return U(()=>q(Q).length)},map:(X)=>U(()=>q(Q).map(X)),partition:(X)=>{let J=U(()=>q(Q).filter(X)),Z=U(()=>q(Q).filter((Y,G,B)=>!X(Y,G,B)));return[J,Z]},reduce:(X,J)=>U(()=>q(Q).reduce(X,J)),reduceRight:(X,J)=>U(()=>q(Q).reduceRight(X,J)),get reversed(){return U(()=>q(Q).toReversed())},some:(X)=>U(()=>q(Q).every(X)),toSorted:(X)=>U(()=>q(Q).toSorted(X)),toSpliced:(X,J,...Z)=>U(()=>q(Q).toSpliced(q(X),q(J),...Z))}},BX=(Q)=>{let W=["toExponential","toFixed","toPrecision"].reduce((X,J)=>{let Z=(...Y)=>{return U(()=>{let G=zQ(...Y);return q(Q)[J](...G)})};return X[J]=Z,X},{});return{...r(Q),...W,toConfined:(X,J)=>U(()=>q(Q)<q(X)?q(X):q(Q)>q(J)?q(J):q(Q)),toLocaleString:(X,J)=>U(()=>q(Q).toLocaleString(q(X),J))}},_X=(Q)=>{if(!XQ(q(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...r(Q),prop:($)=>U(()=>q(Q)[$]),get props(){return Object.keys(q(Q)).reduce((W,X)=>{let J=X;return W[J]=this.prop(J),W},{})},get keys(){return U(()=>Object.keys(q(Q)))}}},SQ=(Q)=>{let W=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce((X,J)=>{let Z=(...Y)=>{return U(()=>{let G=zQ(...Y);return q(Q)[J](...G)})};return X[J]=Z,X},{});return{...r(Q),...W,get length(){return U(()=>q(Q).length)},get lowercase(){return U(()=>q(Q).toLowerCase())},get Sentencecase(){return U(()=>{let X=q(Q);return X.charAt(0).toUpperCase()+X.slice(1).toLowerCase()})},get TitleCase(){return U(()=>q(Q).toLowerCase().replace(/\b\w/g,(X)=>X.toUpperCase()))},get UPPERCASE(){return U(()=>q(Q).toUpperCase())},localeCompare:(X,J,Z)=>U(()=>q(Q).localeCompare(q(X),q(J),Z)),normalize:(X)=>U(()=>q(Q).normalize(q(X))),replace:(X,J)=>U(()=>q(Q).replace(q(X),q(J))),replaceAll:(X,J)=>U(()=>q(Q).replaceAll(q(X),q(J))),search:(X)=>U(()=>q(Q).search(X)),split:(X,J)=>U(()=>{let Z=X instanceof RegExp?X:q(X);return q(Q).split(Z,q(J))}),toLocaleLowerCase:(X)=>U(()=>q(Q).toLocaleLowerCase(q(X))),toLocaleUpperCase:(X)=>U(()=>q(Q).toLocaleUpperCase(q(X)))}},RX=x("dksjfbksjnd"),s0=SQ(RX).split(""),k=(Q)=>{return typeof q(Q)==="number"?BX(Q):typeof q(Q)==="string"?SQ(Q):Array.isArray(q(Q))?UX(Q):XQ(q(Q))?_X(Q):r(Q)},_=(Q,...$)=>U(()=>{return Q.reduce((W,X,J)=>{let Z,Y=$[J];if(typeof Y==="function")Z=Y()??"";else if(YQ(Y))Z=Y.value??"";else Z=Y??"";return`${W}${X}${Z.toString()}`},"")}),LQ=["onmount","onunmount"],xQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],FX=[...xQ,...LQ],KX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],o,PX=(Q)=>{if(!o)o=document.createElement("textarea");return o.innerHTML=Q,o.value},DX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},IQ=DX(),S={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},l=(Q)=>Array.isArray(Q),t=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,m=(Q)=>typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,qQ=(Q)=>g(Q)&&m(Q.value),jX=(Q)=>m(Q)||qQ(Q),VQ=(Q)=>{return g(Q)&&(m(Q.value)||l(Q.value)&&Q.value.every(($)=>m($)))},gQ=(Q)=>{return!g(Q)&&(HQ(Q)||wQ(Q)||m(Q)||l(Q)&&Q.every(($)=>jX($)))},GQ=(Q)=>{return VQ(Q)||gQ(Q)},KQ=!1,OX={},c={},fX=globalThis.MutationObserver,AX=new fX((Q)=>{Q.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((W)=>{if(t(W)){let X=W,J=X.elementId;if(c[J])delete c[J];else OX[J]=X.tagName}}),$.removedNodes.forEach((W)=>{if(t(W)){let X=W,J=X.elementId,Z=X.unmountListener;if(Z)c[J]={element:X,unmountListener:Z}}})}),Object.entries(c).forEach(([$,W])=>{let{element:X,unmountListener:J}=W;yQ(X,J)})}),yQ=(Q,$)=>{if(!t(Q))return;let W=Q.children;for(let X=0;X<W.length;X++){let J=W[X];yQ(J,J.unmountListener)}if($&&$(Q),c[Q.elementId])delete c[Q.elementId]},TX=()=>{if(!KQ&&!S.currentIs("build"))AX.observe(document.body,{childList:!0,subtree:!0}),KQ=!0},CQ=(Q,$)=>FX.includes(Q)&&$===void 0,bQ=(Q,$)=>xQ.includes(Q)&&typeof $==="function",hQ=(Q,$)=>LQ.includes(Q)&&typeof $==="function",EX=(Q,$)=>CQ(Q,$)||bQ(Q,$)||hQ(Q,$),MX=(Q,$)=>{Object.entries($).forEach(([W,X])=>{if(CQ(W,X));else if(bQ(W,X)){let J=W.slice(2);Q.addEventListener(J,(Z)=>{if(J==="keypress")Z.preventDefault();X(Z)})}else if(hQ(W,X)){if(W==="onmount"&&!S.currentIs("build")){let J=X;setTimeout(()=>J(Q),0)}if(W==="onunmount")TX(),Q.unmountListener=X}else console.error(`Invalid event key: ${W} for element with tagName: ${Q.tagName}`)})},PQ=(Q,$,W)=>{let X=(YQ(W)?W.value:W)??"";if(typeof X==="boolean")if(X)Q.setAttribute($,"");else Q.removeAttribute($);else if($==="value")Q.value=X;else Q.setAttribute($,X)},kX=(Q,$)=>{let W={};Object.entries($).forEach((X)=>{let[J,Z]=X;if(g(Z))W[J]=Z;PQ(Q,J,Z)}),u(()=>{Object.entries(W).forEach((X)=>{let[J,Z]=X,Y=Z.value;if(!S.currentIs("run"))return;PQ(Q,J,Y)})})},n=(Q)=>{if(qQ(Q)){let $=Q.value;return n($)}if(typeof Q==="string")return document.createTextNode(PX(Q));if(m(Q)){let $=Q();if(!t($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return $}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},NX=(Q,$)=>{if(!$)return;if(VQ($))u(()=>{let X=$.value,J=l(X)?X:[X];J.forEach((Y,G)=>{let B=Q.childNodes[G],F=n(Y);if(B&&F)Q.replaceChild(F,B);else if(F)Q.appendChild(F);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let Z=J.length;while(Z<Q.childNodes.length){let Y=Q.childNodes[Z];if(Y)Q.removeChild(Y)}});if(gQ($)){let W=HQ($)?[$.value]:wQ($)?$.value:l($)?$:[$],X=[];if(W.forEach((J,Z)=>{if(qQ(J))X.push({index:Z,childSignal:J});let Y=n(J),G=Q.childNodes[Z];if(G&&Y)Q.replaceChild(Y,G);else if(!G&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),X.length)X.forEach(({index:J,childSignal:Z})=>{u(()=>{if(!Z.value)return;if(!S.currentIs("run"))return;let Y=n(Z.value),G=Q.childNodes[J];if(G&&Y)Q.replaceChild(Y,G);else if(!G&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},HX=(Q,$)=>{let W=void 0,X={},J={};return Object.entries(Q).forEach(([Z,Y])=>{if(Z==="children")if(GQ(Y))W=Y;else if(Y===void 0)W=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(Y)}`);else if(EX(Z,Y))X[Z]=Y;else J[Z]=Y}),{children:W,eventProps:X,attributeProps:J}},wX=(Q,$)=>{let W=()=>{let X=IQ.getNewId(),J=S.currentIs("mount")?document.querySelector(`[data-elem-id="${X}"]`):document.createElement(Q);J.elementId=X,J.unmountListener=void 0;let Z=GQ($)?{children:$}:$;if(!S.currentIs("run"))Z["data-elem-id"]=J.elementId.toString();let Y=HX(Z,J.tagName);if(MX(J,Y.eventProps),kX(J,Y.attributeProps),NX(J,Y.children),!S.currentIs("build"))J.removeAttribute("data-elem-id");return J};return W.isElementGetter=!0,W},DQ=(Q,$,W)=>{let X=x($),J=x(Q),Z=W(U(()=>J.value),U(()=>X.value)),Y,G,B=!1;if(Z?.isElementGetter)Y=()=>{if(B&&G)return G;return G=Z(),B=!0,G},Y.isElementGetter=!0;else if(typeof Z==="string")Y=Z;else throw`One of the child, ${Z} passed in ForElement is invalid.`;return{indexSignal:X,itemSignal:J,mappedChild:Y}},jQ=(Q,$,W)=>{if($!==void 0&&$>=0&&W){let X=$>Q.length?Q.length:$;Q.splice(X,0,W)}return Q},SX=({subject:Q,itemKey:$,map:W,n:X,nthChild:J})=>{if(J&&X===void 0||X!==void 0&&X>-1&&!J)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let Z=U(()=>{let j=q(Q);return Array.isArray(j)?j:[]});if(!$)return U(()=>jQ(Z.value.map(W),X,J));let Y=J;if(J&&typeof J!=="string"){let j=J(),P=()=>j;P.isElementGetter=!0,Y=P}let G=Z.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let B=null,F=U((j)=>{return B=j||B,Z.value}),R=U((j)=>{if(!j||!B)return F.value.map((N,M)=>DQ(N,M,W));return qX(B,F.value,$).map((T,N)=>{let M=(j||[])[T.oldIndex];if(console.assert(T.type==="add"&&T.oldIndex===-1&&!M||T.oldIndex>-1&&!!M,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),M){if(T.type==="shuffle")M.indexSignal.value=N;if(T.type==="update")M.indexSignal.value=N,M.itemSignal.value={...T.value};return M}return DQ(T.value,N,W)})});return U(()=>jQ(R.value.map((j)=>j.mappedChild),X,Y))},LX=({subject:Q,isTruthy:$,isFalsy:W})=>{let X=z.Span({style:"display: none;"}),J=()=>(q(Q)?$:W)||X;return g(Q)?U(J):J()},xX=({subject:Q,caseMatcher:$,defaultCase:W,cases:X})=>{let J=()=>{let Z=q(Q),Y=void 0;for(let[G,B]of Object.entries(X))if($&&$(Q,G)||Z===G){Y=B;break}return Y||W||z.Span({style:"display: none;"})};return g(Q)?U(J):J()},IX=KX.reduce((Q,$)=>{let W=$.split("").map((J,Z)=>!Z?J.toUpperCase():J).join(""),X=(J)=>wX($,J);return Q[W]=X,Q},{}),VX={For:SX,If:LX,Switch:xX},z={...IX,...VX},f=(Q)=>($)=>{for(let X of Object.keys($))if($[X]===void 0)delete $[X];let W=Object.entries($).reduce((X,J)=>{let[Z,Y]=J,G=typeof Y==="string",B=Array.isArray(Y)&&Y.every((R)=>typeof R==="string"),F=g(Y)||typeof Y==="function"?Y:G||B?{type:"non-signal",get value(){return q(Y)}}:GQ(Y)?Y:{type:"non-signal",get value(){return q(Y)}};return X[Z]=F,X},{});return Q(W)},cQ=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],gX=[1,1,1,1,1,1,1],yX=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],JQ=["Not started","Completed"],CX=[70,60,45],OQ={id:"analytics",lastInteraction:new Date().getTime()},e={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},fQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var AQ=86400000,bX=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],hX=["January","February","March","April","May","June","July","August","September","October","November","December"],cX=(Q,$)=>bX[Q].substring(0,$),vX=(Q,$)=>hX[Q].substring(0,$),UQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},QQ=(Q)=>UQ(Q).getTime(),vQ=(Q,$)=>QQ(Q)===QQ($),mX=(Q,$)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+$),pX=(Q)=>{let $=new Date;return Array(Q).fill(0).map((W,X)=>new Date($.getFullYear(),$.getMonth()-X,1)).reverse()},uX=(Q,$)=>{let W=QQ(Q),X=QQ($);if(W===X)return[UQ(new Date(W))];let J=W<X?W:X,Y=((W<X?X:W)-J)/AQ;return Array(Y+1).fill(0).map((G,B)=>new Date(J+B*AQ))},rX=(Q)=>{if(Q<1)throw"";let $=new Date,W=$.getFullYear(),X=$.getMonth(),J=new Date(W,X-(Q-1),1),Z=new Date(W,X+1,0);return{startDate:J,endDate:Z}},dX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},sX=(Q)=>location.href=Q,oX=()=>location.href=dX.HABITS.NEW.href,nX=1.6181,iX=(Q)=>yX.find(($)=>$.code===Q),mQ=(Q,$)=>{return Q<0?iX(-1):{isMaxLevel:Q===$.length-1,name:$[Q],code:Q}},aX=(Q)=>({level:mQ(-1,[]),date:Q}),lX=(Q,$,W)=>({level:mQ(Q,$),date:W}),tX=(Q,$)=>Q.find((W)=>vQ(W.date,$)),pQ=(Q)=>{let $=UQ(new Date(Q.id));return{...Q,startDate:$,levels:Q.levels.map((W,X)=>({isMaxLevel:X===Q.levels.length-1,name:W,code:X})),tracker:Q.tracker.map((W,X)=>lX(W,Q.levels,mX($,X))),milestones:X0(Q.milestones)}},eX=(Q)=>{return{...Q,levels:Q.levels.map(($)=>$.name),tracker:Q.tracker.map(($,W)=>$.level.code),milestones:$0(Q.milestones)}},Q0=()=>{let $={id:new Date().getTime(),title:"",frequency:gX,colorIndex:0,levels:JQ,tracker:[],milestones:CX,pauses:[],isStopped:!1};return pQ($)},X0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],$0=(Q)=>Q.filter(($)=>!!$.percent).map(($)=>$.percent),uQ=(Q,$)=>{let W=Q[0];for(let X=0;X<Q.length;X++)if(W=Q[X],W.percent<=$)break;return{label:W.label,icon:W.icon,color:W.color}},W0=(Q,$)=>{if(!Q.title)return"Title should not be empty";if($&&k0(Q.title))return"A habit with same name already exists";if(Q.frequency.every((X)=>!X))return"Select at least one day in a week";if(!Q.levels.every((X)=>!!X.name))return"One of the levels is empty";if(Q.levels.some((X,J)=>{for(let Z=J+1;Z<Q.levels.length;Z++)if(Q.levels[Z].name===X.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every((X)=>X.percent<=100&&X.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every((X,J,Z)=>J===0?!0:Z[J-1].percent>X.percent))return"Milestones should be in order (from high to low)";return""},J0=(Q,$,W)=>{let X=rQ(Q.tracker,$,W),J=Q.levels.length-1,Z=0,Y=0,G=0,B=0,F=0,R=0;return X.forEach((D,j)=>{if(Z+=D.level.code>-1?1:0,Y+=D.level.code>0?1:0,G+=D.level.code>0?D.level.code:0,j===X.length-1)return;let T=D.level.code<1;R=T?R+1:0;let M=100*((D.level.code>0?D.level.code:0)/(Q.levels.length-1));B=Math.round(M)>50?B+1:0,F=T?0:F+1}),{title:Q.title,aceStreak:B,followStreak:F,missed:R,percent:Math.round(100*(G/(Z*J))),totalDays:Z,workingDays:Y}},Z0=(Q,$,W)=>{let X=!!Q.length;if(!X)return{hideAddButton:!1,hideRemoveButton:$.length<3};let J=$[W],Z=!!(X&&Q.find((j)=>j.name===J.name)),Y=Q.length!==$.length,G=$.length<Q.length,B=$.length>Q.length,F=!Y&&Q.length&&Q.some((j,P)=>j.name!==$[P].name);return{hideAddButton:G||F||Z&&G,hideRemoveButton:G||F||Z&&B}},Y0=(Q,$,W)=>{let X=!!Q.length,J=$[W],Z=!!(X&&Q.find((G)=>G.name===J.name)),Y=Q.length!==$.length;return Z&&Y},z0=(Q,$,W,X=!1)=>{let J=cQ[W],Z=Q/($-1),G=Math.trunc(Math.pow(Z,nX)*255).toString(16),B=G.length===1?`0${G}`:G,F=Q<0||B==="0"?"transparent":`${J}${B}`,R=X?Q/($-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:F,fontColor:R,peakBackgroundColor:J,levelPercent:Math.round(Z*100)}},q0=(Q,$)=>{let W=[];for(let X of $)if(!Q.some((Z)=>{if(vQ(Z.date,X))return W.push(Z),!0;return!1}))W.push(aX(X));return W},rQ=(Q,$,W)=>{let X=uX($,W);return q0(Q,X)},G0=(Q,$,W)=>{if(!Q.length||Q.length===$.length)return W;let X=[...W],J=[];return Q.forEach((Z,Y)=>{let G=$.find((D)=>D.name===Z.name),B=!G,F=(D)=>{let j=[];W.forEach((P,T)=>{if(P.level.code===Z.code)j.push(T)}),J.push({indices:j,newLevel:D})};if(B){if(Y===Q.length-1)F($[$.length-1]);return}if(G.code===Z.code)return;F(G)}),J.forEach((Z)=>{Z.indices.forEach((Y)=>{X[Y]={...X[Y],level:Z.newLevel}})}),X},TQ=(Q)=>{let $=Q.length-1;for(let W=0;W<Q.length;W++)Q[W]={...Q[W],code:W,isMaxLevel:W===$};return Q},U0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],dQ="analytics",B0="id",_0="analytics",sQ=(Q)=>{localStorage.setItem(dQ,JSON.stringify(Q))},R0=()=>{if(!S.currentIs("run"))return OQ;let Q=()=>{let X=localStorage.getItem(dQ);return BQ(X,B0,_0)};if(!Q())sQ(OQ);let W=Q();if(!W)throw"Error fetching analytics";return W},F0=()=>{let Q=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;Q.push($)}return Q},K0=(Q)=>Q.startsWith("h."),oQ=(Q)=>`h.${Q}`,P0=(Q)=>{if(!K0(Q))return;let $=localStorage.getItem(Q),W=BQ($,"title");if(!W)return;return W},D0=()=>{if(!S.currentIs("run"))return[];let Q=[];for(let $ of F0()){let W=P0($);if(!W)continue;Q.push(W)}return Q},j0=(Q)=>{let $=oQ(Q.id);localStorage.setItem($,JSON.stringify(Q))},O0=(Q)=>{let $=oQ(Q);localStorage.removeItem($)},nQ="settings",f0="id",A0="local-settings",iQ=(Q)=>{localStorage.setItem(nQ,JSON.stringify(Q))},T0=()=>{if(!S.currentIs("run"))return e;let Q=()=>{let X=localStorage.getItem(nQ);return BQ(X,f0,A0)};if(!Q())iQ(e);let W=Q();if(!W)throw"Error fetching settings";return E0(W),Q()},E0=(Q)=>{if(!Q.editPage)iQ({...Q,editPage:e.editPage})},M0=(Q)=>{let $=R0();sQ({...$,lastInteraction:Q.getTime()})},k0=(Q)=>{let W=D0().find((X)=>X.title.trim()===Q.trim());return W?pQ(W):void 0},aQ=(Q)=>{let $=eX(Q);j0($)},N0=(Q)=>{let $={...Q,isStopped:!0};aQ($)},H0=(Q)=>O0(Q),w0=()=>{return T0().editPage},S0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},BQ=(Q,$,W)=>{let X=JSON.parse(Q||"{}"),J=X&&typeof X==="object",Z=X[$];if(!J||!(W?Z===W:!!Z))return;return X},w=(Q)=>{return(...$)=>{return S0(),M0(new Date),Q&&Q(...$)}},L0=f(({cssClasses:Q,hideRemove:$,hideAdd:W,onRemove:X,onAdd:J})=>{let Z=E($).and(W).ternary("bn","ba"),Y=E(W).ternary("","br");return z.Span({class:_`br3 pb1 f4 bw1 b--light-silver dark-gray ${Z} ${Q}`,children:[z.If({subject:$,isFalsy:z.Span({class:_`pointer ph2 pb1 bw1 b--light-silver ${Y}`,onclick:w(X),children:"-"})}),z.If({subject:W,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:w(J),children:"+"})})]})}),V=f(({cssClasses:Q,onTap:$,children:W})=>z.Button({class:_`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:w(()=>$()),children:W})),o0=f(({cssClasses:Q})=>{return z.Div({class:_`bb b--light-gray ${Q}`})}),I=f(({cssClasses:Q,size:$,onClick:W,iconName:X,title:J})=>{let Z=W?"pointer":"",Y=k($).or(16);return z.Span({class:_`material-symbols-outlined ${Z} ${Q}`,style:_`font-size: ${Y}px`,onclick:w(W),children:X,title:J})}),EQ=f(({cssClasses:Q,href:$,target:W,onClick:X,children:J})=>{let Z=E($).or(X).ternary("pointer underline","");return z.A({...$?{href:$}:{},class:_`noselect ${Z} ${Q}`,target:W,onclick:w(X),children:J})}),$Q=f(({cssClasses:Q,isOpen:$,content:W,onTapOutside:X})=>{let J=(Z)=>{setTimeout(()=>u(()=>{if($.value)Z.showModal();else Z.close()}))};return z.Dialog({onmount:J,onclick:w(X),class:_`pa0 br3 ${Q}`,children:[z.Div({onclick:(Z)=>Z.stopPropagation(),children:W})]})}),x0=f(({cssClasses:Q,placeholder:$,num:W,onchange:X})=>{let J=(Z)=>{let Y=Z.target.value,G=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));X(G)};return z.Input({class:Q,type:"number",placeholder:$,value:k(W).string,onchange:J})}),I0=f(({progress:Q,cssClasses:$})=>{return z.Div({class:_`br-pill bg-moon-gray ${$}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:_`width: ${k(Q).toConfined(0,100)}%;`})})}),lQ=f(({cssClasses:Q,header:$,content:W,bottombar:X})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:_`w6-ns ${Q}`,children:[z.If({subject:$,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),W,z.Div({class:"pv6 mt5"}),z.If({subject:X,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:X})})]})})}),n0=f(({cssClasses:Q,tabItemCssClasses:$,selectedTabCssClasses:W,tabs:X,selectedTabIndex:J,onTabChange:Z})=>{let Y=(G)=>G===J.value?`b--light-silver b black ${W?.value}`:"pointer b--transparent b--hover-black silver pointer";return z.Div({class:_`bg-white br3 ${Q}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:X,map:(G,B)=>z.Span({class:_`
                w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${Y(B)} ${$}`,onclick:w(()=>Z(B)),children:G})})})})}),MQ=f(({cssClasses:Q,placeholder:$,disabled:W,text:X,onmount:J,onchange:Z,onkeydown:Y,onfocus:G,onblur:B})=>{let F,R=(P)=>{if(F=P,J)J(P)},D=(P)=>{let T=P.target.value;if(Z)Z(T)},j=(P)=>{let T=P.key.length===1?F.value+P.key:P.key==="Backspace"?F.value.slice(0,-1):F.value,N={key:P.key,text:T};if(Y)Y(N)};return z.Input({onmount:R,class:_`${Q}`,type:"text",placeholder:$,disabled:E(W).truthy,value:X,onchange:D,onkeydown:j,onfocus:G,onblur:B})}),i0=f(({cssClasses:Q,isOn:$,onToggle:W})=>{let X=E($).ternary("b--transparent","b--moon-gray bg-moon-gray"),J=E($).ternary("b--mid-gray bg-mid-gray","b--transparent");return z.Div({class:_`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:w(W),children:[z.Div({class:_`br-100 ba bw1 b--hover-black pa1 ${X}`}),z.Div({class:"pa05"}),z.Div({class:_`br-100 ba bw1 b--hover-black pa1 ${J}`})]})}),V0=f(({cssClasses:Q,justifyCssClasses:$,label:W})=>{let X=k($).or("justify-end"),J=k(W).or("Add habit");return z.Div({class:_`w-100 flex ${X} ${Q}`,children:V({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[I({cssClasses:"nl1 mr1",size:22,iconName:"add"}),J],onTap:oX})})}),_Q=f(({cssClasses:Q,dotCssClasses:$,colorIndex:W,level:X,totalLevels:J,showText:Z,textContent:Y,icon:G,iconSize:B,isRectangular:F,showHeight:R,onClick:D})=>{let j=E(F).ternary("br0","br-100"),P=E(X).isLT(0).ternary("bg-transparent","bg-light-gray"),{peakBackgroundColor:T,backgroundColor:N,fontColor:M,levelPercent:y}=k(b(z0,X,J,W,Z)).props,d=k(Y).or("·"),L=E(R).and(G).andThisIsGT(y,99).truthy,p=()=>{if(D&&X.value>=0)D()};return z.Span({class:_`pointer relative overflow-hidden ${j} ${P} ${Q}`,onclick:w(p),children:z.If({subject:R,isTruthy:z.Span({class:_`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,style:_`
            background-color: ${T};
            color: white;
            height: ${y}%;`,children:z.If({subject:L,isTruthy:I({iconName:G,size:B})})}),isFalsy:z.Span({class:_`flex items-center justify-around absolute absolute--fill ${$}`,style:_`
            background-color: ${N};
            color: ${M};`,children:z.If({subject:G,isTruthy:I({iconName:G,size:B}),isFalsy:z.Span(d)})})})})}),g0=f(({cssClasses:Q})=>{return V({cssClasses:_`pa3 flex items-center ${Q}`,children:[I({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),a0=f(({cssClasses:Q,milestones:$,achievedMilestone:W,completionPercent:X})=>{let J=k(W).prop("color"),Z=b((Y)=>Y>53?"Average completion":Y>43?"Avg completion":Y>35?"Completion":"",X);return z.Div({class:_`center ${Q}`,children:[z.Div({class:"pb2 w-100 relative",children:z.For({subject:$,map:(Y,G)=>{return y0({colorCss:`bg-${Y.color}`,percent:Y.upperLimit,hideUpperLimit:G===0})}})}),z.Div({class:_`nt3dot6 h1dot2 bw1 relative br b--${J}`,style:_`width: ${X}%;`,children:z.Div({class:_`relative flex items-start nt1 justify-between f7 mid-gray`,children:[z.Div(Z),z.Div({class:_`absolute right-0 pr1 b f6 ${J}`,children:_`${X}%`})]})})]})}),y0=f(({colorCss:Q,hideUpperLimit:$,percent:W})=>{let X=E($).ternary("",_`${W}%`),J=_`width: ${W}%;`;return z.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:J,children:[z.Div({class:_`absolute absolute-fill h0dot15 w-100 ${Q}`}),z.Div({class:"flex justify-end w-100 pt2 f7",children:z.Div({class:"nr3 pb2 light-silver b",children:X})})]})}),C0=f(({cssClasses:Q,habit:$,date:W,colorIndex:X,totalLevels:J})=>{let Z=U(()=>{let Y=W.value.getFullYear(),G=W.value.getMonth(),B=new Date(Y,G,1),F=new Date(Y,G+1,0);return rQ($.value.tracker,B,F)});return z.Div({class:_`flex items-center ${Q}`,children:[z.Div({class:"f8 b w2 light-silver",children:U(()=>vX(W.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:Z,map:(Y)=>_Q({cssClasses:"pa1",colorIndex:X,level:Y.level.code,totalLevels:J})})})]})}),l0=f(({cssClasses:Q,habit:$,months:W,onClick:X})=>{let{milestones:J,title:Z,colorIndex:Y,levels:G}=k($).props,B=b((P,T)=>{let{startDate:N,endDate:M}=rX(P);return J0(T,N,M).percent},W,$),F=b(uQ,J,B),{icon:R,color:D}=k(F).props,j=b(pX,W);return z.Div({class:_`pointer bg-white ${Q}`,onclick:w(X),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:Z}),z.Div({class:"f6 silver b flex items-center",children:[I({cssClasses:_`mr1 ${D}`,iconName:R}),_`${B}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:j,map:(P)=>C0({cssClasses:"mb1",habit:$,date:P,colorIndex:Y,totalLevels:G.value.length})})})]})}),b0=f(({cssClasses:Q,editableHabit:$,editedHabit:W,hideDescriptions:X,showFullCustomisations:J,onChange:Z})=>{let Y=x(!1),G=k(J).or(Y),{title:B,frequency:F,levels:R,milestones:D,colorIndex:j}=k(W).props,P=k(F).every((A)=>!!A),T="bg-mid-gray white",N="bg-near-white light-silver",M=E(P).ternary("bg-mid-gray white","bg-near-white light-silver"),y=E(Y).ternary("remove","add"),d=_`Show ${E(Y).ternary("Less","More")} Customisations`,L=(A)=>{Z({...W.value,title:A})},p=(A)=>{Z({...W.value,colorIndex:A})},s=(A)=>{if(A<-1||A>6)throw"Invalid day index";if(A===-1){Z({...W.value,frequency:[1,1,1,1,1,1,1]});return}let K=P.value?F.value.map((H)=>0):F.value;K[A]=P.value?1:K[A]?0:1,Z({...W.value,frequency:K})},tQ=(A,K)=>{let H=R.value;H[K]={...H[K],name:A},Z({...W.value,levels:H})},eQ=(A)=>{let K=R.value;K.splice(A,0,{isMaxLevel:!1,name:"",code:A}),Z({...W.value,levels:TQ(K)})},QX=(A)=>{let K=R.value;if(K.length<3)return;K.splice(A,1),Z({...W.value,levels:TQ(K)})},XX=(A,K)=>{if(K<0||K>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let H=[...W.value.milestones];H[K]={...H[K],percent:A},Z({...W.value,milestones:H})};return z.Div({class:Q,children:[h({cssClasses:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:_`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${M}`,children:"Daily",onclick:w(()=>s(-1))}),map:(A,K)=>{let H=U(()=>F.value[K]&&!P.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:_`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${H}`,children:cX(K,1),onclick:w(()=>s(K))})}})})}),h({cssClasses:"pb2",title:"Title of the habit",children:MQ({cssClasses:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:B,onchange:L})}),z.If({subject:G,isTruthy:z.Div([h({cssClasses:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:cQ,map:(A,K)=>{let H=E(j).equals(K).ternary("#999","#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:_`border-color: ${H}`,onclick:w(()=>p(K)),children:z.Span({class:_`pa2 br-100`,style:`background-color: ${A}`})})}})})}),h({cssClasses:"pb3",title:"Status update levels",hideDescription:X,description:`
                  When updating a habit status in a day, we generally have only two levels - "${JQ[0]}"
                  or "${JQ[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.`,children:z.For({subject:R,map:(A,K)=>{let H=$?.value?.levels||[],RQ=R.value,{hideAddButton:$X,hideRemoveButton:WX}=Z0(H,RQ,K),JX=Y0(H,RQ,K);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[_Q({cssClasses:"w1 h2 br3 br--left ml1px",dotCssClasses:"br3 br--left",colorIndex:j,level:K,isRectangular:!0,totalLevels:R.value.length}),MQ({cssClasses:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${K}`,disabled:JX,text:A.name,onchange:(ZX)=>tQ(ZX,K)})]}),L0({hideAdd:$X,hideRemove:WX,onAdd:()=>eQ(K+1),onRemove:()=>QX(K)})]}),z.If({subject:E(R).lengthGT(K+1).truthy,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),h({title:"Habit completion goal",hideDescription:X,description:_`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>uQ(W.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.`,children:z.For({subject:D,n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(A,K)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[I({cssClasses:`mr2 ${A.color}`,size:20,iconName:A.icon}),A.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:K===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:x0({cssClasses:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:A.percent,onchange:(H)=>XX(H,K)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:J,isFalsy:V({cssClasses:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[I({cssClasses:"mr1",iconName:y}),d]})})]})}),h0=f(({editableHabit:Q,onMount:$})=>{let W=x(e.editPage),X=x(!1),J=x(!1),Z=x(""),Y=x(Q0()),G=b((L)=>L?`Edit '${L.title}'`:"Add new habit",Q),B=E(G).lengthGT(22).ternary("f2dot66",""),F=E(Q).ternary("Update","Add"),R=()=>X.value=!0,D=()=>X.value=!1,j=()=>{D(),history.go(-2)},P=()=>J.value=!0,T=()=>J.value=!1,N=()=>{N0(Y.value),T(),history.back()},M=(L)=>Y.value=L,y=()=>{if(Z.value=W0(Y.value,!Q?.value),Z.value)return;let L=Y.value,p=[...Q?.value?.levels||[]],s=G0(p,L.levels,L.tracker);aQ({...Y.value,tracker:s}),history.back()};return u0({onMount:()=>{if($)$(),Y.value=Q?.value;W.value=w0()},body:lQ({cssClasses:"bg-white ph3",header:z.Div({class:B,children:G}),content:z.Div([z.If({subject:Q,isTruthy:z.Div([h({cssClasses:"pb2",title:"Actions",children:[c0({isOpen:X,habit:Y,onClose:D,onDone:j}),EQ({cssClasses:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:R}),v0({isOpen:J,habit:Y,onClose:T,onDone:N}),EQ({cssClasses:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:P})]})])}),b0({editableHabit:Q,editedHabit:Y,hideDescriptions:U(()=>!W.value.showHints),showFullCustomisations:k(W).prop("showFullCustomisation"),onChange:M})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:Z,isTruthy:z.Div({class:"red mb3",children:Z})}),z.Div({class:"flex items-center justify-stretch",children:[g0({cssClasses:"w4dot50 w4dot25-ns"}),V({cssClasses:"w-100 pa3 ml3 b",children:F,onTap:y})]})]})})})}),t0=f(({cssClasses:Q})=>{return z.Div({class:_`flex flex-column items-center justify-around ${Q}`,children:[z.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),z.Div("Looks like, you just landed here!"),V0({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),c0=f(({isOpen:Q,habit:$,onClose:W,onDone:X})=>{let J=()=>{H0($.value.id),X()};return $Q({cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:W,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:_`Delete '${()=>$.value.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[V({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:W}),V({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:J})]})]})})}),e0=f(({isOpen:Q,habit:$,date:W,showTitleInHeader:X,onClose:J,onChange:Z})=>{let{title:Y,levels:G,tracker:B,colorIndex:F}=k($).props,R=U(()=>X?.value?`Change status of  '${Y.value}'`:`Change status for ${W.value.toDateString()}`);return $Q({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:J,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:R}),z.Div({class:"f5 mb1",children:z.For({subject:k(G).reversed,map:(D,j)=>{let P=G.value.length-1-j,T=_`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>tX(B.value,W.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`,N=P<1?"b--light-silver":"b--transparent";return z.Div({class:T,onclick:w(()=>Z(P)),children:[_Q({cssClasses:`pa1 mr3 ba b ${N}`,colorIndex:F,level:P,totalLevels:G.value.length,isRectangular:!0}),z.Span(D.name)]})}})})]})})}),v0=f(({isOpen:Q,habit:$,onClose:W,onDone:X})=>{return $Q({cssClasses:"bn",isOpen:Q,onTapOutside:W,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:_`Stop '${()=>$.value.title}'?`}),z.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",z.Br({}),z.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),z.Div({class:"flex items-center justify-between f6",children:[V({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:W}),V({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:X})]})]})})}),m0=f(({cssClasses:Q,links:$})=>{return z.Div({class:_`flex items-center justify-between pv3 bg-near-white ${Q}`,children:z.For({subject:$,map:(W)=>p0({label:W.label,icon:W.icon,isSelected:W.isSelected,href:W.href})})})}),p0=f(({cssClasses:Q,label:$,icon:W,isSelected:X,href:J})=>{let Z=E(X).ternary("app-theme-color b","black");return z.Div({class:_`pointer noselect flex flex-column items-center justify-center pb2 ${Z} ${Q}`,onclick:w(()=>sX(J.value)),children:[I({size:22,iconName:W}),z.Div({class:"f7",children:$})]})}),Q1=f(({cssClasses:Q,header:$,content:W,navbarTop:X,route:J})=>{return lQ({cssClasses:Q,header:$,content:W,bottombar:z.Div({children:[z.If({subject:X,isTruthy:X}),m0({cssClasses:"nl3 nr3 ph4",links:b(U0,J)})]})})}),u0=f(({cssClasses:Q,body:$,onMount:W})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:Q,onmount:W,children:[z.Script({src:"main.js",defer:"true"}),$]})]})}),h=f(({cssClasses:Q,contentCssClasses:$,title:W,description:X,hideDescription:J,children:Z})=>{let Y=E(X).andNot(J).truthy;return z.Div({class:_`mt3 mb4 ${Q}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:W}),z.If({subject:Y,isTruthy:z.Div({class:"mb3 f6 silver fw5",children:_`${X}`})}),z.Div({class:$,children:Z})]})}),X1=f(({cssClasses:Q,iconSize:$,selectedOptionIndex:W,onChange:X})=>{let J=x(!1),Z=U(()=>fQ[W.value]),Y=()=>J.value=!0,G=()=>J.value=!1,B=(R)=>R===Z.value.label?"bg-near-white black fw6":"gray fw5",F=(R)=>{X(R),G()};return z.Div({class:Q,children:[kQ({cssClasses:"pointer",descending:k(Z).prop("decending"),iconName:k(Z).prop("icon"),size:k($).or(20),onClick:Y}),$Q({cssClasses:"f5 normal ba bw0 outline-0",isOpen:J,onTapOutside:G,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:fQ,map:(R,D)=>z.Div({class:_`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>B(R.label)}`,onclick:w(()=>F(D)),children:[kQ({cssClasses:"ml1 mr2",descending:R.decending,iconName:R.icon,size:20}),z.Span(R.label)]})})})]})})]})}),kQ=f(({cssClasses:Q,descending:$,iconName:W,size:X,onClick:J})=>{let Z=J?"pointer":"",Y=E($).ternary("arrow_upward","arrow_downward"),G=E(X).mul(4).div(5).result;return z.Span({class:_`flex items-center ${Z} ${Q}`,onclick:w(J),children:[I({cssClasses:"silver",iconName:Y,size:G}),I({size:X,iconName:W})]})}),$1=f(({cssClasses:Q,progress:$})=>{return z.Div({class:_`flex flex-column justify-center items-center vh-100 ${Q}`,children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),I0({cssClasses:"w-40",progress:$}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),r0=h0({}),d0=()=>{S.start("mount"),IQ.resetIdCounter(),r0(),S.start("run")};d0();
