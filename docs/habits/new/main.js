var ZQ=(Q)=>{let X=Object.entries(Q).sort((Z,$)=>Z[0].localeCompare($[0]));return X.forEach(([Z,$],W)=>{if($&&typeof $==="object"&&!Array.isArray($))X[W]=[Z,ZQ($)]}),Object.fromEntries(X)},XQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},n=(Q)=>{if(Array.isArray(Q)){let X=[...Q],Z=[];return X.forEach(($)=>{Z.push(n($))}),Z}if(XQ(Q)){let X={...Q},Z={};return Object.keys(X).forEach(($)=>{Z[$]=n(X[$])}),Object.freeze(Z)}return Q},c=(Q)=>{if(Array.isArray(Q)){let Z=[...Q],$=[];return Z.forEach((W)=>{$.push(c(W))}),$}if(XQ(Q)){let Z={...Q},$={};return Object.keys(Z).forEach((W)=>{$[W]=c(Z[W])}),$}return Q},FQ=(Q,X="index")=>Q.map((Z,$)=>({[X]:$,value:Z})),qX=(Q,X)=>{let Z=ZQ(Q),$=ZQ(X),W=Object.keys(Z),J=Object.keys($);if(W.length!==J.length)return!1;for(let Y of W)if(!J.includes(Y)||!JQ(Z[Y],$[Y]))return!1;return!0},UX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let Z=0;Z<Q.length;Z++)if(!JQ(Q[Z],X[Z]))return!1;return!0},JQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return UX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return qX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},GX=(Q,X,Z)=>{let W=FQ(c(Q),"index");return FQ(c(X),"index").map((Y)=>{let U="add",B=-1,F=Y.value;return W.some((R,j)=>{if(U=JQ(R.value,Y.value)?R.index===Y.index?"idle":"shuffle":Z&&R.value[Z]!==void 0&&R.value[Z]===Y.value[Z]?"update":"add",U!=="add")return B=R.index,W.splice(j,1),!0;return!1}),{type:U,oldIndex:B,value:F}})},l=null,S=(Q)=>{let X=n(Q),Z=new Set;return{type:"source-signal",get value(){if(l)Z.add(l);return c(X)},set value($){if($===X)return;X=n($),Z.forEach((W)=>W&&W())}}},u=(Q)=>{l=Q,Q(),l=null},G=(Q)=>{let X,Z=S(X);return u(()=>{X=Q(X),Z.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return Z.value}}},q=(Q)=>YQ(Q)?Q.value:Q,y=(Q)=>["source-signal","derived-signal"].includes(Q?.type),TQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some((Z)=>typeof Q?.value===Z)),YQ=(Q)=>y(Q)||TQ(Q),NQ=(Q)=>TQ(Q,["string"]),HQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),b=(Q,...X)=>{return G(()=>{let Z=X.map(($)=>q($));return Q(...Z)})},f=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...{get truthy(){return G(()=>!!X())},get falsy(){return G(()=>!X())},get truthyFalsyPair(){return G(()=>{let $=!!X();return[$,!$]})},ternary:($,W)=>G(()=>{return X()?q($):q(W)})},or:($)=>f(()=>{return!!(X()||q($))}),orNot:($)=>f(()=>{return!!(X()||!q($))}),and:($)=>f(()=>{return!!(X()&&q($))}),andNot:($)=>f(()=>{return!!(X()&&!q($))}),equals:($)=>f(()=>{return X()===q($)}),notEquals:($)=>f(()=>{return X()!==q($)}),orBothEqual:($,W)=>f(()=>{let J=X(),Y=q($)===q(W);return!!(J||Y)}),orBothUnequal:($,W)=>f(()=>{let J=X(),Y=q($)!==q(W);return!!(J||Y)}),andBothEqual:($,W)=>f(()=>{let J=X(),Y=q($)===q(W);return!!(J&&Y)}),andBothUnequal:($,W)=>f(()=>{let J=X(),Y=q($)!==q(W);return!!(J&&Y)}),orThisIsLT:($,W)=>f(()=>{let J=X(),Y=q($)<q(W);return!!(J||Y)}),orThisIsLTE:($,W)=>f(()=>{let J=X(),Y=q($)<=q(W);return!!(J||Y)}),orThisIsGT:($,W)=>f(()=>{let J=X(),Y=q($)>q(W);return!!(J||Y)}),orThisIsGTE:($,W)=>f(()=>{let J=X(),Y=q($)>=q(W);return!!(J||Y)}),andThisIsLT:($,W)=>f(()=>{let J=X(),Y=q($)<q(W);return!!(J&&Y)}),andThisIsLTE:($,W)=>f(()=>{let J=X(),Y=q($)<=q(W);return!!(J&&Y)}),andThisIsGT:($,W)=>f(()=>{let J=X(),Y=q($)>q(W);return!!(J&&Y)}),andThisIsGTE:($,W)=>f(()=>{let J=X(),Y=q($)>=q(W);return!!(J&&Y)})}},C=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...f(Q),get result(){return G(X)},add:(Z)=>C(()=>{return X()+q(Z)}),sub:(Z)=>C(()=>{return X()-q(Z)}),mul:(Z)=>C(()=>{return X()*q(Z)}),div:(Z)=>C(()=>{return X()/q(Z)}),mod:(Z)=>C(()=>{return X()%q(Z)}),pow:(Z)=>C(()=>{return X()**q(Z)}),isBetween:(Z,$,W=!0,J=!0)=>f(()=>{let Y=X(),U=q(Z),B=q($),F=W?Y>=U:Y>U,R=J?Y<=B:Y<B;return F&&R}),isLT:(Z)=>f(()=>X()<q(Z)),isLTE:(Z)=>f(()=>X()<=q(Z)),isGT:(Z)=>f(()=>X()>q(Z)),isGTE:(Z)=>f(()=>X()>=q(Z))}},BX=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...f(Q),lengthBetween:(Z,$,W=!0,J=!0)=>f(()=>{let U=X().length,B=q(Z),F=q($),R=W?U>=B:U>B,j=J?U<=F:U<F;return R&&j}),lengthEquals:(Z)=>f(()=>{return X().length===q(Z)}),lengthNotEquals:(Z)=>f(()=>{return X().length!==q(Z)}),lengthLT:(Z)=>f(()=>{return X().length<q(Z)}),lengthLTE:(Z)=>f(()=>{return X().length<=q(Z)}),lengthGT:(Z)=>f(()=>{return X().length>q(Z)}),lengthGTE:(Z)=>f(()=>{return X().length>=q(Z)})}},k=(Q)=>{let Z=(typeof Q==="function"?Q:()=>q(Q))();return typeof Z==="number"?C(Q):typeof Z==="string"||Array.isArray(Z)?BX(Q):f(Q)},zQ=(...Q)=>Q.map((X)=>q(X)),r=(Q)=>{return{get string(){return G(()=>{let X=q(Q);return X===void 0||X===null?void 0:X.toString()})},or:(X)=>G(()=>q(Q)||q(X))}},_X=(Q)=>{let Z=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce(($,W)=>{let J=(...Y)=>{return G(()=>{let U=zQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...r(Q),...Z,concat:($)=>G(()=>q(Q).concat(q($))),every:($)=>G(()=>q(Q).every($)),filter:($)=>G(()=>q(Q).filter($)),find:($)=>G(()=>q(Q).find($)),findIndex:($)=>G(()=>q(Q).findIndex($)),findLast:($)=>G(()=>q(Q).findLast($)),findLastIndex:($)=>G(()=>q(Q).findLastIndex($)),get lastItem(){return G(()=>{return c(q(Q)).pop()})},get length(){return G(()=>q(Q).length)},map:($)=>G(()=>q(Q).map($)),partition:($)=>{let W=G(()=>q(Q).filter($)),J=G(()=>q(Q).filter((Y,U,B)=>!$(Y,U,B)));return[W,J]},reduce:($,W)=>G(()=>q(Q).reduce($,W)),reduceRight:($,W)=>G(()=>q(Q).reduceRight($,W)),get reversed(){return G(()=>q(Q).toReversed())},some:($)=>G(()=>q(Q).every($)),toSorted:($)=>G(()=>q(Q).toSorted($)),toSpliced:($,W,...J)=>G(()=>q(Q).toSpliced(q($),q(W),...J))}},RX=(Q)=>{let Z=["toExponential","toFixed","toPrecision"].reduce(($,W)=>{let J=(...Y)=>{return G(()=>{let U=zQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...r(Q),...Z,toConfined:($,W)=>G(()=>q(Q)<q($)?q($):q(Q)>q(W)?q(W):q(Q)),toLocaleString:($,W)=>G(()=>q(Q).toLocaleString(q($),W))}},FX=(Q)=>{if(!XQ(q(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...r(Q),prop:(X)=>G(()=>q(Q)[X]),get props(){return Object.keys(q(Q)).reduce((Z,$)=>{let W=$;return Z[W]=this.prop(W),Z},{})},get keys(){return G(()=>Object.keys(q(Q)))}}},xQ=(Q)=>{let Z=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce(($,W)=>{let J=(...Y)=>{return G(()=>{let U=zQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...r(Q),...Z,get length(){return G(()=>q(Q).length)},get lowercase(){return G(()=>q(Q).toLowerCase())},get Sentencecase(){return G(()=>{let $=q(Q);return $.charAt(0).toUpperCase()+$.slice(1).toLowerCase()})},get TitleCase(){return G(()=>q(Q).toLowerCase().replace(/\b\w/g,($)=>$.toUpperCase()))},get UPPERCASE(){return G(()=>q(Q).toUpperCase())},localeCompare:($,W,J)=>G(()=>q(Q).localeCompare(q($),q(W),J)),normalize:($)=>G(()=>q(Q).normalize(q($))),replace:($,W)=>G(()=>q(Q).replace(q($),q(W))),replaceAll:($,W)=>G(()=>q(Q).replaceAll(q($),q(W))),search:($)=>G(()=>q(Q).search($)),split:($,W)=>G(()=>{let J=$ instanceof RegExp?$:q($);return q(Q).split(J,q(W))}),toLocaleLowerCase:($)=>G(()=>q(Q).toLocaleLowerCase(q($))),toLocaleUpperCase:($)=>G(()=>q(Q).toLocaleUpperCase(q($)))}},PX=S("dksjfbksjnd"),t0=xQ(PX).split(""),w=(Q)=>{return typeof q(Q)==="number"?RX(Q):typeof q(Q)==="string"?xQ(Q):Array.isArray(q(Q))?_X(Q):XQ(q(Q))?FX(Q):r(Q)},_=(Q,...X)=>G(()=>{return Q.reduce((Z,$,W)=>{let J,Y=X[W];if(typeof Y==="function")J=Y()??"";else if(YQ(Y))J=Y.value??"";else J=Y??"";return`${Z}${$}${J.toString()}`},"")}),LQ=["onmount","onunmount"],SQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],KX=[...SQ,...LQ],jX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],o,VQ=(Q)=>{if(!o)o=document.createElement("textarea");return o.innerHTML=Q,o.value},DX=(Q)=>{try{return decodeURIComponent(Q)}catch{return Q}},fX=(Q)=>{return Q.replace(/\\u[\dA-Fa-f]{4}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16)))},OX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},IQ=OX(),x={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},yQ=(Q,X,Z)=>{let $=Q;$=VQ($),$=DX($),$=fX($);let W=$.trim().toLowerCase();for(let J of X)if(J.test(W))throw Z;return Q},AX=(Q)=>yQ(Q,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),EX=(Q)=>yQ(Q,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),kX=(Q,X)=>{let Z=X||"";if(Q==="href"){if(typeof Z==="boolean")throw"The value of 'href' attribute should not be a boolean";return AX(Z)}if(Q==="style"){if(typeof Z==="boolean")throw"The value of 'style' attribute should not be a boolean";return EX(Z)}return Z},a=(Q)=>Array.isArray(Q),t=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,m=(Q)=>Q===void 0||typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,qQ=(Q)=>y(Q)&&m(Q.value),MX=(Q)=>m(Q)||qQ(Q),gQ=(Q)=>{return y(Q)&&(m(Q.value)||a(Q.value)&&Q.value.every((X)=>m(X)))},CQ=(Q)=>{return!y(Q)&&(NQ(Q)||HQ(Q)||m(Q)||a(Q)&&Q.every((X)=>MX(X)))},UQ=(Q)=>{return gQ(Q)||CQ(Q)},PQ=!1,wX={},v={},TX=globalThis.MutationObserver,NX=new TX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach((Z)=>{if(t(Z)){let $=Z,W=$.elementId;if(v[W])delete v[W];else wX[W]=$.tagName}}),X.removedNodes.forEach((Z)=>{if(t(Z)){let $=Z,W=$.elementId,J=$.unmountListener;if(J)v[W]={element:$,unmountListener:J}}})}),Object.entries(v).forEach(([X,Z])=>{let{element:$,unmountListener:W}=Z;bQ($,W)})}),bQ=(Q,X)=>{if(!t(Q))return;let Z=Q.children;for(let $=0;$<Z.length;$++){let W=Z[$];bQ(W,W.unmountListener)}if(X&&X(Q),v[Q.elementId])delete v[Q.elementId]},HX=()=>{if(!PQ&&!x.currentIs("build"))NX.observe(document.body,{childList:!0,subtree:!0}),PQ=!0},hQ=(Q,X)=>KX.includes(Q)&&X===void 0,vQ=(Q,X)=>SQ.includes(Q)&&typeof X==="function",cQ=(Q,X)=>LQ.includes(Q)&&typeof X==="function",xX=(Q,X)=>hQ(Q,X)||vQ(Q,X)||cQ(Q,X),LX=(Q,X)=>{Object.entries(X).forEach(([Z,$])=>{if(hQ(Z,$));else if(vQ(Z,$)){let W=Z.slice(2);Q.addEventListener(W,(J)=>{if(W==="keypress")J.preventDefault();$(J)})}else if(cQ(Z,$)){if(Z==="onmount"&&!x.currentIs("build")){let W=$;setTimeout(()=>W(Q),0)}if(Z==="onunmount")HX(),Q.unmountListener=$}else console.error(`Invalid event key: ${Z} for element with tagName: ${Q.tagName}`)})},KQ=(Q,X,Z)=>{let $=YQ(Z)?Z.value:Z,W=kX(X,$);if(typeof W==="boolean")if(W)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=W;else Q.setAttribute(X,W)},SX=(Q,X)=>{let Z={};Object.entries(X).forEach(($)=>{let[W,J]=$;if(y(J))Z[W]=J;KQ(Q,W,J)}),u(()=>{Object.entries(Z).forEach(($)=>{let[W,J]=$,Y=J.value;if(!x.currentIs("run"))return;KQ(Q,W,Y)})})},i=(Q)=>{if(qQ(Q)){let X=Q.value;return i(X)}if(!Q||typeof Q==="string")return document.createTextNode(VQ(Q||""));if(m(Q)){let X=Q();if(!t(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},VX=(Q,X)=>{if(!X)return;if(gQ(X))u(()=>{let $=X.value,W=a($)?$:[$];W.forEach((Y,U)=>{let B=Q.childNodes[U],F=i(Y);if(B&&F)Q.replaceChild(F,B);else if(F)Q.appendChild(F);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let J=W.length;while(J<Q.childNodes.length){let Y=Q.childNodes[J];if(Y)Q.removeChild(Y)}});if(CQ(X)){let Z=NQ(X)?[X.value]:HQ(X)?X.value:a(X)?X:[X],$=[];if(Z.forEach((W,J)=>{if(qQ(W))$.push({index:J,childSignal:W});let Y=i(W),U=Q.childNodes[J];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),$.length)$.forEach(({index:W,childSignal:J})=>{u(()=>{if(!J.value)return;if(!x.currentIs("run"))return;let Y=i(J.value),U=Q.childNodes[W];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},IX=(Q,X)=>{let Z=void 0,$={},W={};return Object.entries(Q).forEach(([J,Y])=>{if(J==="children")if(UQ(Y))Z=Y;else if(Y===void 0)Z=Y;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(Y)}`);else if(xX(J,Y))$[J]=Y;else W[J]=Y}),{children:Z,eventProps:$,attributeProps:W}},yX=(Q,X)=>{let Z=()=>{let $=IQ.getNewId(),W=x.currentIs("mount")?document.querySelector(`[data-elem-id="${$}"]`):document.createElement(Q);W.elementId=$,W.unmountListener=void 0;let J=UQ(X)?{children:X}:X;if(!x.currentIs("run"))J["data-elem-id"]=W.elementId.toString();let Y=IX(J,W.tagName);if(LX(W,Y.eventProps),SX(W,Y.attributeProps),VX(W,Y.children),!x.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Z.isElementGetter=!0,Z},jQ=(Q,X,Z)=>{let $=S(X),W=S(Q),J=Z(G(()=>W.value),G(()=>$.value)),Y,U,B=!1;if(J?.isElementGetter)Y=()=>{if(B&&U)return U;return U=J(),B=!0,U},Y.isElementGetter=!0;else if(!J||typeof J==="string")Y=J||"";else throw`One of the child, ${J} passed in ForElement is invalid.`;return{indexSignal:$,itemSignal:W,mappedChild:Y}},DQ=(Q,X,Z)=>{if(X!==void 0&&X>=0&&Z){let $=X>Q.length?Q.length:X;Q.splice($,0,Z)}return Q},gX=({subject:Q,itemKey:X,map:Z,n:$,nthChild:W})=>{if(W&&$===void 0||$!==void 0&&$>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let J=G(()=>{let D=q(Q);return Array.isArray(D)?D:[]});if(!X)return G(()=>DQ(J.value.map(Z),$,W));let Y=W;if(W&&typeof W!=="string"){let D=W(),K=()=>D;K.isElementGetter=!0,Y=K}let U=J.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let B=null,F=G((D)=>{return B=D||B,J.value}),R=G((D)=>{if(!D||!B)return F.value.map((T,M)=>jQ(T,M,Z));return GX(B,F.value,X).map((E,T)=>{let M=(D||[])[E.oldIndex];if(console.assert(E.type==="add"&&E.oldIndex===-1&&!M||E.oldIndex>-1&&!!M,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),M){if(E.type==="shuffle")M.indexSignal.value=T;if(E.type==="update")M.indexSignal.value=T,M.itemSignal.value={...E.value};return M}return jQ(E.value,T,Z)})});return G(()=>DQ(R.value.map((D)=>D.mappedChild),$,Y))},CX=({subject:Q,isTruthy:X,isFalsy:Z})=>{let $=z.Span({style:"display: none;"}),W=()=>(q(Q)?X:Z)||$;return y(Q)?G(W):W()},bX=({subject:Q,caseMatcher:X,defaultCase:Z,cases:$})=>{let W=()=>{let J=q(Q),Y=void 0;for(let[U,B]of Object.entries($))if(X&&X(Q,U)||J===U){Y=B;break}return Y||Z||z.Span({style:"display: none;"})};return y(Q)?G(W):W()},hX=jX.reduce((Q,X)=>{let Z=X.split("").map((W,J)=>!J?W.toUpperCase():W).join(""),$=(W)=>yX(X,W);return Q[Z]=$,Q},{}),vX={For:gX,If:CX,Switch:bX},z={...hX,...vX},O=(Q)=>(X)=>{for(let $ of Object.keys(X))if(X[$]===void 0)delete X[$];let Z=Object.entries(X).reduce(($,W)=>{let[J,Y]=W,U=typeof Y==="string",B=Array.isArray(Y)&&Y.every((R)=>typeof R==="string"),F=y(Y)||typeof Y==="function"?Y:U||B?{type:"non-signal",get value(){return q(Y)}}:UQ(Y)?Y:{type:"non-signal",get value(){return q(Y)}};return $[J]=F,$},{});return Q(Z)},mQ=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],cX=[1,1,1,1,1,1,1],mX=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],WQ=["Not started","Completed"],pX=[70,60,45],fQ={id:"analytics",lastInteraction:new Date().getTime()},e={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},OQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var AQ=86400000,uX=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rX=["January","February","March","April","May","June","July","August","September","October","November","December"],dX=(Q,X)=>uX[Q].substring(0,X),sX=(Q,X)=>rX[Q].substring(0,X),GQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},QQ=(Q)=>GQ(Q).getTime(),pQ=(Q,X)=>QQ(Q)===QQ(X),oX=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),iX=(Q)=>{let X=new Date;return Array(Q).fill(0).map((Z,$)=>new Date(X.getFullYear(),X.getMonth()-$,1)).reverse()},nX=(Q,X)=>{let Z=QQ(Q),$=QQ(X);if(Z===$)return[GQ(new Date(Z))];let W=Z<$?Z:$,Y=((Z<$?$:Z)-W)/AQ;return Array(Y+1).fill(0).map((U,B)=>new Date(W+B*AQ))},lX=(Q)=>{if(Q<1)throw"";let X=new Date,Z=X.getFullYear(),$=X.getMonth(),W=new Date(Z,$-(Q-1),1),J=new Date(Z,$+1,0);return{startDate:W,endDate:J}},aX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},tX=(Q)=>location.href=Q,eX=()=>location.href=aX.HABITS.NEW.href,Q0=1.6181,X0=(Q)=>mX.find((X)=>X.code===Q),uQ=(Q,X)=>{return Q<0?X0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},$0=(Q)=>({level:uQ(-1,[]),date:Q}),Z0=(Q,X,Z)=>({level:uQ(Q,X),date:Z}),W0=(Q,X)=>Q.find((Z)=>pQ(Z.date,X)),rQ=(Q)=>{let X=GQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map((Z,$)=>({isMaxLevel:$===Q.levels.length-1,name:Z,code:$})),tracker:Q.tracker.map((Z,$)=>Z0(Z,Q.levels,oX(X,$))),milestones:z0(Q.milestones)}},J0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,Z)=>X.level.code),milestones:q0(Q.milestones)}},Y0=()=>{let X={id:new Date().getTime(),title:"",frequency:cX,colorIndex:0,levels:WQ,tracker:[],milestones:pX,pauses:[],isStopped:!1};return rQ(X)},z0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],q0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),dQ=(Q,X)=>{let Z=Q[0];for(let $=0;$<Q.length;$++)if(Z=Q[$],Z.percent<=X)break;return{label:Z.label,icon:Z.icon,color:Z.color}},U0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&S0(Q.title))return"A habit with same name already exists";if(Q.frequency.every(($)=>!$))return"Select at least one day in a week";if(!Q.levels.every(($)=>!!$.name))return"One of the levels is empty";if(Q.levels.some(($,W)=>{for(let J=W+1;J<Q.levels.length;J++)if(Q.levels[J].name===$.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every(($)=>$.percent<=100&&$.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every(($,W,J)=>W===0?!0:J[W-1].percent>$.percent))return"Milestones should be in order (from high to low)";return""},G0=(Q,X,Z)=>{let $=sQ(Q.tracker,X,Z),W=Q.levels.length-1,J=0,Y=0,U=0,B=0,F=0,R=0;return $.forEach((j,D)=>{if(J+=j.level.code>-1?1:0,Y+=j.level.code>0?1:0,U+=j.level.code>0?j.level.code:0,D===$.length-1)return;let E=j.level.code<1;R=E?R+1:0;let M=100*((j.level.code>0?j.level.code:0)/(Q.levels.length-1));B=Math.round(M)>50?B+1:0,F=E?0:F+1}),{title:Q.title,aceStreak:B,followStreak:F,missed:R,percent:Math.round(100*(U/(J*W))),totalDays:J,workingDays:Y}},B0=(Q,X,Z)=>{let $=!!Q.length;if(!$)return{hideAddButton:!1,hideRemoveButton:X.length<3};let W=X[Z],J=!!($&&Q.find((D)=>D.name===W.name)),Y=Q.length!==X.length,U=X.length<Q.length,B=X.length>Q.length,F=!Y&&Q.length&&Q.some((D,K)=>D.name!==X[K].name);return{hideAddButton:U||F||J&&U,hideRemoveButton:U||F||J&&B}},_0=(Q,X,Z)=>{let $=!!Q.length,W=X[Z],J=!!($&&Q.find((U)=>U.name===W.name)),Y=Q.length!==X.length;return J&&Y},R0=(Q,X,Z,$=!1)=>{let W=mQ[Z],J=Q/(X-1),U=Math.trunc(Math.pow(J,Q0)*255).toString(16),B=U.length===1?`0${U}`:U,F=Q<0||B==="0"?"transparent":`${W}${B}`,R=$?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:F,fontColor:R,peakBackgroundColor:W,levelPercent:Math.round(J*100)}},F0=(Q,X)=>{let Z=[];for(let $ of X)if(!Q.some((J)=>{if(pQ(J.date,$))return Z.push(J),!0;return!1}))Z.push($0($));return Z},sQ=(Q,X,Z)=>{let $=nX(X,Z);return F0(Q,$)},P0=(Q,X,Z)=>{if(!Q.length||Q.length===X.length)return Z;let $=[...Z],W=[];return Q.forEach((J,Y)=>{let U=X.find((j)=>j.name===J.name),B=!U,F=(j)=>{let D=[];Z.forEach((K,E)=>{if(K.level.code===J.code)D.push(E)}),W.push({indices:D,newLevel:j})};if(B){if(Y===Q.length-1)F(X[X.length-1]);return}if(U.code===J.code)return;F(U)}),W.forEach((J)=>{J.indices.forEach((Y)=>{$[Y]={...$[Y],level:J.newLevel}})}),$},EQ=(Q)=>{let X=Q.length-1;for(let Z=0;Z<Q.length;Z++)Q[Z]={...Q[Z],code:Z,isMaxLevel:Z===X};return Q},K0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],oQ="analytics",j0="id",D0="analytics",iQ=(Q)=>{localStorage.setItem(oQ,JSON.stringify(Q))},f0=()=>{if(!x.currentIs("run"))return fQ;let Q=()=>{let $=localStorage.getItem(oQ);return BQ($,j0,D0)};if(!Q())iQ(fQ);let Z=Q();if(!Z)throw"Error fetching analytics";return Z},O0=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},A0=(Q)=>Q.startsWith("h."),nQ=(Q)=>`h.${Q}`,E0=(Q)=>{if(!A0(Q))return;let X=localStorage.getItem(Q),Z=BQ(X,"title");if(!Z)return;return Z},k0=()=>{if(!x.currentIs("run"))return[];let Q=[];for(let X of O0()){let Z=E0(X);if(!Z)continue;Q.push(Z)}return Q},M0=(Q)=>{let X=nQ(Q.id);localStorage.setItem(X,JSON.stringify(Q))},w0=(Q)=>{let X=nQ(Q);localStorage.removeItem(X)},lQ="settings",T0="id",N0="local-settings",aQ=(Q)=>{localStorage.setItem(lQ,JSON.stringify(Q))},H0=()=>{if(!x.currentIs("run"))return e;let Q=()=>{let $=localStorage.getItem(lQ);return BQ($,T0,N0)};if(!Q())aQ(e);let Z=Q();if(!Z)throw"Error fetching settings";return x0(Z),Q()},x0=(Q)=>{if(!Q.editPage)aQ({...Q,editPage:e.editPage})},L0=(Q)=>{let X=f0();iQ({...X,lastInteraction:Q.getTime()})},S0=(Q)=>{let Z=k0().find(($)=>$.title.trim()===Q.trim());return Z?rQ(Z):void 0},tQ=(Q)=>{let X=J0(Q);M0(X)},V0=(Q)=>{let X={...Q,isStopped:!0};tQ(X)},I0=(Q)=>w0(Q),y0=()=>{return H0().editPage},g0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},BQ=(Q,X,Z)=>{let $=JSON.parse(Q||"{}"),W=$&&typeof $==="object",J=$[X];if(!W||!(Z?J===Z:!!J))return;return $},H=(Q)=>{return(...X)=>{return g0(),L0(new Date),Q&&Q(...X)}},C0=O(({cssClasses:Q,hideRemove:X,hideAdd:Z,onRemove:$,onAdd:W})=>{let J=k(X).and(Z).ternary("bn","ba"),Y=k(Z).ternary("","br");return z.Span({class:_`br3 pb1 f4 bw1 b--light-silver dark-gray ${J} ${Q}`,children:[z.If({subject:X,isFalsy:z.Span({class:_`pointer ph2 pb1 bw1 b--light-silver ${Y}`,onclick:H($),children:"-"})}),z.If({subject:Z,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:H(W),children:"+"})})]})}),I=O(({cssClasses:Q,onTap:X,children:Z})=>z.Button({class:_`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:H(()=>X()),children:Z})),e0=O(({cssClasses:Q})=>{return z.Div({class:_`bb b--light-gray ${Q}`})}),V=O(({cssClasses:Q,size:X,onClick:Z,iconName:$,title:W})=>{let J=Z?"pointer":"",Y=w(X).or(16);return z.Span({class:_`material-symbols-outlined ${J} ${Q}`,style:_`font-size: ${Y}px`,onclick:H(Z),children:$,title:W})}),kQ=O(({cssClasses:Q,href:X,target:Z,onClick:$,children:W})=>{let J=k(X).or($).ternary("pointer underline","");return z.A({...X?{href:X}:{},class:_`noselect ${J} ${Q}`,target:Z,onclick:H($),children:W})}),$Q=O(({cssClasses:Q,isOpen:X,content:Z,onTapOutside:$})=>{let W=(J)=>{setTimeout(()=>u(()=>{if(X.value)J.showModal();else J.close()}))};return z.Dialog({onmount:W,onclick:H($),class:_`pa0 br3 ${Q}`,children:[z.Div({onclick:(J)=>J.stopPropagation(),children:Z})]})}),b0=O(({cssClasses:Q,placeholder:X,num:Z,onchange:$})=>{let W=(J)=>{let Y=J.target.value,U=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));$(U)};return z.Input({class:Q,type:"number",placeholder:X,value:w(Z).string,onchange:W})}),h0=O(({progress:Q,cssClasses:X})=>{return z.Div({class:_`br-pill bg-moon-gray ${X}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:_`width: ${w(Q).toConfined(0,100)}%;`})})}),eQ=O(({cssClasses:Q,header:X,content:Z,bottombar:$})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:_`w6-ns ${Q}`,children:[z.If({subject:X,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),Z,z.Div({class:"pv6 mt5"}),z.If({subject:$,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:$})})]})})}),Q1=O(({cssClasses:Q,tabItemCssClasses:X,selectedTabCssClasses:Z,tabs:$,selectedTabIndex:W,onTabChange:J})=>{let Y=(U)=>U===W.value?`b--light-silver b black ${Z?.value}`:"pointer b--transparent b--hover-black silver pointer";return z.Div({class:_`bg-white br3 ${Q}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:$,map:(U,B)=>z.Span({class:_`
                w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${Y(B)} ${X}`,onclick:H(()=>J(B)),children:U})})})})}),MQ=O(({cssClasses:Q,placeholder:X,disabled:Z,text:$,onmount:W,onchange:J,onkeydown:Y,onfocus:U,onblur:B})=>{let F,R=(K)=>{if(F=K,W)W(K)},j=(K)=>{let E=K.target.value;if(J)J(E)},D=(K)=>{let E=K.key.length===1?F.value+K.key:K.key==="Backspace"?F.value.slice(0,-1):F.value,T={key:K.key,text:E};if(Y)Y(T)};return z.Input({onmount:R,class:_`${Q}`,type:"text",placeholder:X,disabled:k(Z).truthy,value:$,onchange:j,onkeydown:D,onfocus:U,onblur:B})}),X1=O(({cssClasses:Q,isOn:X,onToggle:Z})=>{let $=k(X).ternary("b--transparent","b--moon-gray bg-moon-gray"),W=k(X).ternary("b--mid-gray bg-mid-gray","b--transparent");return z.Div({class:_`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:H(Z),children:[z.Div({class:_`br-100 ba bw1 b--hover-black pa1 ${$}`}),z.Div({class:"pa05"}),z.Div({class:_`br-100 ba bw1 b--hover-black pa1 ${W}`})]})}),v0=O(({cssClasses:Q,justifyCssClasses:X,label:Z})=>{let $=w(X).or("justify-end"),W=w(Z).or("Add habit");return z.Div({class:_`w-100 flex ${$} ${Q}`,children:I({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[V({cssClasses:"nl1 mr1",size:22,iconName:"add"}),W],onTap:eX})})}),_Q=O(({cssClasses:Q,dotCssClasses:X,colorIndex:Z,level:$,totalLevels:W,showText:J,textContent:Y,icon:U,iconSize:B,isRectangular:F,showHeight:R,onClick:j})=>{let D=k(F).ternary("br0","br-100"),K=k($).isLT(0).ternary("bg-transparent","bg-light-gray"),{peakBackgroundColor:E,backgroundColor:T,fontColor:M,levelPercent:g}=w(b(R0,$,W,Z,J)).props,d=w(Y).or("·"),L=k(R).and(U).andThisIsGT(g,99).truthy,p=()=>{if(j&&$.value>=0)j()};return z.Span({class:_`pointer relative overflow-hidden ${D} ${K} ${Q}`,onclick:H(p),children:z.If({subject:R,isTruthy:z.Span({class:_`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:_`
            background-color: ${E};
            color: white;
            height: ${g}%;`,children:z.If({subject:L,isTruthy:V({iconName:U,size:B})})}),isFalsy:z.Span({class:_`flex items-center justify-around absolute absolute--fill ${X}`,style:_`
            background-color: ${T};
            color: ${M};`,children:z.If({subject:U,isTruthy:V({iconName:U,size:B}),isFalsy:z.Span(d)})})})})}),c0=O(({cssClasses:Q})=>{return I({cssClasses:_`pa3 flex items-center ${Q}`,children:[V({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),$1=O(({cssClasses:Q,milestones:X,achievedMilestone:Z,completionPercent:$})=>{let W=w(Z).prop("color"),J=b((Y)=>Y>53?"Average completion":Y>43?"Avg completion":Y>35?"Completion":"",$);return z.Div({class:_`center ${Q}`,children:[z.Div({class:"pb2 w-100 relative",children:z.For({subject:X,map:(Y,U)=>{return m0({colorCss:`bg-${Y.color}`,percent:Y.upperLimit,hideUpperLimit:U===0})}})}),z.Div({class:_`nt3dot6 h1dot2 bw1 relative br b--${W}`,style:_`width: ${$}%;`,children:z.Div({class:_`relative flex items-start nt1 justify-between f7 mid-gray`,children:[z.Div(J),z.Div({class:_`absolute right-0 pr1 b f6 ${W}`,children:_`${$}%`})]})})]})}),m0=O(({colorCss:Q,hideUpperLimit:X,percent:Z})=>{let $=k(X).ternary("",_`${Z}%`),W=_`width: ${Z}%;`;return z.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:W,children:[z.Div({class:_`absolute absolute-fill h0dot15 w-100 ${Q}`}),z.Div({class:"flex justify-end w-100 pt2 f7",children:z.Div({class:"nr3 pb2 light-silver b",children:$})})]})}),p0=O(({cssClasses:Q,habit:X,date:Z,colorIndex:$,totalLevels:W})=>{let J=G(()=>{let Y=Z.value.getFullYear(),U=Z.value.getMonth(),B=new Date(Y,U,1),F=new Date(Y,U+1,0);return sQ(X.value.tracker,B,F)});return z.Div({class:_`flex items-center ${Q}`,children:[z.Div({class:"f8 b w2 light-silver",children:G(()=>sX(Z.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:J,map:(Y)=>_Q({cssClasses:"pa1",colorIndex:$,level:Y.level.code,totalLevels:W})})})]})}),Z1=O(({cssClasses:Q,habit:X,months:Z,onClick:$})=>{let{milestones:W,title:J,colorIndex:Y,levels:U}=w(X).props,B=b((K,E)=>{let{startDate:T,endDate:M}=lX(K);return G0(E,T,M).percent},Z,X),F=b(dQ,W,B),{icon:R,color:j}=w(F).props,D=b(iX,Z);return z.Div({class:_`pointer bg-white ${Q}`,onclick:H($),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:J}),z.Div({class:"f6 silver b flex items-center",children:[V({cssClasses:_`mr1 ${j}`,iconName:R}),_`${B}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:D,map:(K)=>p0({cssClasses:"mb1",habit:X,date:K,colorIndex:Y,totalLevels:U.value.length})})})]})}),u0=O(({cssClasses:Q,editableHabit:X,editedHabit:Z,hideDescriptions:$,showFullCustomisations:W,onChange:J})=>{let Y=S(!1),U=w(W).or(Y),{title:B,frequency:F,levels:R,milestones:j,colorIndex:D}=w(Z).props,K=w(F).every((A)=>!!A),E="bg-mid-gray white",T="bg-near-white light-silver",M=k(K).ternary("bg-mid-gray white","bg-near-white light-silver"),g=k(Y).ternary("remove","add"),d=_`Show ${k(Y).ternary("Less","More")} Customisations`,L=(A)=>{J({...Z.value,title:A})},p=(A)=>{J({...Z.value,colorIndex:A})},s=(A)=>{if(A<-1||A>6)throw"Invalid day index";if(A===-1){J({...Z.value,frequency:[1,1,1,1,1,1,1]});return}let P=K.value?F.value.map((N)=>0):F.value;P[A]=K.value?1:P[A]?0:1,J({...Z.value,frequency:P})},QX=(A,P)=>{let N=R.value;N[P]={...N[P],name:A},J({...Z.value,levels:N})},XX=(A)=>{let P=R.value;P.splice(A,0,{isMaxLevel:!1,name:"",code:A}),J({...Z.value,levels:EQ(P)})},$X=(A)=>{let P=R.value;if(P.length<3)return;P.splice(A,1),J({...Z.value,levels:EQ(P)})},ZX=(A,P)=>{if(P<0||P>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let N=[...Z.value.milestones];N[P]={...N[P],percent:A},J({...Z.value,milestones:N})};return z.Div({class:Q,children:[h({cssClasses:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:_`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${M}`,children:"Daily",onclick:H(()=>s(-1))}),map:(A,P)=>{let N=G(()=>F.value[P]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:_`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${N}`,children:dX(P,1),onclick:H(()=>s(P))})}})})}),h({cssClasses:"pb2",title:"Title of the habit",children:MQ({cssClasses:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:B,onchange:L})}),z.If({subject:U,isTruthy:z.Div([h({cssClasses:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:mQ,map:(A,P)=>{let N=k(D).equals(P).ternary("#999","#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:_`border-color: ${N}`,onclick:H(()=>p(P)),children:z.Span({class:_`pa2 br-100`,style:`background-color: ${A}`})})}})})}),h({cssClasses:"pb3",title:"Status update levels",hideDescription:$,description:`
                  When updating a habit status in a day, we generally have only two levels - "${WQ[0]}"
                  or "${WQ[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.`,children:z.For({subject:R,map:(A,P)=>{let N=X?.value?.levels||[],RQ=R.value,{hideAddButton:WX,hideRemoveButton:JX}=B0(N,RQ,P),YX=_0(N,RQ,P);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[_Q({cssClasses:"w1 h2 br3 br--left ml1px",dotCssClasses:"br3 br--left",colorIndex:D,level:P,isRectangular:!0,totalLevels:R.value.length}),MQ({cssClasses:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${P}`,disabled:YX,text:A.name,onchange:(zX)=>QX(zX,P)})]}),C0({hideAdd:WX,hideRemove:JX,onAdd:()=>XX(P+1),onRemove:()=>$X(P)})]}),z.If({subject:k(R).lengthGT(P+1).truthy,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),h({title:"Habit completion goal",hideDescription:$,description:_`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>dQ(Z.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.`,children:z.For({subject:j,n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(A,P)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[V({cssClasses:`mr2 ${A.color}`,size:20,iconName:A.icon}),A.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:P===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:b0({cssClasses:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:A.percent,onchange:(N)=>ZX(N,P)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:W,isFalsy:I({cssClasses:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[V({cssClasses:"mr1",iconName:g}),d]})})]})}),r0=O(({editableHabit:Q,onMount:X})=>{let Z=S(e.editPage),$=S(!1),W=S(!1),J=S(""),Y=S(Y0()),U=b((L)=>L?`Edit '${L.title}'`:"Add new habit",Q),B=k(U).lengthGT(22).ternary("f2dot66",""),F=k(Q).ternary("Update","Add"),R=()=>$.value=!0,j=()=>$.value=!1,D=()=>{j(),history.go(-2)},K=()=>W.value=!0,E=()=>W.value=!1,T=()=>{V0(Y.value),E(),history.back()},M=(L)=>Y.value=L,g=()=>{if(J.value=U0(Y.value,!Q?.value),J.value)return;let L=Y.value,p=[...Q?.value?.levels||[]],s=P0(p,L.levels,L.tracker);tQ({...Y.value,tracker:s}),history.back()};return n0({onMount:()=>{if(X)X(),Y.value=Q?.value;Z.value=y0()},body:eQ({cssClasses:"bg-white ph3",header:z.Div({class:B,children:U}),content:z.Div([z.If({subject:Q,isTruthy:z.Div([h({cssClasses:"pb2",title:"Actions",children:[d0({isOpen:$,habit:Y,onClose:j,onDone:D}),kQ({cssClasses:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:R}),s0({isOpen:W,habit:Y,onClose:E,onDone:T}),kQ({cssClasses:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:K})]})])}),u0({editableHabit:Q,editedHabit:Y,hideDescriptions:G(()=>!Z.value.showHints),showFullCustomisations:w(Z).prop("showFullCustomisation"),onChange:M})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:J,isTruthy:z.Div({class:"red mb3",children:J})}),z.Div({class:"flex items-center justify-stretch",children:[c0({cssClasses:"w4dot50 w4dot25-ns"}),I({cssClasses:"w-100 pa3 ml3 b",children:F,onTap:g})]})]})})})}),W1=O(({cssClasses:Q})=>{return z.Div({class:_`flex flex-column items-center justify-around ${Q}`,children:[z.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),z.Div("Looks like, you just landed here!"),v0({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),d0=O(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{let W=()=>{I0(X.value.id),$()};return $Q({cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:_`Delete '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[I({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Z}),I({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:W})]})]})})}),J1=O(({isOpen:Q,habit:X,date:Z,showTitleInHeader:$,onClose:W,onChange:J})=>{let{title:Y,levels:U,tracker:B,colorIndex:F}=w(X).props,R=G(()=>$?.value?`Change status of  '${Y.value}'`:`Change status for ${Z.value.toDateString()}`);return $Q({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:W,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:R}),z.Div({class:"f5 mb1",children:z.For({subject:w(U).reversed,map:(j,D)=>{let K=U.value.length-1-D,E=_`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>W0(B.value,Z.value)?.level.code===K?"bg-near-white black fw6":"gray fw5"}`,T=K<1?"b--light-silver":"b--transparent";return z.Div({class:E,onclick:H(()=>J(K)),children:[_Q({cssClasses:`pa1 mr3 ba b ${T}`,colorIndex:F,level:K,totalLevels:U.value.length,isRectangular:!0}),z.Span(j.name)]})}})})]})})}),s0=O(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{return $Q({cssClasses:"bn",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:_`Stop '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",z.Br({}),z.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),z.Div({class:"flex items-center justify-between f6",children:[I({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:Z}),I({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:$})]})]})})}),o0=O(({cssClasses:Q,links:X})=>{return z.Div({class:_`flex items-center justify-between pv3 bg-near-white ${Q}`,children:z.For({subject:X,map:(Z)=>i0({label:Z.label,icon:Z.icon,isSelected:Z.isSelected,href:Z.href})})})}),i0=O(({cssClasses:Q,label:X,icon:Z,isSelected:$,href:W})=>{let J=k($).ternary("app-theme-color b","black");return z.Div({class:_`pointer noselect flex flex-column items-center justify-center pb2 ${J} ${Q}`,onclick:H(()=>tX(W.value)),children:[V({size:22,iconName:Z}),z.Div({class:"f7",children:X})]})}),Y1=O(({cssClasses:Q,header:X,content:Z,navbarTop:$,route:W})=>{return eQ({cssClasses:Q,header:X,content:Z,bottombar:z.Div({children:[z.If({subject:$,isTruthy:$}),o0({cssClasses:"nl3 nr3 ph4",links:b(K0,W)})]})})}),n0=O(({cssClasses:Q,body:X,onMount:Z})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:Q,onmount:Z,children:[z.Script({src:"main.js",defer:"true"}),X]})]})}),h=O(({cssClasses:Q,contentCssClasses:X,title:Z,description:$,hideDescription:W,children:J})=>{let Y=k($).andNot(W).truthy;return z.Div({class:_`mt3 mb4 ${Q}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Z}),z.If({subject:Y,isTruthy:z.Div({class:"mb3 f6 silver fw5",children:$})}),z.Div({class:X,children:J})]})}),z1=O(({cssClasses:Q,iconSize:X,selectedOptionIndex:Z,onChange:$})=>{let W=S(!1),J=G(()=>OQ[Z.value]),Y=()=>W.value=!0,U=()=>W.value=!1,B=(R)=>R===J.value.label?"bg-near-white black fw6":"gray fw5",F=(R)=>{$(R),U()};return z.Div({class:Q,children:[wQ({cssClasses:"pointer",descending:w(J).prop("decending"),iconName:w(J).prop("icon"),size:w(X).or(20),onClick:Y}),$Q({cssClasses:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:U,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:OQ,map:(R,j)=>z.Div({class:_`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>B(R.label)}`,onclick:H(()=>F(j)),children:[wQ({cssClasses:"ml1 mr2",descending:R.decending,iconName:R.icon,size:20}),z.Span(R.label)]})})})]})})]})}),wQ=O(({cssClasses:Q,descending:X,iconName:Z,size:$,onClick:W})=>{let J=W?"pointer":"",Y=k(X).ternary("arrow_upward","arrow_downward"),U=k($).mul(4).div(5).result;return z.Span({class:_`flex items-center ${J} ${Q}`,onclick:H(W),children:[V({cssClasses:"silver",iconName:Y,size:U}),V({size:$,iconName:Z})]})}),q1=O(({cssClasses:Q,progress:X})=>{return z.Div({class:_`flex flex-column justify-center items-center vh-100 ${Q}`,children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),h0({cssClasses:"w-40",progress:X}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),l0=r0({}),a0=()=>{x.start("mount"),IQ.resetIdCounter(),l0(),x.start("run")};a0();
