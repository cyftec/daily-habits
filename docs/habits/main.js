var a=(Q)=>{let X=Object.entries(Q).sort(($,J)=>$[0].localeCompare(J[0]));return X.forEach(([$,J],Z)=>{if(J&&typeof J==="object"&&!Array.isArray(J))X[Z]=[$,a(J)]}),Object.fromEntries(X)},JQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},r=(Q)=>{if(Array.isArray(Q)){let X=[...Q],$=[];return X.forEach((J)=>{$.push(r(J))}),$}if(JQ(Q)){let X={...Q},$={};return Object.keys(X).forEach((J)=>{$[J]=r(X[J])}),Object.freeze($)}return Q},b=(Q)=>{if(Array.isArray(Q)){let $=[...Q],J=[];return $.forEach((Z)=>{J.push(b(Z))}),J}if(JQ(Q)){let $={...Q},J={};return Object.keys($).forEach((Z)=>{J[Z]=b($[Z])}),J}return Q},fQ=(Q,X="index")=>Q.map(($,J)=>({[X]:J,value:$})),DX=(Q,X)=>{let $=a(Q),J=a(X),Z=Object.keys($),Y=Object.keys(J);if(Z.length!==Y.length)return!1;for(let z of Z)if(!Y.includes(z)||!ZQ($[z],J[z]))return!1;return!0},MX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let $=0;$<Q.length;$++)if(!ZQ(Q[$],X[$]))return!1;return!0},ZQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return MX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return DX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},wX=(Q,X,$)=>{let Z=fQ(b(Q),"index");return fQ(b(X),"index").map((z)=>{let U="add",R=-1,B=z.value;return Z.some((_,j)=>{if(U=ZQ(_.value,z.value)?_.index===z.index?"idle":"shuffle":$&&_.value[$]!==void 0&&_.value[$]===z.value[$]?"update":"add",U!=="add")return R=_.index,Z.splice(j,1),!0;return!1}),{type:U,oldIndex:R,value:B}})},x=(Q)=>["source-signal","derived-signal"].includes(Q?.type),CQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some(($)=>typeof Q?.value===$)),WQ=(Q)=>x(Q)||CQ(Q),yQ=(Q)=>CQ(Q,["string"]),gQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),h=(Q)=>WQ(Q)?Q.value:Q,s=null,A=(Q)=>{let X=r(Q),$=new Set;return{type:"source-signal",get value(){if(s)$.add(s);return b(X)},set value(J){if(J===X)return;X=r(J),$.forEach((Z)=>Z&&Z())}}},v=(Q)=>{s=Q,Q(),s=null},q=(Q)=>{let X,$=A(X);return v(()=>{X=Q(X),$.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return $.value}}},H=(Q)=>{if(!JQ(Q.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:(X)=>q(()=>Q.value[X]),get props(){return Object.keys(Q.value).reduce(($,J)=>{let Z=J;return $[Z]=this.prop(Z),$},{})}}},G=(Q,...X)=>q(()=>{return Q.reduce(($,J,Z)=>{let Y,z=X[Z];if(typeof z==="function")Y=z()??"";else if(WQ(z))Y=z.value??"";else Y=z??"";return`${$}${J}${Y.toString()}`},"")}),bQ=["onmount","onunmount"],hQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],OX=[...hQ,...bQ],VX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],p,EX=(Q)=>{if(!p)p=document.createElement("textarea");return p.innerHTML=Q,p.value},AX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},vQ=AX(),k={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},o=(Q)=>Array.isArray(Q),d=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,C=(Q)=>typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,YQ=(Q)=>x(Q)&&C(Q.value),kX=(Q)=>C(Q)||YQ(Q),cQ=(Q)=>{return x(Q)&&(C(Q.value)||o(Q.value)&&Q.value.every((X)=>C(X)))},uQ=(Q)=>{return!x(Q)&&(yQ(Q)||gQ(Q)||C(Q)||o(Q)&&Q.every((X)=>kX(X)))},zQ=(Q)=>{return cQ(Q)||uQ(Q)},DQ=!1,TX={},I={},HX=globalThis.MutationObserver,SX=new HX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach(($)=>{if(d($)){let J=$,Z=J.elementId;if(I[Z])delete I[Z];else TX[Z]=J.tagName}}),X.removedNodes.forEach(($)=>{if(d($)){let J=$,Z=J.elementId,Y=J.unmountListener;if(Y)I[Z]={element:J,unmountListener:Y}}})}),Object.entries(I).forEach(([X,$])=>{let{element:J,unmountListener:Z}=$;pQ(J,Z)})}),pQ=(Q,X)=>{if(!d(Q))return;let $=Q.children;for(let J=0;J<$.length;J++){let Z=$[J];pQ(Z,Z.unmountListener)}if(X&&X(Q),I[Q.elementId])delete I[Q.elementId]},LX=()=>{if(!DQ&&!k.currentIs("build"))SX.observe(document.body,{childList:!0,subtree:!0}),DQ=!0},mQ=(Q,X)=>OX.includes(Q)&&X===void 0,rQ=(Q,X)=>hQ.includes(Q)&&typeof X==="function",sQ=(Q,X)=>bQ.includes(Q)&&typeof X==="function",xX=(Q,X)=>mQ(Q,X)||rQ(Q,X)||sQ(Q,X),NX=(Q,X)=>{Object.entries(X).forEach(([$,J])=>{if(mQ($,J));else if(rQ($,J)){let Z=$.slice(2);Q.addEventListener(Z,(Y)=>{if(Z==="keypress")Y.preventDefault();J(Y)})}else if(sQ($,J)){if($==="onmount"&&!k.currentIs("build")){let Z=J;setTimeout(()=>Z(Q),0)}if($==="onunmount")LX(),Q.unmountListener=J}else console.error(`Invalid event key: ${$} for element with tagName: ${Q.tagName}`)})},MQ=(Q,X,$)=>{let J=(WQ($)?$.value:$)??"";if(typeof J==="boolean")if(J)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=J;else if(J)Q.setAttribute(X,J)},IX=(Q,X)=>{let $={};Object.entries(X).forEach((J)=>{let[Z,Y]=J;if(x(Y))$[Z]=Y;MQ(Q,Z,Y)}),v(()=>{Object.entries($).forEach((J)=>{let[Z,Y]=J,z=Y.value;if(!k.currentIs("run"))return;MQ(Q,Z,z)})})},m=(Q)=>{if(YQ(Q)){let X=Q.value;return m(X)}if(typeof Q==="string")return document.createTextNode(EX(Q));if(C(Q)){let X=Q();if(!d(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},CX=(Q,X)=>{if(!X)return;if(cQ(X))v(()=>{let J=X.value,Z=o(J)?J:[J];Z.forEach((z,U)=>{let R=Q.childNodes[U],B=m(z);if(R&&B)Q.replaceChild(B,R);else if(B)Q.appendChild(B);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let Y=Z.length;while(Y<Q.childNodes.length){let z=Q.childNodes[Y];if(z)Q.removeChild(z)}});if(uQ(X)){let $=yQ(X)?[X.value]:gQ(X)?X.value:o(X)?X:[X],J=[];if($.forEach((Z,Y)=>{if(YQ(Z))J.push({index:Y,childSignal:Z});let z=m(Z),U=Q.childNodes[Y];if(U&&z)Q.replaceChild(z,U);else if(!U&&z)Q.appendChild(z);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),J.length)J.forEach(({index:Z,childSignal:Y})=>{v(()=>{if(!Y.value)return;if(!k.currentIs("run"))return;let z=m(Y.value),U=Q.childNodes[Z];if(U&&z)Q.replaceChild(z,U);else if(!U&&z)Q.appendChild(z);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},yX=(Q,X)=>{let $=void 0,J={},Z={};return Object.entries(Q).forEach(([Y,z])=>{if(Y==="children")if(zQ(z))$=z;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(z)}`);else if(xX(Y,z))J[Y]=z;else Z[Y]=z}),{children:$,eventProps:J,attributeProps:Z}},gX=(Q,X)=>{let $=()=>{let J=vQ.getNewId(),Z=k.currentIs("mount")?document.querySelector(`[data-elem-id="${J}"]`):document.createElement(Q);Z.elementId=J,Z.unmountListener=void 0;let Y=zQ(X)?{children:X}:X;if(!k.currentIs("run"))Y["data-elem-id"]=Z.elementId.toString();let z=yX(Y,Z.tagName);if(NX(Z,z.eventProps),IX(Z,z.attributeProps),CX(Z,z.children),!k.currentIs("build"))Z.removeAttribute("data-elem-id");return Z};return $.isElementGetter=!0,$},wQ=(Q,X,$)=>{let J=A(X),Z=A(Q),Y=$(q(()=>Z.value),q(()=>J.value)),z,U,R=!1;if(Y?.isElementGetter)z=()=>{if(R&&U)return U;return U=Y(),R=!0,U},z.isElementGetter=!0;else if(typeof Y==="string")z=Y;else throw`One of the child, ${Y} passed in ForElement is invalid.`;return{indexSignal:J,itemSignal:Z,mappedChild:z}},OQ=(Q,X,$)=>{if(X!==void 0&&X>=0&&$){let J=X>Q.length?Q.length:X;Q.splice(J,0,$)}return Q},bX=({subject:Q,itemKey:X,map:$,n:J,nthChild:Z})=>{if(Z&&J===void 0||J!==void 0&&J>-1&&!Z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let Y=q(()=>{let P=h(Q);return Array.isArray(P)?P:[]});if(!X)return q(()=>OQ(Y.value.map($),J,Z));let z=Z;if(Z&&typeof Z!=="string"){let P=Z(),K=()=>P;K.isElementGetter=!0,z=K}let U=Y.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null,B=q((P)=>{return R=P||R,Y.value}),_=q((P)=>{if(!P||!R)return B.value.map((V,E)=>wQ(V,E,$));return wX(R,B.value,X).map((M,V)=>{let E=(P||[])[M.oldIndex];if(console.assert(M.type==="add"&&M.oldIndex===-1&&!E||M.oldIndex>-1&&!!E,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),E){if(M.type==="shuffle")E.indexSignal.value=V;if(M.type==="update")E.indexSignal.value=V,E.itemSignal.value={...M.value};return E}return wQ(M.value,V,$)})});return q(()=>OQ(_.value.map((P)=>P.mappedChild),J,z))},hX=({subject:Q,isTruthy:X,isFalsy:$})=>{let J=W.Span({style:"display: none;"}),Z=()=>(h(Q)?X:$)||J;return x(Q)?q(Z):Z()},vX=({subject:Q,caseMatcher:X,defaultCase:$,cases:J})=>{let Z=()=>{let Y=h(Q),z=void 0;for(let[U,R]of Object.entries(J))if(X&&X(Q,U)||Y===U){z=R;break}return z||$||W.Span({style:"display: none;"})};return x(Q)?q(Z):Z()},cX=VX.reduce((Q,X)=>{let $=X.split("").map((Z,Y)=>!Y?Z.toUpperCase():Z).join(""),J=(Z)=>gX(X,Z);return Q[$]=J,Q},{}),uX={For:bX,If:hX,Switch:vX},W={...cX,...uX},D=(Q)=>(X)=>{for(let J of Object.keys(X))if(X[J]===void 0)delete X[J];let $=Object.entries(X).reduce((J,Z)=>{let[Y,z]=Z,U=typeof z==="string",R=Array.isArray(z)&&z.every((_)=>typeof _==="string"),B=x(z)||typeof z==="function"?z:U||R?{type:"non-signal",get value(){return h(z)}}:zQ(z)?z:{type:"non-signal",get value(){return h(z)}};return J[Y]=B,J},{});return Q($)},oQ=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],pX=[1,1,1,1,1,1,1],mX=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],t=["Not started","Completed"],rX=[70,60,45],VQ={id:"analytics",lastInteraction:new Date().getTime()},c={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},dQ=[{label:"This month",months:1},{label:"2 months",months:2},{label:"5 months",months:5}],e=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var QQ=86400000,sX=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],oX=["January","February","March","April","May","June","July","August","September","October","November","December"],dX=(Q,X)=>sX[Q].substring(0,X),nX=(Q,X)=>oX[Q].substring(0,X),UQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},y=(Q)=>UQ(Q).getTime(),BQ=(Q,X)=>y(Q)===y(X),iX=(Q,X)=>{let $=y(Q),J=y(X);return Math.round((J-$)/QQ)},lX=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),aX=(Q)=>{let X=new Date;return Array(Q).fill(0).map(($,J)=>new Date(X.getFullYear(),X.getMonth()-J,1)).reverse()},tX=(Q,X)=>{let $=y(Q),J=y(X);if($===J)return[UQ(new Date($))];let Z=$<J?$:J,z=(($<J?J:$)-Z)/QQ;return Array(z+1).fill(0).map((U,R)=>new Date(Z+R*QQ))},nQ=(Q)=>{if(Q<1)throw"";let X=new Date,$=X.getFullYear(),J=X.getMonth(),Z=new Date($,J-(Q-1),1),Y=new Date($,J+1,0);return{startDate:Z,endDate:Y}},iQ={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},eX=(Q)=>location.href=Q,Q0=()=>location.href=iQ.HABITS.NEW.href,EQ=(Q)=>location.href=`${iQ.HABITS.HABIT.href}?id=${Q}`,X0=1.6181,$0=(Q)=>mX.find((X)=>X.code===Q),lQ=(Q,X)=>{return Q<0?$0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},J0=(Q)=>({level:lQ(-1,[]),date:Q}),Z0=(Q,X,$)=>({level:lQ(Q,X),date:$}),W0=(Q,X)=>Q.find(($)=>BQ($.date,X)),qQ=(Q)=>{let X=UQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map(($,J)=>({isMaxLevel:J===Q.levels.length-1,name:$,code:J})),tracker:Q.tracker.map(($,J)=>Z0($,Q.levels,lX(X,J))),milestones:U0(Q.milestones)}},Y0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,$)=>X.level.code),milestones:B0(Q.milestones)}},z0=()=>{let X={id:new Date().getTime(),title:"",frequency:pX,colorIndex:0,levels:t,tracker:[],milestones:rX,pauses:[],isStopped:!1};return qQ(X)},U0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],B0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),aQ=(Q,X)=>{let $=Q[0];for(let J=0;J<Q.length;J++)if($=Q[J],$.percent<=X)break;return{label:$.label,icon:$.icon,color:$.color}},q0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&H0(Q.title))return"A habit with same name already exists";if(Q.frequency.every((J)=>!J))return"Select at least one day in a week";if(!Q.levels.every((J)=>!!J.name))return"One of the levels is empty";if(Q.levels.some((J,Z)=>{for(let Y=Z+1;Y<Q.levels.length;Y++)if(Q.levels[Y].name===J.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every((J)=>J.percent<=100&&J.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every((J,Z,Y)=>Z===0?!0:Y[Z-1].percent>J.percent))return"Milestones should be in order (from high to low)";return""},tQ=(Q,X,$)=>{let J=eQ(Q.tracker,X,$),Z=Q.levels.length-1,Y=0,z=0,U=0,R=0,B=0,_=0;return J.forEach((j,P)=>{if(Y+=j.level.code>-1?1:0,z+=j.level.code>0?1:0,U+=j.level.code>0?j.level.code:0,P===J.length-1)return;let M=j.level.code<1;_=M?_+1:0;let E=100*((j.level.code>0?j.level.code:0)/(Q.levels.length-1));R=Math.round(E)>50?R+1:0,B=M?0:B+1}),{title:Q.title,aceStreak:R,followStreak:B,missed:_,percent:Math.round(100*(U/(Y*Z))),totalDays:Y,workingDays:z}},G0=(Q,X,$)=>{let J=!!Q.length;if(!J)return{hideAddButton:!1,hideRemoveButton:X.length<3};let Z=X[$],Y=!!(J&&Q.find((P)=>P.name===Z.name)),z=Q.length!==X.length,U=X.length<Q.length,R=X.length>Q.length,B=!z&&Q.length&&Q.some((P,K)=>P.name!==X[K].name);return{hideAddButton:U||B||Y&&U,hideRemoveButton:U||B||Y&&R}},R0=(Q,X,$)=>{let J=!!Q.length,Z=X[$],Y=!!(J&&Q.find((U)=>U.name===Z.name)),z=Q.length!==X.length;return Y&&z},_0=(Q,X,$,J=!1)=>{let Z=oQ[$],Y=Q/(X-1),U=Math.trunc(Math.pow(Y,X0)*255).toString(16),R=U.length===1?`0${U}`:U,B=Q<0||R==="0"?"transparent":`${Z}${R}`,_=J?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:B,fontColor:_,peakBackgroundColor:Z,levelPercent:Math.round(Y*100)}},F0=(Q,X)=>{let $=[];for(let J of X)if(!Q.some((Y)=>{if(BQ(Y.date,J))return $.push(Y),!0;return!1}))$.push(J0(J));return $},eQ=(Q,X,$)=>{let J=tX(X,$);return F0(Q,J)},j0=(Q,X,$)=>{if(!Q.length||Q.length===X.length)return $;let J=[...$],Z=[];return Q.forEach((Y,z)=>{let U=X.find((j)=>j.name===Y.name),R=!U,B=(j)=>{let P=[];$.forEach((K,M)=>{if(K.level.code===Y.code)P.push(M)}),Z.push({indices:P,newLevel:j})};if(R){if(z===Q.length-1)B(X[X.length-1]);return}if(U.code===Y.code)return;B(U)}),Z.forEach((Y)=>{Y.indices.forEach((z)=>{J[z]={...J[z],level:Y.newLevel}})}),J},AQ=(Q)=>{let X=Q.length-1;for(let $=0;$<Q.length;$++)Q[$]={...Q[$],code:$,isMaxLevel:$===X};return Q},P0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},GQ=(Q,X,$)=>{let J=JSON.parse(Q||"{}"),Z=J&&typeof J==="object",Y=J[X];if(!Z||!($?Y===$:!!Y))return;return J},O=(Q)=>{return(...X)=>{return P0(),k0(new Date),Q&&Q(...X)}},QX="analytics",K0="id",f0="analytics",XX=(Q)=>{localStorage.setItem(QX,JSON.stringify(Q))},D0=()=>{if(!k.currentIs("run"))return VQ;let Q=()=>{let J=localStorage.getItem(QX);return GQ(J,K0,f0)};if(!Q())XX(VQ);let $=Q();if(!$)throw"Error fetching analytics";return $},$X=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},JX=(Q)=>Q.startsWith("h."),ZX=(Q)=>`h.${Q}`,M0=(Q)=>{if(!JX(Q))return;let X=localStorage.getItem(Q),$=GQ(X,"title");if(!$)return;return $},w0=()=>{for(let Q of $X())if(JX(Q))return!1;return!0},RQ=()=>{if(!k.currentIs("run"))return[];let Q=[];for(let X of $X()){let $=M0(X);if(!$)continue;Q.push($)}return Q},WX=(Q)=>{let X=ZX(Q.id);localStorage.setItem(X,JSON.stringify(Q))},O0=(Q)=>{let X=ZX(Q);localStorage.removeItem(X)},YX="settings",V0="id",E0="local-settings",_Q=(Q)=>{localStorage.setItem(YX,JSON.stringify(Q))},FQ=()=>{if(!k.currentIs("run"))return c;let Q=()=>{let J=localStorage.getItem(YX);return GQ(J,V0,E0)};if(!Q())_Q(c);let $=Q();if(!$)throw"Error fetching settings";return A0($),Q()},A0=(Q)=>{if(!Q.editPage)_Q({...Q,editPage:c.editPage})},k0=(Q)=>{let X=D0();XX({...X,lastInteraction:Q.getTime()})},T0=()=>{return RQ().map((X)=>qQ(X))},H0=(Q)=>{let $=RQ().find((J)=>J.title.trim()===Q.trim());return $?qQ($):void 0},S0=()=>{let Q=RQ();for(let X of Q){let $=new Date(X.id),J=new Date,Z=iX($,J),Y=[...X.tracker];if(Z+2<=Y.length)continue;let z=Y.length-1,U=new Date($.getFullYear(),$.getMonth(),$.getDate()+z),R=U.getDay();if(BQ(J,U)){let B=Y[z];Y[z]=X.frequency[R]?B<0?0:B:-1}for(let B=Y.length;B<=Z;B++){let j=new Date($.getFullYear(),$.getMonth(),$.getDate()+B).getDay();Y[B]=X.frequency[j]?0:-1}X.tracker=Y,WX(X)}},zX=(Q)=>{let X=Y0(Q);WX(X)},L0=(Q)=>{let X={...Q,isStopped:!0};zX(X)},x0=(Q)=>O0(Q),jQ=()=>{return FQ().habitsPage},UX=(Q)=>{let X=FQ();_Q({...X,habitsPage:Q})},N0=()=>{return FQ().editPage},I0=D(({classNames:Q,hideRemove:X,hideAdd:$,onRemove:J,onAdd:Z})=>{return W.Span({class:G`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>X?.value&&$?.value?"bn":"ba"} ${Q}`,children:[W.If({subject:X,isFalsy:W.Span({class:G`pointer ph2 pb1 bw1 b--light-silver ${()=>$?.value?"":"br"}`,onclick:O(J),children:"-"})}),W.If({subject:$,isFalsy:W.Span({class:"pointer ph2 pb1",onclick:O(Z),children:"+"})})]})}),L=D(({className:Q,onTap:X,children:$})=>W.Button({class:G`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:O(()=>X()),children:$})),T=D(({className:Q,size:X,onClick:$,iconName:J,title:Z})=>W.Span({class:G`material-symbols-outlined ${()=>$?"pointer":""} ${Q}`,style:G`font-size: ${()=>X?.value||"16"}px`,onclick:O($),children:J,title:Z})),PQ=D(({classNames:Q,dotClassNames:X,colorIndex:$,level:J,totalLevels:Z,showText:Y,textContent:z,icon:U,iconSize:R,isRectangular:B,showHeight:_,onClick:j})=>{let P=q(()=>B?.value?"br0":"br-100"),K=q(()=>J.value<0?"bg-transparent":"bg-light-gray"),{peakBackgroundColor:M,backgroundColor:V,fontColor:E,levelPercent:g}=H(q(()=>_0(J.value,Z.value,$.value,Y?.value))).props,u=q(()=>z?.value||"·"),i=q(()=>_?.value&&U?.value&&g.value>99),l=()=>{if(j&&J.value>=0)j()};return W.Span({class:G`pointer relative overflow-hidden ${P} ${K} ${Q}`,onclick:O(l),children:W.If({subject:_,isTruthy:W.Span({class:G`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:G`
            background-color: ${M};
            color: white;
            height: ${g}%;
          `,children:W.If({subject:i,isTruthy:T({iconName:U,size:R})})}),isFalsy:W.Span({class:G`flex items-center justify-around absolute absolute--fill ${X}`,style:G`
            background-color: ${V};
            color: ${E};
          `,children:W.If({subject:U,isTruthy:T({iconName:U,size:R}),isFalsy:W.Span(u)})})})})}),l0=D(({classNames:Q})=>{return W.Div({class:G`bb b--light-gray ${Q}`})}),kQ=D(({classNames:Q,href:X,target:$,onClick:J,children:Z})=>{return W.A({class:G`noselect ${()=>!X&&!J?"":"pointer underline"} ${Q}`,href:X,target:$,onclick:O(J),children:Z})}),n=D(({classNames:Q,isOpen:X,content:$,onTapOutside:J})=>{return W.Dialog({onmount:(Z)=>setTimeout(()=>v(()=>{if(X.value)Z.showModal();else Z.close()})),onclick:O(J),class:G`pa0 br3 ${Q}`,children:[W.Div({onclick:(Z)=>Z.stopPropagation(),children:$})]})}),C0=D(({classNames:Q,placeholder:X,num:$,onchange:J})=>{let Z=(Y)=>{let z=Y.target.value,U=Number.parseFloat(Number.parseFloat(z||"0").toFixed(2));J(U)};return W.Input({class:Q,type:"number",placeholder:X,value:G`${()=>$.value??""}`,onchange:Z})}),BX=D(({classNames:Q,body:X,onMount:$})=>{return W.Html({lang:"en",children:[W.Head({children:[W.Title("Habits (by Cyfer)"),W.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),W.Meta({charset:"UTF-8"}),W.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),W.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),W.Link({rel:"stylesheet",href:"/assets/styles.css"}),W.Link({rel:"manifest",href:"/manifest.json"})]}),W.Body({tabindex:"-1",class:Q,onmount:$,children:[W.Script({src:"main.js",defer:"true"}),X]})]})}),a0=D(({progress:Q,classNames:X})=>{let $=G`width: ${()=>Q.value<0?0:Q.value>100?100:Q.value}%;`;return W.Div({class:G`br-pill bg-moon-gray ${X}`,children:W.Div({class:"br-pill bg-app-theme-color pa1",style:$})})}),qX=D(({classNames:Q,header:X,content:$,bottombar:J})=>{return W.Div({class:"flex-ns justify-center-ns",children:W.Div({class:G`w6-ns ${Q}`,children:[W.If({subject:X,isTruthy:W.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),$,W.Div({class:"pv6 mt5"}),W.If({subject:J,isTruthy:W.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:J})})]})})}),y0=D(({classNames:Q,tabItemClassNames:X,selectedTabClassNames:$,tabs:J,selectedTabIndex:Z,onTabChange:Y})=>{return W.Div({class:G`bg-white br3 ${Q}`,children:W.Div({class:"flex items-center justify-between pa1",children:W.For({subject:J,map:(z,U)=>W.Span({class:G`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>U===Z.value?`b--light-silver b black ${$?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${X}`,onclick:O(()=>Y(U)),children:z})})})})}),TQ=D(({classNames:Q,placeholder:X,disabled:$,text:J,onmount:Z,onchange:Y,onkeydown:z,onfocus:U,onblur:R})=>{let B,_=(K)=>{if(B=K,Z)Z(K)},j=(K)=>{let M=K.target.value;if(Y)Y(M)},P=(K)=>{let M=K.key.length===1?B.value+K.key:K.key==="Backspace"?B.value.slice(0,-1):B.value,V={key:K.key,text:M};if(z)z(V)};return W.Input({onmount:_,class:G`${Q}`,type:"text",placeholder:X,disabled:$,value:J,onchange:j,onkeydown:P,onfocus:U,onblur:R})}),t0=D(({classNames:Q,isOn:X,onToggle:$})=>{return W.Div({class:G`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:O($),children:[W.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>X?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),W.Div({class:"pa05"}),W.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>X?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),HQ=D(({classNames:Q,justifyClassNames:X,label:$})=>{return W.Div({class:G`w-100 flex ${()=>X?.value||"justify-end"} ${Q}`,children:L({className:"pa3 mb3 shadow-4 b flex items-center",children:[T({className:"nl1 mr1",size:22,iconName:"add"}),q(()=>$?.value||"Add habit")],onTap:Q0})})}),g0=D(({classNames:Q})=>{return L({className:G`pa3 flex items-center ${Q}`,children:[T({iconName:"arrow_back"}),W.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),e0=D(({classNames:Q,milestones:X,achievedMilestone:$,completionPercent:J})=>{let Z=H($).prop("color");return W.Div({class:G`center ${Q}`,children:[W.Div({class:"pb2 w-100 relative",children:W.For({subject:X,map:(Y,z)=>{return b0({colorCss:`bg-${Y.color}`,percent:Y.upperLimit,hideUpperLimit:z===0})}})}),W.Div({class:G`nt3dot6 h1dot2 bw1 relative br b--${Z}`,style:q(()=>`width: ${J.value}%;`),children:W.Div({class:G`relative flex items-start nt1 justify-between f7 mid-gray`,children:[W.Div(q(()=>J.value>53?"Average completion":J.value>43?"Avg completion":J.value>35?"Completion":"")),W.Div({class:G`absolute right-0 pr1 b f6 ${Z}`,children:q(()=>`${J.value}%`)})]})})]})}),b0=D(({colorCss:Q,hideUpperLimit:X,percent:$})=>{return W.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:q(()=>`width: ${$.value}%;`),children:[W.Div({class:G`absolute absolute-fill h0dot15 w-100 ${Q}`}),W.Div({class:"flex justify-end w-100 pt2 f7",children:W.Div({class:"nr3 pb2 light-silver b",children:q(()=>X?.value?"":`${$.value}%`)})})]})}),h0=D(({classNames:Q,habit:X,date:$,colorIndex:J,totalLevels:Z})=>{let Y=q(()=>{let z=$.value.getFullYear(),U=$.value.getMonth(),R=new Date(z,U,1),B=new Date(z,U+1,0);return eQ(X.value.tracker,R,B)});return W.Div({class:G`flex items-center ${Q}`,children:[W.Div({class:"f8 b w2 light-silver",children:q(()=>nX($.value.getMonth(),3))}),W.Div({class:"w-100 flex items-center justify-between",children:W.For({subject:Y,map:(z)=>PQ({classNames:"pa1",colorIndex:J,level:z.level.code,totalLevels:Z})})})]})}),SQ=D(({classNames:Q,habit:X,months:$,onClick:J})=>{let Z=q(()=>X.value),{milestones:Y,title:z,colorIndex:U,levels:R}=H(Z).props,B=q(()=>{let{startDate:M,endDate:V}=nQ($.value);return tQ(X.value,M,V).percent}),_=q(()=>aQ(Y.value,B.value)),{icon:j,color:P}=H(_).props,K=q(()=>aX($.value));return W.Div({class:G`pointer bg-white ${Q}`,onclick:O(J),children:[W.Div({class:"flex items-center justify-between nt1 mb2",children:[W.Div({class:"f5 dark-gray b",children:z}),W.Div({class:"f6 silver b flex items-center",children:[T({className:G`mr1 ${P}`,iconName:j}),G`${B}%`]})]}),W.Div({class:"mt2 mb1",children:W.For({subject:K,map:(M)=>h0({classNames:"mb1",habit:X,date:M,colorIndex:U,totalLevels:R.value.length})})})]})}),v0=D(({classNames:Q,editableHabit:X,editedHabit:$,hideDescriptions:J,showFullCustomisations:Z,onChange:Y})=>{let z=A(!1),U=q(()=>{let f=z.value;return Z?.value||f}),{title:R,frequency:B,levels:_,milestones:j,colorIndex:P}=H($).props,K=q(()=>B.value.every((f)=>!!f)),M="bg-mid-gray white",V="bg-near-white light-silver",E=(f)=>{Y({...$.value,title:f})},g=(f)=>{Y({...$.value,colorIndex:f})},u=(f)=>{if(f<-1||f>6)throw"Invalid day index";if(f===-1){Y({...$.value,frequency:[1,1,1,1,1,1,1]});return}let F=K.value?B.value.map((w)=>0):B.value;F[f]=K.value?1:F[f]?0:1,Y({...$.value,frequency:F})},i=(f,F)=>{let w=_.value;w[F]={...w[F],name:f},Y({...$.value,levels:w})},l=(f)=>{let F=_.value;F.splice(f,0,{isMaxLevel:!1,name:"",code:f}),Y({...$.value,levels:AQ(F)})},_X=(f)=>{let F=_.value;if(F.length<3)return;F.splice(f,1),Y({...$.value,levels:AQ(F)})},FX=(f,F)=>{if(F<0||F>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let w=[...$.value.milestones];w[F]={...w[F],percent:f},Y({...$.value,milestones:w})};return W.Div({class:Q,children:[N({classNames:"pb1",title:"Weekdays",children:W.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:W.For({subject:Array(7).fill(0),n:0,nthChild:W.Span({class:G`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>K.value?"bg-mid-gray white":"bg-near-white light-silver"}`,children:"Daily",onclick:O(()=>u(-1))}),map:(f,F)=>{let w=q(()=>B.value[F]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return W.Span({class:G`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${w}`,children:dX(F,1),onclick:O(()=>u(F))})}})})}),N({classNames:"pb2",title:"Title of the habit",children:TQ({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:R,onchange:E})}),W.If({subject:U,isTruthy:W.Div([N({classNames:"pb1",title:"Select a color tag",children:W.Div({class:"mb1 flex items-center",children:W.For({subject:oQ,map:(f,F)=>{let w=q(()=>F===P.value?"#999":"#f4f4f4");return W.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:G`border-color: ${w}`,onclick:O(()=>g(F)),children:W.Span({class:G`pa2 br-100`,style:`background-color: ${f}`})})}})})}),N({classNames:"pb3",title:"Status update levels",hideDescription:J,description:`
                  When updating a habit status in a day, we generally have only two levels - "${t[0]}"
                  or "${t[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:W.For({subject:_,map:(f,F)=>{let w=X?.value?.levels||[],KQ=_.value,{hideAddButton:jX,hideRemoveButton:PX}=G0(w,KQ,F),KX=R0(w,KQ,F);return W.Div({children:[W.Div({class:"flex items-center justify-between",children:[W.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[PQ({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:P,level:F,isRectangular:!0,totalLevels:_.value.length}),TQ({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${F}`,disabled:KX,text:f.name,onchange:(fX)=>i(fX,F)})]}),I0({hideAdd:jX,hideRemove:PX,onAdd:()=>l(F+1),onRemove:()=>_X(F)})]}),W.If({subject:F<_.value.length-1,isTruthy:W.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),N({title:"Habit completion goal",hideDescription:J,description:G`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>aQ($.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:W.For({subject:j,n:0,nthChild:W.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[W.Span({class:"lh-copy",children:""}),W.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[W.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),W.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(f,F)=>W.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[W.Span({class:"lh-copy flex items-center",children:[T({className:`mr2 ${f.color}`,size:20,iconName:f.icon}),f.label]}),W.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[W.If({subject:F===3,isTruthy:W.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:C0({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:f.percent,onchange:(w)=>FX(w,F)})}),W.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),W.If({subject:Z,isFalsy:L({className:"pv2 ph3 flex items-center",onTap:()=>z.value=!z.value,children:[T({className:"mr1",iconName:q(()=>z.value?"remove":"add")}),G`Show ${()=>z.value?"Less":"More"} Customisations`]})})]})}),Q1=D(({editableHabit:Q,onMount:X})=>{let $=A(c.editPage),J=A(!1),Z=A(!1),Y=A(""),z=A(z0()),U=q(()=>Q?.value?`Edit '${Q.value.title}'`:"Add new habit"),R=()=>J.value=!0,B=()=>J.value=!1,_=()=>{B(),history.go(-2)},j=()=>{if(Y.value=q0(z.value,!Q?.value),Y.value)return;let K=z.value,M=[...Q?.value?.levels||[]],V=j0(M,K.levels,K.tracker);zX({...z.value,tracker:V}),history.back()};return BX({onMount:()=>{if(X)X(),z.value=Q?.value;$.value=N0()},body:qX({classNames:"bg-white ph3",header:W.Div({class:G`${()=>U.value.length>22?"f2dot66":""}`,children:U}),content:W.Div([W.If({subject:Q,isTruthy:W.Div([N({classNames:"pb2",title:"Actions",children:[c0({isOpen:J,habit:z,onClose:B,onDone:_}),kQ({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:R}),n({classNames:"bn",isOpen:Z,onTapOutside:()=>Z.value=!1,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:G`Stop '${()=>z.value.title}'?`}),W.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,W.Br({}),W.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),W.Div({class:"flex items-center justify-between f6",children:[L({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>Z.value=!1}),L({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{L0(z.value),Z.value=!1,history.back()}})]})]})}),kQ({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>Z.value=!0})]})])}),v0({editableHabit:Q,editedHabit:z,hideDescriptions:q(()=>!$.value.showHints),showFullCustomisations:H($).prop("showFullCustomisation"),onChange:(K)=>z.value=K})]),bottombar:W.Div({class:"bg-white w-100 pv3",children:[W.If({subject:Y,isTruthy:W.Div({class:"red mb3",children:Y})}),W.Div({class:"flex items-center justify-stretch",children:[g0({classNames:"w4dot50 w4dot25-ns"}),L({className:"w-100 pa3 ml3 b",children:q(()=>Q?.value?"Update":"Add"),onTap:j})]})]})})})}),c0=D(({isOpen:Q,habit:X,onClose:$,onDone:J})=>{return n({classNames:"bn w-30-ns",isOpen:Q,onTapOutside:$,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:G`Delete '${()=>X.value?.title}'?`}),W.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,W.Br({}),W.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),W.Div({class:"flex items-center justify-between f6",children:[L({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:$}),L({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{x0(X.value.id),J()}})]})]})})}),X1=D(({isOpen:Q,habit:X,date:$,showTitleInHeader:J,onClose:Z,onChange:Y})=>{let{levels:z,tracker:U,colorIndex:R}=H(q(()=>X.value)).props;return n({classNames:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:Z,content:W.Div({class:"mnw5",children:[W.Div({class:"f5 b tc pa3",children:G`Change status ${()=>J?.value?`of  '${X.value.title}'`:`for ${$.value.toDateString()}`}`}),W.Div({class:"f5 mb1",children:W.For({subject:q(()=>z.value.slice().reverse()||[]),map:(B,_)=>{let j=z.value.length-1-_,P=G`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>W0(U.value,$.value)?.level.code===j?"bg-near-white black fw6":"gray fw5"}`;return W.Div({class:P,onclick:O(()=>Y(j)),children:[PQ({classNames:`pa1 mr3 ba b ${j<1?"b--light-silver":"b--transparent"}`,colorIndex:R,level:j,totalLevels:z.value.length,isRectangular:!0}),W.Span(B.name)]})}})})]})})}),u0=D(({classNames:Q,links:X})=>{return W.Div({class:G`flex items-center justify-between pv3 bg-near-white ${Q}`,children:W.For({subject:X,map:($)=>p0({label:$.label,icon:$.icon,isSelected:$.isSelected,href:$.href})})})}),p0=D(({classNames:Q,label:X,icon:$,isSelected:J,href:Z})=>{return W.Div({class:G`pointer noselect flex flex-column items-center justify-center pb2 ${()=>J.value?"app-theme-color b":"black"} ${Q}`,onclick:O(()=>eX(Z.value)),children:[T({size:22,iconName:$}),W.Div({class:"f7",children:X})]})}),m0=D(({classNames:Q,header:X,content:$,navbarTop:J,route:Z})=>{return qX({classNames:Q,header:X,content:$,bottombar:W.Div({children:[W.If({subject:J,isTruthy:J}),u0({classNames:"nl3 nr3 ph4",links:q(()=>[{label:"Today",icon:"calendar_month",isSelected:Z.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Z.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Z.value==="/settings/",href:"/settings/"}])})]})})}),N=D(({classNames:Q,contentClassNames:X,title:$,description:J,hideDescription:Z,children:Y})=>{return W.Div({class:G`mt3 mb4 ${Q}`,children:[W.Div({class:"mb2 dark-gray f4 b",children:$}),W.If({subject:q(()=>J?.value&&!Z?.value),isTruthy:W.Div({class:"mb3 f6 silver fw5",children:G`${J}`})}),W.Div({class:X,children:Y})]})}),r0=D(({classNames:Q,iconSize:X,selectedOptionIndex:$,onChange:J})=>{let Z=A(!1),Y=q(()=>e[$.value]),z=(U)=>{J(U),Z.value=!1};return W.Div({class:Q,children:[LQ({classNames:"pointer",descending:q(()=>Y.value.decending),iconName:q(()=>Y.value.icon),size:q(()=>X?.value??20),onClick:()=>Z.value=!0}),n({classNames:"f5 normal ba bw0 outline-0",isOpen:Z,onTapOutside:()=>Z.value=!1,content:W.Div({children:[W.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),W.Div({class:"f5 mb1",children:W.For({subject:e,map:(U,R)=>{let B=G`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>U.label===Y.value.label?"bg-near-white black fw6":"gray fw5"}`;return W.Div({class:B,onclick:O(()=>z(R)),children:[LQ({classNames:"ml1 mr2",descending:U.decending,iconName:U.icon,size:20}),W.Span(U.label)]})}})})]})})]})}),LQ=D(({classNames:Q,descending:X,iconName:$,size:J,onClick:Z})=>{return W.Span({class:G`flex items-center ${()=>Z?"pointer":""} ${Q}`,onclick:O(Z),children:[T({className:"silver",size:q(()=>4*J.value/5),iconName:q(()=>X.value?"arrow_upward":"arrow_downward")}),T({className:"",size:J,iconName:$})]})}),XQ=A(!1),S=A(c.habitsPage),$Q=q(()=>dQ[S.value.tabIndex].months),GX=A([]),RX=q(()=>{let Q=e[S.value.sortOptionIndex],X=$Q.value,{startDate:$,endDate:J}=nQ(X),Z=Q.label,Y=GX.value.map((z)=>({...z,completion:tQ(z,$,J).percent}));return Y.sort((z,U)=>{if(Z==="Completion (Highest first)")return U.completion-z.completion;if(Z==="Completion (Lowest first)")return z.completion-U.completion;if(Z==="Date created (Oldest first)")return z.id-U.id;return U.id-z.id}),Y}),xQ=q(()=>RX.value.filter((Q)=>!Q.isStopped)),NQ=q(()=>RX.value.filter((Q)=>Q.isStopped)),s0=(Q)=>{UX({...S.value,sortOptionIndex:Q}),S.value=jQ()},o0=(Q)=>{UX({...S.value,tabIndex:Q}),S.value=jQ()},IQ=()=>{GX.value=T0(),S.value=jQ(),XQ.value=w0()},d0=()=>{S0(),IQ(),window.addEventListener("pageshow",IQ)},n0=BX({classNames:"bg-white",onMount:d0,body:m0({classNames:"ph3 bg-white",route:"/habits/",header:W.Div({class:"flex items-start justify-between bg-white",children:["All habits",r0({classNames:"mt2 mr2",iconSize:22,selectedOptionIndex:H(S).prop("sortOptionIndex"),onChange:s0})]}),content:W.Div(W.If({subject:XQ,isTruthy:W.Div({class:"flex flex-column items-center justify-around",children:[W.Img({class:"mt3 pt4",src:"/assets/images/empty.png",height:"200"}),W.Div("It's all empty here!"),HQ({classNames:"pt5",justifyClassNames:"justify-around",label:"Add your first habit"})]}),isFalsy:W.Div([y0({classNames:"nl1 f6",tabs:dQ.map((Q)=>Q.label),selectedTabIndex:H(S).prop("tabIndex"),onTabChange:o0}),W.Div(W.For({subject:xQ,itemKey:"id",n:0,nthChild:W.Div({class:"silver f6 mt3 pt1 mb4",children:["ACTIVE HABITS",W.If({subject:q(()=>!!xQ.value.length),isFalsy:W.Div("None")})]}),map:(Q)=>SQ({classNames:"mb4",habit:Q,months:$Q,onClick:()=>EQ(Q.value.id)})})),W.Div(W.For({subject:NQ,itemKey:"id",n:0,nthChild:W.Div({class:"silver f6 mt5 mb2",children:["STOPPED HABITS",W.If({subject:q(()=>!!NQ.value.length),isFalsy:W.Div("None")})]}),map:(Q)=>SQ({classNames:"mb4",habit:Q,months:$Q,onClick:()=>EQ(Q.value.id)})}))])})),navbarTop:W.Div(W.If({subject:XQ,isFalsy:HQ({})}))})}),i0=()=>{k.start("mount"),vQ.resetIdCounter(),n0(),k.start("run")};i0();
