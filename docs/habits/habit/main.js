var e=(X)=>{let $=Object.entries(X).sort((Q,J)=>Q[0].localeCompare(J[0]));return $.forEach(([Q,J],z)=>{if(J&&typeof J==="object"&&!Array.isArray(J))$[z]=[Q,e(J)]}),Object.fromEntries($)},JX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},s=(X)=>{if(Array.isArray(X)){let $=[...X],Q=[];return $.forEach((J)=>{Q.push(s(J))}),Q}if(JX(X)){let $={...X},Q={};return Object.keys($).forEach((J)=>{Q[J]=s($[J])}),Object.freeze(Q)}return X},g=(X)=>{if(Array.isArray(X)){let Q=[...X],J=[];return Q.forEach((z)=>{J.push(g(z))}),J}if(JX(X)){let Q={...X},J={};return Object.keys(Q).forEach((z)=>{J[z]=g(Q[z])}),J}return X},OX=(X,$="index")=>X.map((Q,J)=>({[$]:J,value:Q})),w0=(X,$)=>{let Q=e(X),J=e($),z=Object.keys(Q),W=Object.keys(J);if(z.length!==W.length)return!1;for(let U of z)if(!W.includes(U)||!zX(Q[U],J[U]))return!1;return!0},V0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let Q=0;Q<X.length;Q++)if(!zX(X[Q],$[Q]))return!1;return!0},zX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return V0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return w0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},O0=(X,$,Q)=>{let z=OX(g(X),"index");return OX(g($),"index").map((U)=>{let Y="add",R=-1,G=U.value;return z.some((F,V)=>{if(Y=zX(F.value,U.value)?F.index===U.index?"idle":"shuffle":Q&&F.value[Q]!==void 0&&F.value[Q]===U.value[Q]?"update":"add",Y!=="add")return R=F.index,z.splice(V,1),!0;return!1}),{type:Y,oldIndex:R,value:G}})},S=(X)=>["source-signal","derived-signal"].includes(X?.type),SX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((Q)=>typeof X?.value===Q)),ZX=(X)=>S(X)||SX(X),CX=(X)=>SX(X,["string"]),IX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),b=(X)=>ZX(X)?X.value:X,o=null,k=(X)=>{let $=s(X),Q=new Set;return{type:"source-signal",get value(){if(o)Q.add(o);return g($)},set value(J){if(J===$)return;$=s(J),Q.forEach((z)=>z&&z())}}},C=(X)=>{o=X,X(),o=null},q=(X)=>{let $,Q=k($);return C(()=>{$=X($),Q.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return Q.value}}},l=(X)=>{if(!JX(X.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:($)=>q(()=>X.value[$]),get props(){return Object.keys(X.value).reduce((Q,J)=>{let z=J;return Q[z]=this.prop(z),Q},{})}}},B=(X,...$)=>q(()=>{return X.reduce((Q,J,z)=>{let W,U=$[z];if(typeof U==="function")W=U()??"";else if(ZX(U))W=U.value??"";else W=U??"";return`${Q}${J}${W.toString()}`},"")}),yX=["onmount","onunmount"],gX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],M0=[...gX,...yX],A0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],p,D0=(X)=>{if(!p)p=document.createElement("textarea");return p.innerHTML=X,p.value},E0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},bX=E0(),T={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},d=(X)=>Array.isArray(X),n=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,y=(X)=>typeof X==="string"||typeof X==="function"&&X.isElementGetter,WX=(X)=>S(X)&&y(X.value),k0=(X)=>y(X)||WX(X),vX=(X)=>{return S(X)&&(y(X.value)||d(X.value)&&X.value.every(($)=>y($)))},hX=(X)=>{return!S(X)&&(CX(X)||IX(X)||y(X)||d(X)&&X.every(($)=>k0($)))},UX=(X)=>{return vX(X)||hX(X)},MX=!1,T0={},I={},L0=globalThis.MutationObserver,H0=new L0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((Q)=>{if(n(Q)){let J=Q,z=J.elementId;if(I[z])delete I[z];else T0[z]=J.tagName}}),$.removedNodes.forEach((Q)=>{if(n(Q)){let J=Q,z=J.elementId,W=J.unmountListener;if(W)I[z]={element:J,unmountListener:W}}})}),Object.entries(I).forEach(([$,Q])=>{let{element:J,unmountListener:z}=Q;cX(J,z)})}),cX=(X,$)=>{if(!n(X))return;let Q=X.children;for(let J=0;J<Q.length;J++){let z=Q[J];cX(z,z.unmountListener)}if($&&$(X),I[X.elementId])delete I[X.elementId]},x0=()=>{if(!MX&&!T.currentIs("build"))H0.observe(document.body,{childList:!0,subtree:!0}),MX=!0},pX=(X,$)=>M0.includes(X)&&$===void 0,uX=(X,$)=>gX.includes(X)&&typeof $==="function",mX=(X,$)=>yX.includes(X)&&typeof $==="function",N0=(X,$)=>pX(X,$)||uX(X,$)||mX(X,$),S0=(X,$)=>{Object.entries($).forEach(([Q,J])=>{if(pX(Q,J));else if(uX(Q,J)){let z=Q.slice(2);X.addEventListener(z,(W)=>{if(z==="keypress")W.preventDefault();J(W)})}else if(mX(Q,J)){if(Q==="onmount"&&!T.currentIs("build")){let z=J;setTimeout(()=>z(X),0)}if(Q==="onunmount")x0(),X.unmountListener=J}else console.error(`Invalid event key: ${Q} for element with tagName: ${X.tagName}`)})},AX=(X,$,Q)=>{let J=(ZX(Q)?Q.value:Q)??"";if(typeof J==="boolean")if(J)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=J;else if(J)X.setAttribute($,J)},C0=(X,$)=>{let Q={};Object.entries($).forEach((J)=>{let[z,W]=J;if(S(W))Q[z]=W;AX(X,z,W)}),C(()=>{Object.entries(Q).forEach((J)=>{let[z,W]=J,U=W.value;if(!T.currentIs("run"))return;AX(X,z,U)})})},u=(X)=>{if(WX(X)){let $=X.value;return u($)}if(typeof X==="string")return document.createTextNode(D0(X));if(y(X)){let $=X();if(!n($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},I0=(X,$)=>{if(!$)return;if(vX($))C(()=>{let J=$.value,z=d(J)?J:[J];z.forEach((U,Y)=>{let R=X.childNodes[Y],G=u(U);if(R&&G)X.replaceChild(G,R);else if(G)X.appendChild(G);else console.error(`No child found for node with tagName: ${X.tagName}`)});let W=z.length;while(W<X.childNodes.length){let U=X.childNodes[W];if(U)X.removeChild(U)}});if(hX($)){let Q=CX($)?[$.value]:IX($)?$.value:d($)?$:[$],J=[];if(Q.forEach((z,W)=>{if(WX(z))J.push({index:W,childSignal:z});let U=u(z),Y=X.childNodes[W];if(Y&&U)X.replaceChild(U,Y);else if(!Y&&U)X.appendChild(U);else console.error(`No child found for node with tagName: ${X.tagName}`)}),J.length)J.forEach(({index:z,childSignal:W})=>{C(()=>{if(!W.value)return;if(!T.currentIs("run"))return;let U=u(W.value),Y=X.childNodes[z];if(Y&&U)X.replaceChild(U,Y);else if(!Y&&U)X.appendChild(U);else console.error(`No child found for node with tagName: ${X.tagName}`)})})}},y0=(X,$)=>{let Q=void 0,J={},z={};return Object.entries(X).forEach(([W,U])=>{if(W==="children")if(UX(U))Q=U;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(U)}`);else if(N0(W,U))J[W]=U;else z[W]=U}),{children:Q,eventProps:J,attributeProps:z}},g0=(X,$)=>{let Q=()=>{let J=bX.getNewId(),z=T.currentIs("mount")?document.querySelector(`[data-elem-id="${J}"]`):document.createElement(X);z.elementId=J,z.unmountListener=void 0;let W=UX($)?{children:$}:$;if(!T.currentIs("run"))W["data-elem-id"]=z.elementId.toString();let U=y0(W,z.tagName);if(S0(z,U.eventProps),C0(z,U.attributeProps),I0(z,U.children),!T.currentIs("build"))z.removeAttribute("data-elem-id");return z};return Q.isElementGetter=!0,Q},DX=(X,$,Q)=>{let J=k($),z=k(X),W=Q(q(()=>z.value),q(()=>J.value)),U,Y,R=!1;if(W?.isElementGetter)U=()=>{if(R&&Y)return Y;return Y=W(),R=!0,Y},U.isElementGetter=!0;else if(typeof W==="string")U=W;else throw`One of the child, ${W} passed in ForElement is invalid.`;return{indexSignal:J,itemSignal:z,mappedChild:U}},EX=(X,$,Q)=>{if($!==void 0&&$>=0&&Q){let J=$>X.length?X.length:$;X.splice(J,0,Q)}return X},b0=({subject:X,itemKey:$,map:Q,n:J,nthChild:z})=>{if(z&&J===void 0||J!==void 0&&J>-1&&!z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let W=q(()=>{let K=b(X);return Array.isArray(K)?K:[]});if(!$)return q(()=>EX(W.value.map(Q),J,z));let U=z;if(z&&typeof z!=="string"){let K=z(),j=()=>K;j.isElementGetter=!0,U=j}let Y=W.value;if(Y.length&&typeof Y[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null,G=q((K)=>{return R=K||R,W.value}),F=q((K)=>{if(!K||!R)return G.value.map((A,D)=>DX(A,D,Q));return O0(R,G.value,$).map((w,A)=>{let D=(K||[])[w.oldIndex];if(console.assert(w.type==="add"&&w.oldIndex===-1&&!D||w.oldIndex>-1&&!!D,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),D){if(w.type==="shuffle")D.indexSignal.value=A;if(w.type==="update")D.indexSignal.value=A,D.itemSignal.value={...w.value};return D}return DX(w.value,A,Q)})});return q(()=>EX(F.value.map((K)=>K.mappedChild),J,U))},v0=({subject:X,isTruthy:$,isFalsy:Q})=>{let J=Z.Span({style:"display: none;"}),z=()=>(b(X)?$:Q)||J;return S(X)?q(z):z()},h0=({subject:X,caseMatcher:$,defaultCase:Q,cases:J})=>{let z=()=>{let W=b(X),U=void 0;for(let[Y,R]of Object.entries(J))if($&&$(X,Y)||W===Y){U=R;break}return U||Q||Z.Span({style:"display: none;"})};return S(X)?q(z):z()},c0=A0.reduce((X,$)=>{let Q=$.split("").map((z,W)=>!W?z.toUpperCase():z).join(""),J=(z)=>g0($,z);return X[Q]=J,X},{}),p0={For:b0,If:v0,Switch:h0},Z={...c0,...p0},f=(X)=>($)=>{for(let J of Object.keys($))if($[J]===void 0)delete $[J];let Q=Object.entries($).reduce((J,z)=>{let[W,U]=z,Y=typeof U==="string",R=Array.isArray(U)&&U.every((F)=>typeof F==="string"),G=S(U)||typeof U==="function"?U:Y||R?{type:"non-signal",get value(){return b(U)}}:UX(U)?U:{type:"non-signal",get value(){return b(U)}};return J[W]=G,J},{});return X(Q)};var XX=86400000,u0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m0=["January","February","March","April","May","June","July","August","September","October","November","December"],rX=(X,$)=>u0[X].substring(0,$),sX=(X,$)=>m0[X].substring(0,$),YX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},N=(X)=>YX(X).getTime(),qX=(X,$)=>N(X)===N($),r0=(X,$)=>{let Q=N(X),J=N($);return Math.round((J-Q)/XX)},s0=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),o0=(X)=>{let $=new Date;return Array(X).fill(0).map((Q,J)=>new Date($.getFullYear(),$.getMonth()-J,1)).reverse()},d0=(X)=>{let $=X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()-$)},n0=(X)=>{let $=6-X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()+$)},i0=(X,$)=>{let Q=N(X),J=N($);if(Q===J)return[YX(new Date(Q))];let z=Q<J?Q:J,U=((Q<J?J:Q)-z)/XX;return Array(U+1).fill(0).map((Y,R)=>new Date(z+R*XX))},oX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],l0=[1,1,1,1,1,1,1],a0=[{name:"Not Applicable",code:-1},{name:"Paused",code:-2},{name:"Stopped",code:-3}],t0=["Not done","Done"],e0=[70,60,45],kX={id:"analytics",lastInteraction:new Date().getTime()},v={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},TX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],dX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},X1=(X)=>location.href=X,$1=()=>location.href=dX.HABITS.NEW.href,Q1=(X)=>location.href=`${dX.HABITS.HABIT.EDIT.href}?id=${X}`,J1=(X)=>{if(!T.currentIs("run"))return"";let $=window.location.search;return new URLSearchParams($).get(X)||""},z1=1.6181,Z1=()=>{let $=+J1("id");if(isNaN($)||!$)return;try{return PX($)}catch(Q){return}},W1=(X)=>a0.find(($)=>$.code===X),nX=(X,$)=>{return X<0?W1(-1):{name:$[X],code:X}},U1=(X)=>({level:nX(-1,[]),date:X}),Y1=(X,$,Q)=>({level:nX(X,$),date:Q}),q1=(X,$)=>X.find((Q)=>N(Q.date)===N($)),GX=(X)=>{let $=YX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((Q,J)=>({name:Q,code:J})),tracker:X.tracker.map((Q,J)=>Y1(Q,X.levels,s0($,J)))}},iX=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,Q)=>$.level.code)}},lX=()=>{let $={id:new Date().getTime(),title:"",frequency:l0,colorIndex:0,levels:t0,tracker:[],milestones:e0,pauses:[],isStopped:!1};return GX($)},aX=(X)=>[{label:"Successful",percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",percent:0,icon:"close",color:"red"}],i=(X,$)=>{let Q=aX(X),J=Q[0];for(let z=0;z<Q.length;z++)if(J=Q[z],J.percent<$)break;return J},G1=(X,$)=>{if(!X.title)return"Title should not be empty";if($&&x1(X.title))return"A habit with same name already exists";if(X.frequency.every((J)=>!J))return"Select at least one day in a week";if(!X.levels.every((J)=>!!J.name))return"One of the levels is empty";if(X.levels.some((J,z)=>{for(let W=z+1;W<X.levels.length;W++)if(X.levels[W].name===J.name)return!0;return!1}))return"Multiple levels have same name";if(!X.milestones.every((J)=>J<=100&&J>=0))return"The milestones should be between 0 and 100 percents";if(!X.milestones.every((J,z,W)=>z===0?!0:W[z-1]>J))return"Milestones should be in order (from high to low)";return""},tX=(X,$,Q)=>{let J=RX(X.tracker,$,Q),z=X.levels.length-1,W=0,U=0,Y=0,R=0,G=0,F=0;return J.forEach((V,K)=>{if(W+=V.level.code>-1?1:0,U+=V.level.code>0?1:0,Y+=V.level.code>0?V.level.code:0,K===J.length-1)return;let w=V.level.code<1;F=w?F+1:0;let D=100*((V.level.code>0?V.level.code:0)/(X.levels.length-1));R=Math.round(D)>50?R+1:0,G=w?0:G+1}),{title:X.title,aceStreak:R,followStreak:G,missed:F,percent:Math.ceil(100*(Y/(W*z))),totalDays:W,workingDays:U}},R1=(X,$,Q)=>{let J=!!X.length;if(!J)return{hideAddButton:!1,hideRemoveButton:$.length<3};let z=$[Q],W=!!(J&&X.find((K)=>K.name===z.name)),U=X.length!==$.length,Y=$.length<X.length,R=$.length>X.length,G=!U&&X.length&&X.some((K,j)=>K.name!==$[j].name);return{hideAddButton:Y||G||W&&Y,hideRemoveButton:Y||G||W&&R}},B1=(X,$,Q)=>{let J=!!X.length,z=$[Q],W=!!(J&&X.find((Y)=>Y.name===z.name)),U=X.length!==$.length;return W&&U},F1=(X,$,Q,J=!1)=>{let z=oX[Q],U=Math.trunc(Math.pow(X/($-1),z1)*255).toString(16),Y=U.length===1?`0${U}`:U,R=X<0||Y==="0"?"transparent":`${z}${Y}`,G=J?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:R,fontColor:G}},_1=(X,$,Q)=>{let J=PX(X.id),z=J.tracker.map((U)=>{if(qX(U.date,Q))return{...U,level:{...U.level,code:$}};return U}),W={...J,tracker:z};Z0(W)},P1=(X,$)=>{let Q=[];for(let J of $)if(!X.some((W)=>{if(qX(W.date,J))return Q.push(W),!0;return!1}))Q.push(U1(J));return Q},RX=(X,$,Q)=>{let J=i0($,Q);return P1(X,J)},j1=(X)=>{let $=d0(new Date(X.id)),Q=n0(new Date),J=RX(X.tracker,$,Q);return{...X,tracker:J}},K1=(X)=>{let $=j1(X),Q=[];for(let J=0;J<$.tracker.length;J++){let z=Math.floor(J/7);if(!Q[z])Q[z]=[];Q[z][J%7]=$.tracker[J]}return Q},f1=(X,$,Q)=>{if(!X.length||X.length===$.length)return Q;let J=[...Q],z=[];return X.forEach((W)=>{let U=$.find((F)=>F.name===W.name);if(!U)return;if(U.code===W.code)return;let G=[];Q.forEach((F,V)=>{if(F.level.code===W.code)G.push(V)}),z.push({indices:G,newLevel:U})}),z.forEach((W)=>{W.indices.forEach((U)=>{J[U]={...J[U],level:W.newLevel}})}),J},w1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},BX=(X,$,Q)=>{let J=JSON.parse(X||"{}"),z=J&&typeof J==="object",W=J[$];if(!z||!(Q?W===Q:!!W))return;return J},M=(X)=>{return(...$)=>{return w1(),H1(new Date),X&&X(...$)}},V1=(X)=>X.startsWith("h."),FX=(X)=>`h.${X}`,eX=(X)=>{if(!V1(X))return;let $=localStorage.getItem(X),Q=BX($,"title");if(!Q)return;return Q},X0=()=>{if(!T.currentIs("run"))return[];let X=[];for(let $ in localStorage){let Q=eX($);if(!Q)continue;X.push(Q)}return X},_X=(X)=>{let $=FX(X.id);localStorage.setItem($,JSON.stringify(X))},O1=(X)=>{let $=FX(X);localStorage.removeItem($)},$0="settings",M1="id",A1="local-settings",Q0=(X)=>{localStorage.setItem($0,JSON.stringify(X))},D1=()=>{if(!T.currentIs("run"))return v;let X=()=>{let J=localStorage.getItem($0);return BX(J,M1,A1)};if(!X())Q0(v);let Q=X();if(!Q)throw"Error fetching settings";return E1(Q),X()},E1=(X)=>{if(!X.editPage)console.log("settings.editPage is missing"),console.log("adding ",{...X,editPage:v.editPage}),Q0({...X,editPage:v.editPage})},J0="analytics",k1="id",T1="analytics",z0=(X)=>{localStorage.setItem(J0,JSON.stringify(X))},L1=()=>{if(!T.currentIs("run"))return console.log("return initial analytics"),kX;let X=()=>{let J=localStorage.getItem(J0);return BX(J,k1,T1)};if(!X())console.log("NO ANALYTICS FOUND"),z0(kX);let Q=X();if(!Q)throw"Error fetching analytics";return Q},H1=(X)=>{let $=L1();z0({...$,lastInteraction:X.getTime()})},PX=(X)=>{let $=FX(X),Q=eX($);if(!Q)throw`Error fetching habit with id '${X}' from storage`;return GX(Q)},x1=(X)=>{let Q=X0().find((J)=>J.title.trim()===X.trim());return Q?GX(Q):void 0},N1=()=>{let X=X0();for(let $ of X){let Q=new Date($.id),J=new Date,z=r0(Q,J),W=[...$.tracker];if(z+2<=W.length)continue;let U=W.length-1,Y=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+U),R=Y.getDay();if(qX(J,Y)){let G=W[U];W[U]=$.frequency[R]?G<0?0:G:-1}for(let G=W.length;G<=z;G++){let V=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+G).getDay();W[G]=$.frequency[V]?0:-1}$.tracker=W,_X($)}},Z0=(X)=>{let $=iX(X);_X($)},S1=(X)=>{let $=PX(X),J={...iX($),isStopped:!0};_X(J)},C1=(X)=>O1(X),I1=()=>{return D1().editPage},y1=f(({classNames:X,hideRemove:$,hideAdd:Q,onRemove:J,onAdd:z})=>{return Z.Span({class:B`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>$?.value&&Q?.value?"bn":"ba"} ${X}`,children:[Z.If({subject:$,isFalsy:Z.Span({class:B`pointer ph2 pb1 bw1 b--light-silver ${()=>Q?.value?"":"br"}`,onclick:M(J),children:"-"})}),Z.If({subject:Q,isFalsy:Z.Span({class:"pointer ph2 pb1",onclick:M(z),children:"+"})})]})}),H=f(({className:X,onTap:$,children:Q})=>Z.Button({class:B`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,onclick:M(()=>$()),children:Q})),L=f(({className:X,size:$,onClick:Q,iconName:J,title:z})=>Z.Span({class:B`material-symbols-outlined ${()=>Q?"pointer":""} ${X}`,style:B`font-size: ${()=>$?.value||"16"}px`,onclick:M(Q),children:J,title:z})),jX=f(({classNames:X,dotClassNames:$,colorIndex:Q,level:J,totalLevels:z,showText:W,textContent:U,icon:Y,iconSize:R,isRectangular:G,onClick:F})=>{let V=q(()=>G?.value?"br0":"br-100"),K=q(()=>J.value<0?"bg-transparent":"bg-light-gray"),{backgroundColor:j,fontColor:w}=l(q(()=>F1(J.value,z.value,Q.value,W?.value))).props,A=q(()=>G?.value?"br0":"br-100"),D=q(()=>U?.value||"·"),c=()=>{if(F&&J.value>=0)F()};return Z.Span({class:B`pointer relative ${V} ${K} ${X}`,onclick:M(c),children:[Z.Span({class:B`flex items-center justify-around absolute absolute--fill ${A} ${$}`,style:B`
            background-color: ${j};
            color: ${w};
          `,children:Z.If({subject:Y,isTruthy:L({iconName:Y,size:R}),isFalsy:Z.Span(D)})})]})}),LX=f(({classNames:X,href:$,target:Q,onClick:J,children:z})=>{return Z.A({class:B`noselect ${()=>!$&&!J?"":"pointer underline"} ${X}`,href:$,target:Q,onclick:M(J),children:z})}),h=f(({classNames:X,isOpen:$,content:Q,onTapOutside:J})=>{return Z.Dialog({onmount:(z)=>setTimeout(()=>C(()=>{if($.value)z.showModal();else z.close()})),onclick:M(J),class:B`pa0 br3 ${X}`,children:[Z.Div({onclick:(z)=>z.stopPropagation(),children:Q})]})}),g1=f(({classNames:X,placeholder:$,num:Q,onchange:J})=>{let z=(W)=>{let U=W.target.value,Y=Number.parseFloat(Number.parseFloat(U||"0").toFixed(2));J(Y)};return Z.Input({class:X,type:"number",placeholder:$,value:B`${()=>Q.value??""}`,onchange:z})}),W0=f(({classNames:X,body:$,onMount:Q})=>{return Z.Html({lang:"en",children:[Z.Head({children:[Z.Title("Habits (by Cyfer)"),Z.Meta({charset:"UTF-8"}),Z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),Z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),Z.Link({rel:"stylesheet",href:"/assets/styles.css"}),Z.Link({rel:"manifest",href:"/manifest.json"})]}),Z.Body({tabindex:"-1",class:X,onmount:Q,children:[Z.Script({src:"main.js",defer:"true"}),$]})]})}),n1=f(({progress:X,classNames:$})=>{let Q=B`width: ${()=>X.value<0?0:X.value>100?100:X.value}%;`;return Z.Div({class:B`br-pill bg-moon-gray ${$}`,children:Z.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),KX=f(({classNames:X,header:$,content:Q,bottombar:J})=>{return Z.Div({class:"flex-ns justify-center-ns",children:Z.Div({class:B`w6-ns ${X}`,children:[Z.If({subject:$,isTruthy:Z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),Q,Z.Div({class:"pv6 mt5"}),Z.If({subject:J,isTruthy:Z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:J})})]})})}),i1=f(({classNames:X,tabItemClassNames:$,selectedTabClassNames:Q,tabs:J,selectedTabIndex:z,onTabChange:W})=>{return Z.Div({class:B`bg-white br3 ${X}`,children:Z.Div({class:"flex items-center justify-between pa1",children:Z.For({subject:J,map:(U,Y)=>Z.Span({class:B`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>Y===z.value?`b--light-silver b black ${Q?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${$}`,onclick:M(()=>W(Y)),children:U})})})})}),HX=f(({classNames:X,placeholder:$,disabled:Q,text:J,onmount:z,onchange:W,onkeydown:U,onfocus:Y,onblur:R})=>{let G,F=(j)=>{if(G=j,z)z(j)},V=(j)=>{let w=j.target.value;if(W)W(w)},K=(j)=>{let w=j.key.length===1?G.value+j.key:j.key==="Backspace"?G.value.slice(0,-1):G.value,A={key:j.key,text:w};if(U)U(A)};return Z.Input({onmount:F,class:B`${X}`,type:"text",placeholder:$,disabled:Q,value:J,onchange:V,onkeydown:K,onfocus:Y,onblur:R})}),l1=f(({classNames:X,isOn:$,onToggle:Q})=>{return Z.Div({class:B`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,onclick:M(Q),children:[Z.Div({class:B`br-100 ba bw2 b--hover-black pa1 ${()=>$?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),Z.Div({class:"pa05"}),Z.Div({class:B`br-100 ba bw2 b--hover-black pa1 ${()=>$?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),a1=f(({classNames:X})=>{return Z.Div({class:B`w-100 flex justify-end ${X}`,children:H({className:"pa3 mb3 shadow-4 b flex items-center",children:[L({className:"nl1 mr1",size:22,iconName:"add"}),"Add habit"],onTap:$1})})}),U0=f(({classNames:X})=>{return H({className:B`pa3 flex items-center ${X}`,children:[L({iconName:"arrow_back"}),Z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),b1=f(({classNames:X,habit:$,date:Q,colorIndex:J,totalLevels:z})=>{let W=q(()=>{let U=Q.value.getFullYear(),Y=Q.value.getMonth(),R=new Date(U,Y,1),G=new Date(U,Y+1,0);return RX($.value.tracker,R,G)});return Z.Div({class:B`flex items-center ${X}`,children:[Z.Div({class:"f8 b w2 light-silver",children:q(()=>sX(Q.value.getMonth(),3))}),Z.Div({class:"w-100 flex items-center justify-between",children:Z.For({subject:W,map:(U)=>jX({classNames:"pa1",colorIndex:J,level:U.level.code,totalLevels:z})})})]})}),t1=f(({classNames:X,habit:$,months:Q,onClick:J})=>{let{milestones:z,title:W,colorIndex:U,levels:Y}=l(q(()=>$.value)).props,R=q(()=>{let K=new Date,j=K.getFullYear(),w=K.getMonth(),A=new Date(j,w-Q.value,1),D=new Date(j,w+1,0);return tX($.value,A,D).percent}),G=q(()=>i(z.value,R.value).icon),F=q(()=>i(z.value,R.value).color),V=q(()=>o0(Q.value));return Z.Div({class:B`pointer bg-white ${X}`,onclick:M(J),children:[Z.Div({class:"flex items-center justify-between nt1 mb2",children:[Z.Div({class:"f4 dark-gray b",children:W}),Z.Div({class:"f6 silver b flex items-center",children:[L({className:B`mr1 ${F}`,iconName:G}),B`${R}%`]})]}),Z.Div({class:"mt3 mb1",children:Z.For({subject:V,map:(K)=>b1({classNames:"mb1",habit:$,date:K,colorIndex:U,totalLevels:Y.value.length})})})]})}),v1=f(({classNames:X,editableHabit:$,editedHabit:Q,hideDescriptions:J,showFullCustomisations:z,onChange:W})=>{C(()=>console.log(J?.value));let U=k(!1),Y=q(()=>{let P=U.value;return z?.value||P}),{title:R,frequency:G,levels:F,milestones:V,colorIndex:K}=l(Q).props,j=q(()=>G.value.every((P)=>!!P)),w="bg-mid-gray white",A="bg-near-white light-silver",D=(P)=>{W({...Q.value,title:P})},c=(P)=>{W({...Q.value,colorIndex:P})},wX=(P)=>{if(P<-1||P>6)throw"Invalid day index";if(P===-1){W({...Q.value,frequency:[1,1,1,1,1,1,1]});return}let _=j.value?G.value.map((E)=>0):G.value;_[P]=j.value?1:_[P]?0:1,W({...Q.value,frequency:_})},R0=(P,_)=>{let E=F.value;E[_]={...E[_],name:P},W({...Q.value,levels:E})},B0=(P)=>{let _=F.value;_.splice(P,0,{name:"",code:P}),W({...Q.value,levels:_})},F0=(P)=>{let _=F.value;if(_.length<3)return;_.splice(P,1),W({...Q.value,levels:_})},_0=(P,_)=>{if(_<0||_>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let E=[...Q.value.milestones];E[_]=P,W({...Q.value,milestones:E})};return Z.Div({class:X,children:[x({classNames:"pb1",title:"Schedule",children:Z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:Z.For({subject:Array(7).fill(0),n:0,nthChild:Z.Span({class:B`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>j.value?w:A}`,children:"Daily",onclick:M(()=>wX(-1))}),map:(P,_)=>{let E=q(()=>G.value[_]&&!j.value?w:A);return Z.Span({class:B`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${E}`,children:rX(_,1),onclick:M(()=>wX(_))})}})})}),x({classNames:"pb2",title:"Title",children:HX({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:R,onchange:D})}),Z.If({subject:Y,isTruthy:Z.Div([x({classNames:"pb1",title:"Color",children:Z.Div({class:"mb1 flex items-center",children:Z.For({subject:oX,map:(P,_)=>{let E=q(()=>_===K.value?"#999":"#f4f4f4");return Z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:B`border-color: ${E}`,onclick:M(()=>c(_)),children:Z.Span({class:B`pa2 br-100`,style:`background-color: ${P}`})})}})})}),x({classNames:"pb3",title:"Levels",hideDescription:J,description:`
                  A habit can have more than 2 levels. Like the habit 'Drink 2 litres water'
                  should have three levels - '0 litre', '1 litre' and '2 litres' respectively.
                  You can add or remove level by clicking on + or - buttons. Click on textbox
                  for editing the level name.
                `,children:Z.For({subject:F,map:(P,_)=>{let E=$?.value?.levels||[],VX=F.value,{hideAddButton:P0,hideRemoveButton:j0}=R1(E,VX,_),K0=B1(E,VX,_);return Z.Div({children:[Z.Div({class:"flex items-center justify-between",children:[Z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[jX({classNames:"w1dot5 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:K,level:_,isRectangular:!0,totalLevels:F.value.length}),HX({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${_}`,disabled:K0,text:P.name,onchange:(f0)=>R0(f0,_)})]}),y1({hideAdd:P0,hideRemove:j0,onAdd:()=>B0(_+1),onRemove:()=>F0(_)})]}),Z.If({subject:_<F.value.length-1,isTruthy:Z.Div({class:"pa2 ml2 pl1 bl bw1 b--light-gray"})})]})}})}),x({title:"Milestones",hideDescription:J,description:B`
                  Miltestones are something long-term. Let's say after a month or two, you followed
                  your habit for 67% of the times, then based on below table you crossed the '${()=>i(Q.value.milestones,67).label}' milestone. You can set your own milestone levels depending
                  on the difficulty of the habit.
                `,children:Z.For({subject:q(()=>aX(V.value)),n:0,nthChild:Z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[Z.Span({class:"lh-copy",children:""}),Z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[Z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),Z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(P,_)=>Z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[Z.Span({class:"lh-copy flex items-center",children:[L({className:`mr2 ${P.color}`,size:20,iconName:P.icon}),P.label]}),Z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[Z.If({subject:_===3,isTruthy:Z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:g1({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:P.percent,onchange:(E)=>_0(E,_)})}),Z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),Z.If({subject:z,isFalsy:H({className:"pv2 ph3 flex items-center",onTap:()=>U.value=!U.value,children:[L({className:"mr1",iconName:q(()=>U.value?"remove":"add")}),B`Show ${()=>U.value?"Less":"More"} Customisations`]})})]})}),e1=f(({editableHabit:X,onMount:$})=>{let Q=k(v.editPage),J=k(!1),z=k(!1),W=k(""),U=k(lX()),Y=q(()=>X?.value?`Edit '${X.value.title}'`:"Add new habit");C(()=>console.log(Q.value.showHints));let R=()=>J.value=!0,G=()=>J.value=!1,F=()=>{G(),history.go(-2)},V=()=>{if(W.value=G1(U.value,!X?.value),W.value)return;let j=U.value,w=[...X?.value?.levels||[]],A=f1(w,j.levels,j.tracker);Z0({...U.value,tracker:A}),history.back()};return W0({onMount:()=>{if($)$(),U.value=X?.value;Q.value=I1()},body:KX({classNames:"bg-white ph3",header:Z.Div({class:B`${()=>Y.value.length>22?"f2dot66":""}`,children:Y}),content:Z.Div([Z.If({subject:X,isTruthy:Z.Div([x({classNames:"pb2",title:"Actions",children:[Y0({isOpen:J,habit:U,onClose:G,onDone:F}),LX({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:R}),h({classNames:"bn",isOpen:z,onTapOutside:()=>z.value=!1,content:Z.Div({class:"pa3 f5",children:[Z.Div({class:"mb3 b f4",children:B`Stop '${()=>U.value.title}'?`}),Z.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,Z.Br({}),Z.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),Z.Div({class:"flex items-center justify-between f6",children:[H({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>z.value=!1}),H({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{S1(U.value.id),z.value=!1,history.back()}})]})]})}),LX({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>z.value=!0})]})])}),v1({editableHabit:X,editedHabit:U,hideDescriptions:q(()=>!Q.value.showHints),showFullCustomisations:l(Q).prop("showFullCustomisation"),onChange:(j)=>U.value=j})]),bottombar:Z.Div({class:"bg-white w-100 pv3",children:[Z.If({subject:W,isTruthy:Z.Div({class:"red mb3",children:W})}),Z.Div({class:"flex items-center justify-stretch",children:[U0({classNames:"w4dot50 w4dot25-ns"}),H({className:"w-100 pa3 ml3 b",children:q(()=>X?.value?"Update":"Add"),onTap:V})]})]})})})}),Y0=f(({isOpen:X,habit:$,onClose:Q,onDone:J})=>{return h({classNames:"bn w-30-ns",isOpen:X,onTapOutside:Q,content:Z.Div({class:"pa3 f5",children:[Z.Div({class:"mb3 b f4",children:B`Delete '${()=>$.value?.title}'?`}),Z.Div({class:"mb4",children:[`
              All the data and the acheivements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,Z.Br({}),Z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),Z.Div({class:"flex items-center justify-between f6",children:[H({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Q}),H({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{C1($.value.id),J()}})]})]})})}),X5=f(({isOpen:X,habit:$,date:Q,showTitleInHeader:J,onClose:z,onChange:W})=>{return h({classNames:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:z,content:Z.Div({class:"mnw5",children:[Z.Div({class:"f5 b tc pa3",children:B`Change status ${()=>J?.value?`of  '${$.value.title}'`:`for ${Q.value.toDateString()}`}`}),Z.Div({class:"f5 mb1",children:Z.For({subject:q(()=>$.value.levels||[]),map:(U,Y)=>{let R=B`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>q1($.value.tracker,Q.value)?.level.code===Y?"bg-near-white black":"gray"}`;return Z.Div({class:R,onclick:M(()=>W(Y)),children:[Z.Span(U.name)]})}})})]})})}),h1=f(({classNames:X,links:$})=>{return Z.Div({class:B`flex items-center justify-between pv3 bg-near-white ${X}`,children:Z.For({subject:$,map:(Q)=>c1({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),c1=f(({classNames:X,label:$,icon:Q,isSelected:J,href:z})=>{return Z.Div({class:B`pointer noselect flex flex-column items-center justify-center pb2 ${()=>J.value?"app-theme-color b":"black"} ${X}`,onclick:M(()=>X1(z.value)),children:[L({size:22,iconName:Q}),Z.Div({class:"f7",children:$})]})}),$5=f(({classNames:X,header:$,content:Q,navbarTop:J,route:z})=>{return KX({classNames:X,header:$,content:Q,bottombar:Z.Div({children:[Z.If({subject:J,isTruthy:J}),h1({classNames:"nl3 nr3 ph4",links:q(()=>[{label:"Today",icon:"calendar_month",isSelected:z.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:z.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:z.value==="/settings/",href:"/settings/"}])})]})})}),x=f(({classNames:X,contentClassNames:$,title:Q,description:J,hideDescription:z,children:W})=>{return Z.Div({class:B`mt3 mb4 ${X}`,children:[Z.Div({class:"mb2 dark-gray f4 b",children:Q}),Z.If({subject:q(()=>J?.value&&!z?.value),isTruthy:Z.Div({class:"mb3 f6 silver fw5",children:B`${J}`})}),Z.Div({class:$,children:W})]})}),Q5=f(({classNames:X,iconSize:$,selectedOptionIndex:Q,onChange:J})=>{let z=k(!1),W=q(()=>TX[Q.value]),U=(Y)=>{J(Y),z.value=!1};return Z.Div({class:X,children:[xX({classNames:"pointer",descending:q(()=>W.value.decending),iconName:q(()=>W.value.icon),size:q(()=>$?.value??20),onClick:()=>z.value=!0}),h({classNames:"f5 normal ba bw0 outline-0",isOpen:z,onTapOutside:()=>z.value=!1,content:Z.Div({children:[Z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),Z.Div({class:"f5 mb1",children:Z.For({subject:TX,map:(Y,R)=>{let G=B`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>Y.label===W.value.label?"bg-near-white black":"gray"}`;return Z.Div({class:G,onclick:M(()=>U(R)),children:[xX({classNames:"ml1 mr2",descending:Y.decending,iconName:Y.icon,size:20}),Z.Span(Y.label)]})}})})]})})]})}),xX=f(({classNames:X,descending:$,iconName:Q,size:J,onClick:z})=>{return Z.Span({class:B`flex items-center ${()=>z?"pointer":""} ${X}`,onclick:M(z),children:[L({className:"silver",size:q(()=>4*J.value/5),iconName:q(()=>$.value?"arrow_upward":"arrow_downward")}),L({className:"",size:J,iconName:Q})]})}),$X=k(""),O=k(lX()),fX=k(!1),m=k(!1),r=k({date:new Date,selectedLevelIndex:0}),NX=q(()=>O.value?O.value.title:"Loading.."),p1=q(()=>{let X=O.value;if(!X)return[];let $=X.levels.map((W)=>0),Q=X.tracker.reduce((W,U)=>{if(U.level.code>-1)W[U.level.code]=W[U.level.code]?W[U.level.code]+1:1;return W},$),J=Q.reduce((W,U)=>W+U);return Q.map((W,U)=>({level:X.levels[U],total:W,percent:Math.round(100*W/J)}))}),q0=q(()=>O.value?tX(O.value,new Date(O.value.id),new Date).percent:0),a=q(()=>{let X=q0.value,$=O.value;return $?i($.milestones,X):void 0}),t=q(()=>{let X=O.value;if(!X)return[];return K1(X)}),QX=()=>{let X=Z1();if(!X){$X.value="Incorrect habit ID provided in the query params.";return}O.value=X},u1=()=>fX.value=!0,G0=()=>fX.value=!1,m1=()=>{G0(),history.back()},r1=(X)=>{if(!O.value)return;_1(O.value,X,r.value.date),m.value=!1,QX()},s1=()=>{N1(),QX(),window.addEventListener("pageshow",QX)},o1=W0({onMount:s1,body:KX({classNames:"bg-white ph3",header:Z.Div({class:"flex items-start justify-between",children:[Z.Div({class:B`${()=>NX.value.length>22?"f2dot66":""}`,children:NX}),Z.If({subject:q(()=>O.value?.isStopped),isFalsy:L({className:"mt1 mr1 ba b--silver bw1 br-100 pa1 noselect",size:18,iconName:"edit",onClick:()=>{if(O.value)Q1(O.value.id)}})})]}),content:Z.Div({children:[Y0({isOpen:fX,habit:O,onClose:G0,onDone:m1}),h({classNames:"f5 normal ba bw0 outline-0",isOpen:m,onTapOutside:()=>m.value=!1,content:Z.Div({class:"mnw5",children:[Z.Div({class:"f5 b tc pa3",children:B`Change status for ${()=>r.value.date.toDateString()}`}),Z.Div({class:"f5 mb1",children:Z.For({subject:q(()=>O.value?.levels||[]),map:(X)=>{let $=B`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>X.code===r.value.selectedLevelIndex?"bg-near-white black":"gray"}`;return Z.Div({class:$,onclick:M(()=>r1(X.code)),children:[Z.Span(X.name)]})}})})]})}),Z.If({subject:$X,isTruthy:Z.Div({class:"red",children:$X}),isFalsy:Z.Div(Z.If({subject:O,isFalsy:Z.Div({class:"",children:"habit.."}),isTruthy:Z.Div({children:[Z.If({subject:q(()=>!!O.value?.isStopped),isTruthy:Z.Div([Z.Div({class:"red mb3",children:"Status: STOPPED PERMANENTLY"}),H({className:"pv2 ph3 nt2 mb4 red",onTap:u1,children:"Delete Permanently"})])}),x({classNames:"pb3",title:"Acheivment",children:Z.For({subject:p1,n:1/0,nthChild:Z.Div({class:"flex items-center justify-between mt2 pt1 bt bw1 b--near-white b mid-gray",children:[Z.Div("Overall"),Z.Div({class:"flex items-center",children:[L({className:B`mr2 ${()=>a.value?.color}`,size:20,iconName:q(()=>`${a.value?.icon}`)}),q(()=>`${a.value?.label}`),Z.Span({class:"ml1"}),Z.Div(q(()=>` (${q0.value}%)`))]})]}),map:(X,$)=>Z.Div({class:"flex items-center justify-between mb2",children:[Z.Div(q(()=>`${X.level.name}`)),Z.Div(q(()=>`${X.total} times (${X.percent}%)`))]})})}),x({title:"Tracker",children:[Z.Div({class:"mh2 flex items-center justify-between",children:Z.For({subject:Array(7).fill(0),map:(X,$)=>Z.Div({class:"h2 w2 br-100 gray f7 flex items-center justify-center",children:rX($,1)})})}),Z.Div({onmount:(X)=>X.scroll({top:X.scrollHeight-X.clientHeight}),class:"mxh5 mxh6-ns nt2 bb bw1 b--near-white mh2 overflow-y-scroll",children:[Z.Div({class:B`absolute left-0 right-0 bg-to-top-white z-999 ${()=>t.value.length>4?"h3":""}`}),Z.Div({children:Z.For({subject:t,n:0,nthChild:Z.Div({class:q(()=>t.value.length>4?"pv3 mt2":"pv2")}),map:(X)=>Z.Div({class:"flex items-center h-60",children:[Z.Div({class:"w-100 mb3 flex items-center justify-between",children:Z.For({subject:X,map:($)=>{let Q=$.date.getDate(),J=$.date.getMonth(),z=sX(J,3),W=`${Q===1?J===0?$.date.getFullYear().toString():z:Q}`;return jX({classNames:"h2 w2 flex items-center justify-center f7",colorIndex:O.value?.colorIndex??0,level:$.level.code,totalLevels:O.value?.levels.length||2,textContent:W,showText:$.level!==void 0,onClick:()=>{if(O.value?.isStopped)return;m.value=!0,r.value={date:$.date,selectedLevelIndex:$.level.code}}})}})})]})})})]})]})]})}))})]}),bottombar:Z.Div({class:"pb3",children:U0({})})})}),d1=()=>{T.start("mount"),bX.resetIdCounter(),o1(),T.start("run")};d1();
