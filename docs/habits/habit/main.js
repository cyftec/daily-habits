var JX=(X)=>{let $=Object.entries(X).sort((Q,Z)=>Q[0].localeCompare(Z[0]));return $.forEach(([Q,Z],W)=>{if(Z&&typeof Z==="object"&&!Array.isArray(Z))$[W]=[Q,JX(Z)]}),Object.fromEntries($)},BX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},o=(X)=>{if(Array.isArray(X)){let $=[...X],Q=[];return $.forEach((Z)=>{Q.push(o(Z))}),Q}if(BX(X)){let $={...X},Q={};return Object.keys($).forEach((Z)=>{Q[Z]=o($[Z])}),Object.freeze(Q)}return X},v=(X)=>{if(Array.isArray(X)){let Q=[...X],Z=[];return Q.forEach((W)=>{Z.push(v(W))}),Z}if(BX(X)){let Q={...X},Z={};return Object.keys(Q).forEach((W)=>{Z[W]=v(Q[W])}),Z}return X},TX=(X,$="index")=>X.map((Q,Z)=>({[$]:Z,value:Q})),k0=(X,$)=>{let Q=JX(X),Z=JX($),W=Object.keys(Q),z=Object.keys(Z);if(W.length!==z.length)return!1;for(let Y of W)if(!z.includes(Y)||!_X(Q[Y],Z[Y]))return!1;return!0},T0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let Q=0;Q<X.length;Q++)if(!_X(X[Q],$[Q]))return!1;return!0},_X=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return T0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return k0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},H0=(X,$,Q)=>{let W=TX(v(X),"index");return TX(v($),"index").map((Y)=>{let U="add",B=-1,R=Y.value;return W.some((_,P)=>{if(U=_X(_.value,Y.value)?_.index===Y.index?"idle":"shuffle":Q&&_.value[Q]!==void 0&&_.value[Q]===Y.value[Q]?"update":"add",U!=="add")return B=_.index,W.splice(P,1),!0;return!1}),{type:U,oldIndex:B,value:R}})},S=(X)=>["source-signal","derived-signal"].includes(X?.type),pX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((Q)=>typeof X?.value===Q)),FX=(X)=>S(X)||pX(X),mX=(X)=>pX(X,["string"]),uX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),h=(X)=>FX(X)?X.value:X,d=null,E=(X)=>{let $=o(X),Q=new Set;return{type:"source-signal",get value(){if(d)Q.add(d);return v($)},set value(Z){if(Z===$)return;$=o(Z),Q.forEach((W)=>W&&W())}}},c=(X)=>{d=X,X(),d=null},q=(X)=>{let $,Q=E($);return c(()=>{$=X($),Q.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return Q.value}}},x=(X)=>{if(!BX(X.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:($)=>q(()=>X.value[$]),get props(){return Object.keys(X.value).reduce((Q,Z)=>{let W=Z;return Q[W]=this.prop(W),Q},{})}}},G=(X,...$)=>q(()=>{return X.reduce((Q,Z,W)=>{let z,Y=$[W];if(typeof Y==="function")z=Y()??"";else if(FX(Y))z=Y.value??"";else z=Y??"";return`${Q}${Z}${z.toString()}`},"")}),rX=["onmount","onunmount"],sX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],L0=[...sX,...rX],x0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],u,N0=(X)=>{if(!u)u=document.createElement("textarea");return u.innerHTML=X,u.value},S0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},oX=S0(),k={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},n=(X)=>Array.isArray(X),i=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,I=(X)=>typeof X==="string"||typeof X==="function"&&X.isElementGetter,PX=(X)=>S(X)&&I(X.value),C0=(X)=>I(X)||PX(X),dX=(X)=>{return S(X)&&(I(X.value)||n(X.value)&&X.value.every(($)=>I($)))},nX=(X)=>{return!S(X)&&(mX(X)||uX(X)||I(X)||n(X)&&X.every(($)=>C0($)))},jX=(X)=>{return dX(X)||nX(X)},HX=!1,I0={},C={},y0=globalThis.MutationObserver,g0=new y0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((Q)=>{if(i(Q)){let Z=Q,W=Z.elementId;if(C[W])delete C[W];else I0[W]=Z.tagName}}),$.removedNodes.forEach((Q)=>{if(i(Q)){let Z=Q,W=Z.elementId,z=Z.unmountListener;if(z)C[W]={element:Z,unmountListener:z}}})}),Object.entries(C).forEach(([$,Q])=>{let{element:Z,unmountListener:W}=Q;iX(Z,W)})}),iX=(X,$)=>{if(!i(X))return;let Q=X.children;for(let Z=0;Z<Q.length;Z++){let W=Q[Z];iX(W,W.unmountListener)}if($&&$(X),C[X.elementId])delete C[X.elementId]},b0=()=>{if(!HX&&!k.currentIs("build"))g0.observe(document.body,{childList:!0,subtree:!0}),HX=!0},lX=(X,$)=>L0.includes(X)&&$===void 0,aX=(X,$)=>sX.includes(X)&&typeof $==="function",tX=(X,$)=>rX.includes(X)&&typeof $==="function",v0=(X,$)=>lX(X,$)||aX(X,$)||tX(X,$),h0=(X,$)=>{Object.entries($).forEach(([Q,Z])=>{if(lX(Q,Z));else if(aX(Q,Z)){let W=Q.slice(2);X.addEventListener(W,(z)=>{if(W==="keypress")z.preventDefault();Z(z)})}else if(tX(Q,Z)){if(Q==="onmount"&&!k.currentIs("build")){let W=Z;setTimeout(()=>W(X),0)}if(Q==="onunmount")b0(),X.unmountListener=Z}else console.error(`Invalid event key: ${Q} for element with tagName: ${X.tagName}`)})},LX=(X,$,Q)=>{let Z=(FX(Q)?Q.value:Q)??"";if(typeof Z==="boolean")if(Z)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=Z;else if(Z)X.setAttribute($,Z)},c0=(X,$)=>{let Q={};Object.entries($).forEach((Z)=>{let[W,z]=Z;if(S(z))Q[W]=z;LX(X,W,z)}),c(()=>{Object.entries(Q).forEach((Z)=>{let[W,z]=Z,Y=z.value;if(!k.currentIs("run"))return;LX(X,W,Y)})})},r=(X)=>{if(PX(X)){let $=X.value;return r($)}if(typeof X==="string")return document.createTextNode(N0(X));if(I(X)){let $=X();if(!i($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},p0=(X,$)=>{if(!$)return;if(dX($))c(()=>{let Z=$.value,W=n(Z)?Z:[Z];W.forEach((Y,U)=>{let B=X.childNodes[U],R=r(Y);if(B&&R)X.replaceChild(R,B);else if(R)X.appendChild(R);else console.error(`No child found for node with tagName: ${X.tagName}`)});let z=W.length;while(z<X.childNodes.length){let Y=X.childNodes[z];if(Y)X.removeChild(Y)}});if(nX($)){let Q=mX($)?[$.value]:uX($)?$.value:n($)?$:[$],Z=[];if(Q.forEach((W,z)=>{if(PX(W))Z.push({index:z,childSignal:W});let Y=r(W),U=X.childNodes[z];if(U&&Y)X.replaceChild(Y,U);else if(!U&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)}),Z.length)Z.forEach(({index:W,childSignal:z})=>{c(()=>{if(!z.value)return;if(!k.currentIs("run"))return;let Y=r(z.value),U=X.childNodes[W];if(U&&Y)X.replaceChild(Y,U);else if(!U&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)})})}},m0=(X,$)=>{let Q=void 0,Z={},W={};return Object.entries(X).forEach(([z,Y])=>{if(z==="children")if(jX(Y))Q=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(Y)}`);else if(v0(z,Y))Z[z]=Y;else W[z]=Y}),{children:Q,eventProps:Z,attributeProps:W}},u0=(X,$)=>{let Q=()=>{let Z=oX.getNewId(),W=k.currentIs("mount")?document.querySelector(`[data-elem-id="${Z}"]`):document.createElement(X);W.elementId=Z,W.unmountListener=void 0;let z=jX($)?{children:$}:$;if(!k.currentIs("run"))z["data-elem-id"]=W.elementId.toString();let Y=m0(z,W.tagName);if(h0(W,Y.eventProps),c0(W,Y.attributeProps),p0(W,Y.children),!k.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Q.isElementGetter=!0,Q},xX=(X,$,Q)=>{let Z=E($),W=E(X),z=Q(q(()=>W.value),q(()=>Z.value)),Y,U,B=!1;if(z?.isElementGetter)Y=()=>{if(B&&U)return U;return U=z(),B=!0,U},Y.isElementGetter=!0;else if(typeof z==="string")Y=z;else throw`One of the child, ${z} passed in ForElement is invalid.`;return{indexSignal:Z,itemSignal:W,mappedChild:Y}},NX=(X,$,Q)=>{if($!==void 0&&$>=0&&Q){let Z=$>X.length?X.length:$;X.splice(Z,0,Q)}return X},r0=({subject:X,itemKey:$,map:Q,n:Z,nthChild:W})=>{if(W&&Z===void 0||Z!==void 0&&Z>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let z=q(()=>{let j=h(X);return Array.isArray(j)?j:[]});if(!$)return q(()=>NX(z.value.map(Q),Z,W));let Y=W;if(W&&typeof W!=="string"){let j=W(),K=()=>j;K.isElementGetter=!0,Y=K}let U=z.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let B=null,R=q((j)=>{return B=j||B,z.value}),_=q((j)=>{if(!j||!B)return R.value.map((M,A)=>xX(M,A,Q));return H0(B,R.value,$).map((O,M)=>{let A=(j||[])[O.oldIndex];if(console.assert(O.type==="add"&&O.oldIndex===-1&&!A||O.oldIndex>-1&&!!A,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),A){if(O.type==="shuffle")A.indexSignal.value=M;if(O.type==="update")A.indexSignal.value=M,A.itemSignal.value={...O.value};return A}return xX(O.value,M,Q)})});return q(()=>NX(_.value.map((j)=>j.mappedChild),Z,Y))},s0=({subject:X,isTruthy:$,isFalsy:Q})=>{let Z=J.Span({style:"display: none;"}),W=()=>(h(X)?$:Q)||Z;return S(X)?q(W):W()},o0=({subject:X,caseMatcher:$,defaultCase:Q,cases:Z})=>{let W=()=>{let z=h(X),Y=void 0;for(let[U,B]of Object.entries(Z))if($&&$(X,U)||z===U){Y=B;break}return Y||Q||J.Span({style:"display: none;"})};return S(X)?q(W):W()},d0=x0.reduce((X,$)=>{let Q=$.split("").map((W,z)=>!z?W.toUpperCase():W).join(""),Z=(W)=>u0($,W);return X[Q]=Z,X},{}),n0={For:r0,If:s0,Switch:o0},J={...d0,...n0},V=(X)=>($)=>{for(let Z of Object.keys($))if($[Z]===void 0)delete $[Z];let Q=Object.entries($).reduce((Z,W)=>{let[z,Y]=W,U=typeof Y==="string",B=Array.isArray(Y)&&Y.every((_)=>typeof _==="string"),R=S(Y)||typeof Y==="function"?Y:U||B?{type:"non-signal",get value(){return h(Y)}}:jX(Y)?Y:{type:"non-signal",get value(){return h(Y)}};return Z[z]=R,Z},{});return X(Q)},eX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],i0=[1,1,1,1,1,1,1],l0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],WX=["Not started","Completed"],a0=[70,60,45],SX={id:"analytics",lastInteraction:new Date().getTime()},l={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},CX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var zX=86400000,t0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e0=["January","February","March","April","May","June","July","August","September","October","November","December"],X0=(X,$)=>t0[X].substring(0,$),$0=(X,$)=>e0[X].substring(0,$),KX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},y=(X)=>KX(X).getTime(),a=(X,$)=>y(X)===y($),X1=(X,$)=>{let Q=y(X),Z=y($);return Math.round((Z-Q)/zX)},$1=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),Q1=(X)=>{let $=new Date;return Array(X).fill(0).map((Q,Z)=>new Date($.getFullYear(),$.getMonth()-Z,1)).reverse()},Z1=(X)=>{let $=X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()-$)},J1=(X)=>{let $=6-X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()+$)},W1=(X,$)=>{let Q=y(X),Z=y($);if(Q===Z)return[KX(new Date(Q))];let W=Q<Z?Q:Z,Y=((Q<Z?Z:Q)-W)/zX;return Array(Y+1).fill(0).map((U,B)=>new Date(W+B*zX))},z1=(X)=>{if(X<1)throw"";let $=new Date,Q=$.getFullYear(),Z=$.getMonth(),W=new Date(Q,Z-(X-1),1),z=new Date(Q,Z+1,0);return{startDate:W,endDate:z}},Q0={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},Y1=(X)=>location.href=X,U1=()=>location.href=Q0.HABITS.NEW.href,q1=(X)=>location.href=`${Q0.HABITS.HABIT.EDIT.href}?id=${X}`,G1=(X)=>{if(!k.currentIs("run"))return"";let $=window.location.search;return new URLSearchParams($).get(X)||""},R1=1.6181,B1=()=>{let $=+G1("id");if(isNaN($)||!$)return;try{return _0($)}catch(Q){return}},_1=(X)=>l0.find(($)=>$.code===X),Z0=(X,$)=>{return X<0?_1(-1):{isMaxLevel:X===$.length-1,name:$[X],code:X}},F1=(X)=>({level:Z0(-1,[]),date:X}),P1=(X,$,Q)=>({level:Z0(X,$),date:Q}),j1=(X,$)=>X.find((Q)=>a(Q.date,$)),fX=(X)=>{let $=KX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((Q,Z)=>({isMaxLevel:Z===X.levels.length-1,name:Q,code:Z})),tracker:X.tracker.map((Q,Z)=>P1(Q,X.levels,$1($,Z))),milestones:f1(X.milestones)}},K1=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,Q)=>$.level.code),milestones:V1(X.milestones)}},J0=()=>{let $={id:new Date().getTime(),title:"",frequency:i0,colorIndex:0,levels:WX,tracker:[],milestones:a0,pauses:[],isStopped:!1};return fX($)},f1=(X)=>[{label:"Successful",upperLimit:100,percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:X[0],percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:X[1],percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:X[2],percent:0,icon:"close",color:"red"}],V1=(X)=>X.filter(($)=>!!$.percent).map(($)=>$.percent),VX=(X,$)=>{let Q=X[0];for(let Z=0;Z<X.length;Z++)if(Q=X[Z],Q.percent<=$)break;return{label:Q.label,icon:Q.icon,color:Q.color}},O1=(X,$)=>{if(!X.title)return"Title should not be empty";if($&&p1(X.title))return"A habit with same name already exists";if(X.frequency.every((Z)=>!Z))return"Select at least one day in a week";if(!X.levels.every((Z)=>!!Z.name))return"One of the levels is empty";if(X.levels.some((Z,W)=>{for(let z=W+1;z<X.levels.length;z++)if(X.levels[z].name===Z.name)return!0;return!1}))return"Multiple levels have same name";if(!X.milestones.every((Z)=>Z.percent<=100&&Z.percent>=0))return"The milestones should be between 0 and 100 percents";if(!X.milestones.every((Z,W,z)=>W===0?!0:z[W-1].percent>Z.percent))return"Milestones should be in order (from high to low)";return""},W0=(X,$,Q)=>{let Z=OX(X.tracker,$,Q),W=X.levels.length-1,z=0,Y=0,U=0,B=0,R=0,_=0;return Z.forEach((P,j)=>{if(z+=P.level.code>-1?1:0,Y+=P.level.code>0?1:0,U+=P.level.code>0?P.level.code:0,j===Z.length-1)return;let O=P.level.code<1;_=O?_+1:0;let A=100*((P.level.code>0?P.level.code:0)/(X.levels.length-1));B=Math.round(A)>50?B+1:0,R=O?0:R+1}),{title:X.title,aceStreak:B,followStreak:R,missed:_,percent:Math.round(100*(U/(z*W))),totalDays:z,workingDays:Y}},w1=(X,$,Q)=>{let Z=!!X.length;if(!Z)return{hideAddButton:!1,hideRemoveButton:$.length<3};let W=$[Q],z=!!(Z&&X.find((j)=>j.name===W.name)),Y=X.length!==$.length,U=$.length<X.length,B=$.length>X.length,R=!Y&&X.length&&X.some((j,K)=>j.name!==$[K].name);return{hideAddButton:U||R||z&&U,hideRemoveButton:U||R||z&&B}},D1=(X,$,Q)=>{let Z=!!X.length,W=$[Q],z=!!(Z&&X.find((U)=>U.name===W.name)),Y=X.length!==$.length;return z&&Y},E1=(X,$,Q,Z=!1)=>{let W=eX[Q],z=X/($-1),U=Math.trunc(Math.pow(z,R1)*255).toString(16),B=U.length===1?`0${U}`:U,R=X<0||B==="0"?"transparent":`${W}${B}`,_=Z?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:R,fontColor:_,peakBackgroundColor:W,levelPercent:Math.round(z*100)}},M1=(X,$,Q)=>{let Z=_0(X.id),W=Z.tracker.map((Y)=>{if(a(Y.date,Q))return{...Y,level:{...Y.level,code:$}};return Y}),z={...Z,tracker:W};EX(z)},A1=(X,$)=>{let Q=[];for(let Z of $)if(!X.some((z)=>{if(a(z.date,Z))return Q.push(z),!0;return!1}))Q.push(F1(Z));return Q},OX=(X,$,Q)=>{let Z=W1($,Q);return A1(X,Z)},k1=(X)=>{let $=Z1(new Date(X.id)),Q=J1(new Date),Z=OX(X.tracker,$,Q);return{...X,tracker:Z}},T1=(X)=>{let $=k1(X),Q=[];for(let Z=0;Z<$.tracker.length;Z++){let W=Math.floor(Z/7);if(!Q[W])Q[W]=[];Q[W][Z%7]=$.tracker[Z]}return Q},H1=(X,$,Q)=>{if(!X.length||X.length===$.length)return Q;let Z=[...Q],W=[];return X.forEach((z,Y)=>{let U=$.find((P)=>P.name===z.name),B=!U,R=(P)=>{let j=[];Q.forEach((K,O)=>{if(K.level.code===z.code)j.push(O)}),W.push({indices:j,newLevel:P})};if(B){if(Y===X.length-1)R($[$.length-1]);return}if(U.code===z.code)return;R(U)}),W.forEach((z)=>{z.indices.forEach((Y)=>{Z[Y]={...Z[Y],level:z.newLevel}})}),Z},IX=(X)=>{let $=X.length-1;for(let Q=0;Q<X.length;Q++)X[Q]={...X[Q],code:Q,isMaxLevel:Q===$};return X},L1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},wX=(X,$,Q)=>{let Z=JSON.parse(X||"{}"),W=Z&&typeof Z==="object",z=Z[$];if(!W||!(Q?z===Q:!!z))return;return Z},D=(X)=>{return(...$)=>{return L1(),c1(new Date),X&&X(...$)}},z0="analytics",x1="id",N1="analytics",Y0=(X)=>{localStorage.setItem(z0,JSON.stringify(X))},S1=()=>{if(!k.currentIs("run"))return SX;let X=()=>{let Z=localStorage.getItem(z0);return wX(Z,x1,N1)};if(!X())Y0(SX);let Q=X();if(!Q)throw"Error fetching analytics";return Q},C1=()=>{let X=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;X.push($)}return X},I1=(X)=>X.startsWith("h."),DX=(X)=>`h.${X}`,U0=(X)=>{if(!I1(X))return;let $=localStorage.getItem(X),Q=wX($,"title");if(!Q)return;return Q},q0=()=>{if(!k.currentIs("run"))return[];let X=[];for(let $ of C1()){let Q=U0($);if(!Q)continue;X.push(Q)}return X},G0=(X)=>{let $=DX(X.id);localStorage.setItem($,JSON.stringify(X))},y1=(X)=>{let $=DX(X);localStorage.removeItem($)},R0="settings",g1="id",b1="local-settings",B0=(X)=>{localStorage.setItem(R0,JSON.stringify(X))},v1=()=>{if(!k.currentIs("run"))return l;let X=()=>{let Z=localStorage.getItem(R0);return wX(Z,g1,b1)};if(!X())B0(l);let Q=X();if(!Q)throw"Error fetching settings";return h1(Q),X()},h1=(X)=>{if(!X.editPage)B0({...X,editPage:l.editPage})},c1=(X)=>{let $=S1();Y0({...$,lastInteraction:X.getTime()})},_0=(X)=>{let $=DX(X),Q=U0($);if(!Q)throw`Error fetching habit with id '${X}' from storage`;return fX(Q)},p1=(X)=>{let Q=q0().find((Z)=>Z.title.trim()===X.trim());return Q?fX(Q):void 0},m1=()=>{let X=q0();for(let $ of X){let Q=new Date($.id),Z=new Date,W=X1(Q,Z),z=[...$.tracker];if(W+2<=z.length)continue;let Y=z.length-1,U=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+Y),B=U.getDay();if(a(Z,U)){let R=z[Y];z[Y]=$.frequency[B]?R<0?0:R:-1}for(let R=z.length;R<=W;R++){let P=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+R).getDay();z[R]=$.frequency[P]?0:-1}$.tracker=z,G0($)}},EX=(X)=>{let $=K1(X);G0($)},u1=(X)=>{let $={...X,isStopped:!0};EX($)},r1=(X)=>y1(X),s1=()=>{return v1().editPage},o1=V(({classNames:X,hideRemove:$,hideAdd:Q,onRemove:Z,onAdd:W})=>{return J.Span({class:G`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>$?.value&&Q?.value?"bn":"ba"} ${X}`,children:[J.If({subject:$,isFalsy:J.Span({class:G`pointer ph2 pb1 bw1 b--light-silver ${()=>Q?.value?"":"br"}`,onclick:D(Z),children:"-"})}),J.If({subject:Q,isFalsy:J.Span({class:"pointer ph2 pb1",onclick:D(W),children:"+"})})]})}),H=V(({className:X,onTap:$,children:Q})=>J.Button({class:G`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,onclick:D(()=>$()),children:Q})),T=V(({className:X,size:$,onClick:Q,iconName:Z,title:W})=>J.Span({class:G`material-symbols-outlined ${()=>Q?"pointer":""} ${X}`,style:G`font-size: ${()=>$?.value||"16"}px`,onclick:D(Q),children:Z,title:W})),p=V(({classNames:X,dotClassNames:$,colorIndex:Q,level:Z,totalLevels:W,showText:z,textContent:Y,icon:U,iconSize:B,isRectangular:R,showHeight:_,onClick:P})=>{let j=q(()=>R?.value?"br0":"br-100"),K=q(()=>Z.value<0?"bg-transparent":"bg-light-gray"),{peakBackgroundColor:O,backgroundColor:M,fontColor:A,levelPercent:g}=x(q(()=>E1(Z.value,W.value,Q.value,z?.value))).props,m=q(()=>Y?.value||"·"),e=q(()=>_?.value&&U?.value&&g.value>99),XX=()=>{if(P&&Z.value>=0)P()};return J.Span({class:G`pointer relative overflow-hidden ${j} ${K} ${X}`,onclick:D(XX),children:J.If({subject:_,isTruthy:J.Span({class:G`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,style:G`
            background-color: ${O};
            color: white;
            height: ${g}%;
          `,children:J.If({subject:e,isTruthy:T({iconName:U,size:B})})}),isFalsy:J.Span({class:G`flex items-center justify-around absolute absolute--fill ${$}`,style:G`
            background-color: ${M};
            color: ${A};
          `,children:J.If({subject:U,isTruthy:T({iconName:U,size:B}),isFalsy:J.Span(m)})})})})}),G5=V(({classNames:X})=>{return J.Div({class:G`bb b--light-gray ${X}`})}),yX=V(({classNames:X,href:$,target:Q,onClick:Z,children:W})=>{return J.A({class:G`noselect ${()=>!$&&!Z?"":"pointer underline"} ${X}`,href:$,target:Q,onclick:D(Z),children:W})}),t=V(({classNames:X,isOpen:$,content:Q,onTapOutside:Z})=>{return J.Dialog({onmount:(W)=>setTimeout(()=>c(()=>{if($.value)W.showModal();else W.close()})),onclick:D(Z),class:G`pa0 br3 ${X}`,children:[J.Div({onclick:(W)=>W.stopPropagation(),children:Q})]})}),d1=V(({classNames:X,placeholder:$,num:Q,onchange:Z})=>{let W=(z)=>{let Y=z.target.value,U=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));Z(U)};return J.Input({class:X,type:"number",placeholder:$,value:G`${()=>Q.value??""}`,onchange:W})}),F0=V(({classNames:X,body:$,onMount:Q})=>{return J.Html({lang:"en",children:[J.Head({children:[J.Title("Habits (by Cyfer)"),J.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),J.Meta({charset:"UTF-8"}),J.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),J.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),J.Link({rel:"stylesheet",href:"/assets/styles.css"}),J.Link({rel:"manifest",href:"/manifest.json"})]}),J.Body({tabindex:"-1",class:X,onmount:Q,children:[J.Script({src:"main.js",defer:"true"}),$]})]})}),R5=V(({progress:X,classNames:$})=>{let Q=G`width: ${()=>X.value<0?0:X.value>100?100:X.value}%;`;return J.Div({class:G`br-pill bg-moon-gray ${$}`,children:J.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),MX=V(({classNames:X,header:$,content:Q,bottombar:Z})=>{return J.Div({class:"flex-ns justify-center-ns",children:J.Div({class:G`w6-ns ${X}`,children:[J.If({subject:$,isTruthy:J.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),Q,J.Div({class:"pv6 mt5"}),J.If({subject:Z,isTruthy:J.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:Z})})]})})}),B5=V(({classNames:X,tabItemClassNames:$,selectedTabClassNames:Q,tabs:Z,selectedTabIndex:W,onTabChange:z})=>{return J.Div({class:G`bg-white br3 ${X}`,children:J.Div({class:"flex items-center justify-between pa1",children:J.For({subject:Z,map:(Y,U)=>J.Span({class:G`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>U===W.value?`b--light-silver b black ${Q?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${$}`,onclick:D(()=>z(U)),children:Y})})})})}),gX=V(({classNames:X,placeholder:$,disabled:Q,text:Z,onmount:W,onchange:z,onkeydown:Y,onfocus:U,onblur:B})=>{let R,_=(K)=>{if(R=K,W)W(K)},P=(K)=>{let O=K.target.value;if(z)z(O)},j=(K)=>{let O=K.key.length===1?R.value+K.key:K.key==="Backspace"?R.value.slice(0,-1):R.value,M={key:K.key,text:O};if(Y)Y(M)};return J.Input({onmount:_,class:G`${X}`,type:"text",placeholder:$,disabled:Q,value:Z,onchange:P,onkeydown:j,onfocus:U,onblur:B})}),_5=V(({classNames:X,isOn:$,onToggle:Q})=>{return J.Div({class:G`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,onclick:D(Q),children:[J.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),J.Div({class:"pa05"}),J.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),F5=V(({classNames:X,justifyClassNames:$,label:Q})=>{return J.Div({class:G`w-100 flex ${()=>$?.value||"justify-end"} ${X}`,children:H({className:"pa3 mb3 shadow-4 b flex items-center",children:[T({className:"nl1 mr1",size:22,iconName:"add"}),q(()=>Q?.value||"Add habit")],onTap:U1})})}),P0=V(({classNames:X})=>{return H({className:G`pa3 flex items-center ${X}`,children:[T({iconName:"arrow_back"}),J.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),n1=V(({classNames:X,milestones:$,achievedMilestone:Q,completionPercent:Z})=>{let W=x(Q).prop("color");return J.Div({class:G`center ${X}`,children:[J.Div({class:"pb2 w-100 relative",children:J.For({subject:$,map:(z,Y)=>{return i1({colorCss:`bg-${z.color}`,percent:z.upperLimit,hideUpperLimit:Y===0})}})}),J.Div({class:G`nt3dot6 h1dot2 bw1 relative br b--${W}`,style:q(()=>`width: ${Z.value}%;`),children:J.Div({class:G`relative flex items-start nt1 justify-between f7 mid-gray`,children:[J.Div(q(()=>Z.value>53?"Average completion":Z.value>43?"Avg completion":Z.value>35?"Completion":"")),J.Div({class:G`absolute right-0 pr1 b f6 ${W}`,children:q(()=>`${Z.value}%`)})]})})]})}),i1=V(({colorCss:X,hideUpperLimit:$,percent:Q})=>{return J.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:q(()=>`width: ${Q.value}%;`),children:[J.Div({class:G`absolute absolute-fill h0dot15 w-100 ${X}`}),J.Div({class:"flex justify-end w-100 pt2 f7",children:J.Div({class:"nr3 pb2 light-silver b",children:q(()=>$?.value?"":`${Q.value}%`)})})]})}),l1=V(({classNames:X,habit:$,date:Q,colorIndex:Z,totalLevels:W})=>{let z=q(()=>{let Y=Q.value.getFullYear(),U=Q.value.getMonth(),B=new Date(Y,U,1),R=new Date(Y,U+1,0);return OX($.value.tracker,B,R)});return J.Div({class:G`flex items-center ${X}`,children:[J.Div({class:"f8 b w2 light-silver",children:q(()=>$0(Q.value.getMonth(),3))}),J.Div({class:"w-100 flex items-center justify-between",children:J.For({subject:z,map:(Y)=>p({classNames:"pa1",colorIndex:Z,level:Y.level.code,totalLevels:W})})})]})}),P5=V(({classNames:X,habit:$,months:Q,onClick:Z})=>{let W=q(()=>$.value),{milestones:z,title:Y,colorIndex:U,levels:B}=x(W).props,R=q(()=>{let{startDate:O,endDate:M}=z1(Q.value);return W0($.value,O,M).percent}),_=q(()=>VX(z.value,R.value)),{icon:P,color:j}=x(_).props,K=q(()=>Q1(Q.value));return J.Div({class:G`pointer bg-white ${X}`,onclick:D(Z),children:[J.Div({class:"flex items-center justify-between nt1 mb2",children:[J.Div({class:"f5 dark-gray b",children:Y}),J.Div({class:"f6 silver b flex items-center",children:[T({className:G`mr1 ${j}`,iconName:P}),G`${R}%`]})]}),J.Div({class:"mt2 mb1",children:J.For({subject:K,map:(O)=>l1({classNames:"mb1",habit:$,date:O,colorIndex:U,totalLevels:B.value.length})})})]})}),a1=V(({classNames:X,editableHabit:$,editedHabit:Q,hideDescriptions:Z,showFullCustomisations:W,onChange:z})=>{let Y=E(!1),U=q(()=>{let f=Y.value;return W?.value||f}),{title:B,frequency:R,levels:_,milestones:P,colorIndex:j}=x(Q).props,K=q(()=>R.value.every((f)=>!!f)),O="bg-mid-gray white",M="bg-near-white light-silver",A=(f)=>{z({...Q.value,title:f})},g=(f)=>{z({...Q.value,colorIndex:f})},m=(f)=>{if(f<-1||f>6)throw"Invalid day index";if(f===-1){z({...Q.value,frequency:[1,1,1,1,1,1,1]});return}let F=K.value?R.value.map((w)=>0):R.value;F[f]=K.value?1:F[f]?0:1,z({...Q.value,frequency:F})},e=(f,F)=>{let w=_.value;w[F]={...w[F],name:f},z({...Q.value,levels:w})},XX=(f)=>{let F=_.value;F.splice(f,0,{isMaxLevel:!1,name:"",code:f}),z({...Q.value,levels:IX(F)})},O0=(f)=>{let F=_.value;if(F.length<3)return;F.splice(f,1),z({...Q.value,levels:IX(F)})},w0=(f,F)=>{if(F<0||F>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let w=[...Q.value.milestones];w[F]={...w[F],percent:f},z({...Q.value,milestones:w})};return J.Div({class:X,children:[N({classNames:"pb1",title:"Weekdays",children:J.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:J.For({subject:Array(7).fill(0),n:0,nthChild:J.Span({class:G`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>K.value?"bg-mid-gray white":"bg-near-white light-silver"}`,children:"Daily",onclick:D(()=>m(-1))}),map:(f,F)=>{let w=q(()=>R.value[F]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return J.Span({class:G`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${w}`,children:X0(F,1),onclick:D(()=>m(F))})}})})}),N({classNames:"pb2",title:"Title of the habit",children:gX({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:B,onchange:A})}),J.If({subject:U,isTruthy:J.Div([N({classNames:"pb1",title:"Select a color tag",children:J.Div({class:"mb1 flex items-center",children:J.For({subject:eX,map:(f,F)=>{let w=q(()=>F===j.value?"#999":"#f4f4f4");return J.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:G`border-color: ${w}`,onclick:D(()=>g(F)),children:J.Span({class:G`pa2 br-100`,style:`background-color: ${f}`})})}})})}),N({classNames:"pb3",title:"Status update levels",hideDescription:Z,description:`
                  When updating a habit status in a day, we generally have only two levels - "${WX[0]}"
                  or "${WX[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:J.For({subject:_,map:(f,F)=>{let w=$?.value?.levels||[],kX=_.value,{hideAddButton:D0,hideRemoveButton:E0}=w1(w,kX,F),M0=D1(w,kX,F);return J.Div({children:[J.Div({class:"flex items-center justify-between",children:[J.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[p({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:j,level:F,isRectangular:!0,totalLevels:_.value.length}),gX({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${F}`,disabled:M0,text:f.name,onchange:(A0)=>e(A0,F)})]}),o1({hideAdd:D0,hideRemove:E0,onAdd:()=>XX(F+1),onRemove:()=>O0(F)})]}),J.If({subject:F<_.value.length-1,isTruthy:J.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),N({title:"Habit completion goal",hideDescription:Z,description:G`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>VX(Q.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:J.For({subject:P,n:0,nthChild:J.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[J.Span({class:"lh-copy",children:""}),J.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[J.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),J.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(f,F)=>J.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[J.Span({class:"lh-copy flex items-center",children:[T({className:`mr2 ${f.color}`,size:20,iconName:f.icon}),f.label]}),J.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[J.If({subject:F===3,isTruthy:J.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:d1({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:f.percent,onchange:(w)=>w0(w,F)})}),J.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),J.If({subject:W,isFalsy:H({className:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[T({className:"mr1",iconName:q(()=>Y.value?"remove":"add")}),G`Show ${()=>Y.value?"Less":"More"} Customisations`]})})]})}),j5=V(({editableHabit:X,onMount:$})=>{let Q=E(l.editPage),Z=E(!1),W=E(!1),z=E(""),Y=E(J0()),U=q(()=>X?.value?`Edit '${X.value.title}'`:"Add new habit"),B=()=>Z.value=!0,R=()=>Z.value=!1,_=()=>{R(),history.go(-2)},P=()=>{if(z.value=O1(Y.value,!X?.value),z.value)return;let K=Y.value,O=[...X?.value?.levels||[]],M=H1(O,K.levels,K.tracker);EX({...Y.value,tracker:M}),history.back()};return F0({onMount:()=>{if($)$(),Y.value=X?.value;Q.value=s1()},body:MX({classNames:"bg-white ph3",header:J.Div({class:G`${()=>U.value.length>22?"f2dot66":""}`,children:U}),content:J.Div([J.If({subject:X,isTruthy:J.Div([N({classNames:"pb2",title:"Actions",children:[j0({isOpen:Z,habit:Y,onClose:R,onDone:_}),yX({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:B}),t({classNames:"bn",isOpen:W,onTapOutside:()=>W.value=!1,content:J.Div({class:"pa3 f5",children:[J.Div({class:"mb3 b f4",children:G`Stop '${()=>Y.value.title}'?`}),J.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,J.Br({}),J.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),J.Div({class:"flex items-center justify-between f6",children:[H({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>W.value=!1}),H({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{u1(Y.value),W.value=!1,history.back()}})]})]})}),yX({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>W.value=!0})]})])}),a1({editableHabit:X,editedHabit:Y,hideDescriptions:q(()=>!Q.value.showHints),showFullCustomisations:x(Q).prop("showFullCustomisation"),onChange:(K)=>Y.value=K})]),bottombar:J.Div({class:"bg-white w-100 pv3",children:[J.If({subject:z,isTruthy:J.Div({class:"red mb3",children:z})}),J.Div({class:"flex items-center justify-stretch",children:[P0({classNames:"w4dot50 w4dot25-ns"}),H({className:"w-100 pa3 ml3 b",children:q(()=>X?.value?"Update":"Add"),onTap:P})]})]})})})}),j0=V(({isOpen:X,habit:$,onClose:Q,onDone:Z})=>{return t({classNames:"bn w-30-ns",isOpen:X,onTapOutside:Q,content:J.Div({class:"pa3 f5",children:[J.Div({class:"mb3 b f4",children:G`Delete '${()=>$.value?.title}'?`}),J.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,J.Br({}),J.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),J.Div({class:"flex items-center justify-between f6",children:[H({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Q}),H({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{r1($.value.id),Z()}})]})]})})}),t1=V(({isOpen:X,habit:$,date:Q,showTitleInHeader:Z,onClose:W,onChange:z})=>{let{levels:Y,tracker:U,colorIndex:B}=x(q(()=>$.value)).props;return t({classNames:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:W,content:J.Div({class:"mnw5",children:[J.Div({class:"f5 b tc pa3",children:G`Change status ${()=>Z?.value?`of  '${$.value.title}'`:`for ${Q.value.toDateString()}`}`}),J.Div({class:"f5 mb1",children:J.For({subject:q(()=>Y.value.slice().reverse()||[]),map:(R,_)=>{let P=Y.value.length-1-_,j=G`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>j1(U.value,Q.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`;return J.Div({class:j,onclick:D(()=>z(P)),children:[p({classNames:`pa1 mr3 ba b ${P<1?"b--light-silver":"b--transparent"}`,colorIndex:B,level:P,totalLevels:Y.value.length,isRectangular:!0}),J.Span(R.name)]})}})})]})})}),e1=V(({classNames:X,links:$})=>{return J.Div({class:G`flex items-center justify-between pv3 bg-near-white ${X}`,children:J.For({subject:$,map:(Q)=>X5({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),X5=V(({classNames:X,label:$,icon:Q,isSelected:Z,href:W})=>{return J.Div({class:G`pointer noselect flex flex-column items-center justify-center pb2 ${()=>Z.value?"app-theme-color b":"black"} ${X}`,onclick:D(()=>Y1(W.value)),children:[T({size:22,iconName:Q}),J.Div({class:"f7",children:$})]})}),K5=V(({classNames:X,header:$,content:Q,navbarTop:Z,route:W})=>{return MX({classNames:X,header:$,content:Q,bottombar:J.Div({children:[J.If({subject:Z,isTruthy:Z}),e1({classNames:"nl3 nr3 ph4",links:q(()=>[{label:"Today",icon:"calendar_month",isSelected:W.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:W.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:W.value==="/settings/",href:"/settings/"}])})]})})}),N=V(({classNames:X,contentClassNames:$,title:Q,description:Z,hideDescription:W,children:z})=>{return J.Div({class:G`mt3 mb4 ${X}`,children:[J.Div({class:"mb2 dark-gray f4 b",children:Q}),J.If({subject:q(()=>Z?.value&&!W?.value),isTruthy:J.Div({class:"mb3 f6 silver fw5",children:G`${Z}`})}),J.Div({class:$,children:z})]})}),f5=V(({classNames:X,iconSize:$,selectedOptionIndex:Q,onChange:Z})=>{let W=E(!1),z=q(()=>CX[Q.value]),Y=(U)=>{Z(U),W.value=!1};return J.Div({class:X,children:[bX({classNames:"pointer",descending:q(()=>z.value.decending),iconName:q(()=>z.value.icon),size:q(()=>$?.value??20),onClick:()=>W.value=!0}),t({classNames:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:()=>W.value=!1,content:J.Div({children:[J.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),J.Div({class:"f5 mb1",children:J.For({subject:CX,map:(U,B)=>{let R=G`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>U.label===z.value.label?"bg-near-white black fw6":"gray fw5"}`;return J.Div({class:R,onclick:D(()=>Y(B)),children:[bX({classNames:"ml1 mr2",descending:U.decending,iconName:U.icon,size:20}),J.Span(U.label)]})}})})]})})]})}),bX=V(({classNames:X,descending:$,iconName:Q,size:Z,onClick:W})=>{return J.Span({class:G`flex items-center ${()=>W?"pointer":""} ${X}`,onclick:D(W),children:[T({className:"silver",size:q(()=>4*Z.value/5),iconName:q(()=>$.value?"arrow_upward":"arrow_downward")}),T({className:"",size:Z,iconName:Q})]})}),YX=E(""),L=E(J0()),{id:K0,title:vX,colorIndex:hX,levels:cX,milestones:UX,isStopped:$X}=x(L).props,b=E(!1),AX=E(!1),s=E(!1),qX=E({date:new Date,selectedLevelIndex:0}),QX=q(()=>{let X=L.value;if(!X)return[];let $=X.levels.map((z)=>0),Q=X.tracker.reduce((z,Y)=>{if(Y.level.code>-1)z[Y.level.code]=z[Y.level.code]?z[Y.level.code]+1:1;return z},$),Z=Q.reduce((z,Y)=>z+Y);return Q.map((z,Y)=>({level:X.levels[Y],count:z,weightage:z*(Y/(X.levels.length-1)),percent:Math.round(100*z/Z)}))}),GX=q(()=>W0(L.value,new Date(K0.value),new Date).percent),f0=q(()=>VX(UX.value,GX.value)),{icon:$5,label:Q5,color:Z5}=x(f0).props,ZX=q(()=>{let X=L.value;if(!X)return[];return T1(X)}),RX=()=>{let X=B1();if(!X){YX.value="Incorrect habit ID provided in the query params.";return}L.value=X},J5=()=>AX.value=!0,V0=()=>AX.value=!1,W5=()=>{V0(),history.back()},z5=(X)=>{if(!L.value)return;M1(L.value,X,qX.value.date),s.value=!1,RX()},Y5=()=>{m1(),RX(),window.addEventListener("pageshow",RX)},U5=F0({onMount:Y5,body:MX({classNames:"bg-white ph3",header:J.Div({class:"flex items-start justify-between",children:[J.Div({class:G`${()=>vX.value.length>22?"f2dot66":""}`,children:vX}),J.If({subject:$X,isFalsy:T({className:"mt1 mr1 ba b--silver bw1 br-100 pa1 noselect",size:18,iconName:"edit",onClick:()=>q1(K0.value)})})]}),content:J.Div({children:[j0({isOpen:AX,habit:L,onClose:V0,onDone:W5}),t1({isOpen:s,habit:L,date:x(qX).prop("date"),onClose:()=>s.value=!1,onChange:z5}),J.If({subject:YX,isTruthy:J.Div({class:"red",children:YX}),isFalsy:J.Div(J.If({subject:L,isFalsy:J.Div({class:"",children:"habit.."}),isTruthy:J.Div({children:[J.If({subject:$X,isTruthy:J.Div([J.Div({class:"red mb3",children:"Status: STOPPED PERMANENTLY"}),H({className:"pv2 ph3 nt2 mb4 red",onTap:J5,children:"Delete Permanently"})])}),N({classNames:"pb3",title:G`Completion status ${()=>b.value?"":`(target ${UX.value[0].percent}%)`}`,children:[J.Div({class:"mt3",children:J.For({subject:q(()=>QX.value.slice().reverse()),n:1/0,nthChild:J.Div({class:"flex items-center justify-between mt2 pt1 bt bw1 b--near-white b mid-gray",children:[J.Div({class:"flex items-center",children:[T({className:G`mr1 ${Z5}`,size:12,iconName:$5}),Q5]}),J.Div({class:"flex items-center",children:[q(()=>{let X=QX.value.reduce((Q,Z)=>Q+Z.count,0);return`${QX.value.reduce((Q,Z)=>Q+Z.weightage,0).toFixed(1)} / ${X}`}),J.Span({class:"ml1"}),J.Div(q(()=>` (${GX.value}%)`))]})]}),map:(X,$)=>J.Div({class:"flex items-center justify-between mb2",children:[J.Div({class:"flex items-center",children:[p({classNames:"pa1 mr2",colorIndex:hX,level:X.level.code,totalLevels:cX.value.length,isRectangular:!0}),J.Div(q(()=>`${X.level.name}`))]}),J.Div(q(()=>`${X.count} times (${X.percent}%)`))]})})}),J.If({subject:b,isTruthy:n1({classNames:"pt4 mt3 mb3",milestones:UX,achievedMilestone:f0,completionPercent:GX})}),H({className:"pa2 ph3 mt4 mb2",children:G`${()=>b.value?"Hide":"Show"} target goal status`,onTap:()=>b.value=!b.value})]}),N({title:"Tracker",children:[J.Div({class:"mh2 flex items-center justify-between",children:J.For({subject:Array(7).fill(0),map:(X,$)=>J.Div({class:"h2 w2 br-100 gray f7 flex items-center justify-center",children:X0($,1)})})}),J.Div({onmount:(X)=>X.scroll({top:X.scrollHeight-X.clientHeight}),class:"mxh5 mxh6-ns nt2 bb bw1 b--near-white mh2 overflow-y-scroll",children:[J.Div({class:G`absolute left-0 right-0 bg-to-top-white z-999 ${()=>ZX.value.length>4?"h3":""}`}),J.Div({children:J.For({subject:ZX,n:0,nthChild:J.Div({class:q(()=>ZX.value.length>4?"pv3 mt2":"pv2")}),map:(X)=>J.Div({class:"flex items-center h-60",children:[J.Div({class:"w-100 mb3 flex items-center justify-between",children:J.For({subject:X,map:($)=>{let Q=$.date.getDate(),Z=$.date.getMonth(),W=$0(Z,3),z=`${Q===1?Z===0?$.date.getFullYear().toString():W:Q}`;return p({classNames:"h2 w2 flex items-center justify-center f7",colorIndex:hX,level:$.level.code,totalLevels:cX.value.length||2,textContent:z,showText:$.level!==void 0,onClick:()=>{if($X.value)return;s.value=!0,qX.value={date:$.date,selectedLevelIndex:$.level.code}}})}})})]})})})]})]})]})}))})]}),bottombar:J.Div({class:"pb3",children:P0({})})})}),q5=()=>{k.start("mount"),oX.resetIdCounter(),U5(),k.start("run")};q5();
