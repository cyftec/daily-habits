var zX=(X)=>{let $=Object.entries(X).sort((J,Q)=>J[0].localeCompare(Q[0]));return $.forEach(([J,Q],Z)=>{if(Q&&typeof Q==="object"&&!Array.isArray(Q))$[Z]=[J,zX(Q)]}),Object.fromEntries($)},QX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},e=(X)=>{if(Array.isArray(X)){let $=[...X],J=[];return $.forEach((Q)=>{J.push(e(Q))}),J}if(QX(X)){let $={...X},J={};return Object.keys($).forEach((Q)=>{J[Q]=e($[Q])}),Object.freeze(J)}return X},m=(X)=>{if(Array.isArray(X)){let J=[...X],Q=[];return J.forEach((Z)=>{Q.push(m(Z))}),Q}if(QX(X)){let J={...X},Q={};return Object.keys(J).forEach((Z)=>{Q[Z]=m(J[Z])}),Q}return X},fX=(X,$="index")=>X.map((J,Q)=>({[$]:Q,value:J})),w0=(X,$)=>{let J=zX(X),Q=zX($),Z=Object.keys(J),q=Object.keys(Q);if(Z.length!==q.length)return!1;for(let W of Z)if(!q.includes(W)||!jX(J[W],Q[W]))return!1;return!0},N0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let J=0;J<X.length;J++)if(!jX(X[J],$[J]))return!1;return!0},jX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return N0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return w0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},T0=(X,$,J)=>{let Z=fX(m(X),"index");return fX(m($),"index").map((W)=>{let G="add",_=-1,U=W.value;return Z.some((B,K)=>{if(G=jX(B.value,W.value)?B.index===W.index?"idle":"shuffle":J&&B.value[J]!==void 0&&B.value[J]===W.value[J]?"update":"add",G!=="add")return _=B.index,Z.splice(K,1),!0;return!1}),{type:G,oldIndex:_,value:U}})},GX=null,VX=(X)=>GX=X,V=(X)=>{let $=e(X),J=new Set;return{type:"source-signal",get value(){if(GX)J.add(GX);return m($)},set value(Q){if(Q===$)return;if($=e(Q),!J.size)return;J.forEach((Z)=>{if(Z.canDisposeNow){J.delete(Z);return}Z()})}}},r=(X)=>{let $=X;return $.canDisposeNow=!1,$.dispose=()=>{$.canDisposeNow=!0},VX($),X(),VX(null),$},R=(X)=>{let $,J=V($),Q=r(()=>{$=X($),J.value=$});return{type:"derived-signal",get prevValue(){return $},get value(){return J.value},dispose(){Q.dispose()}}},L=(...X)=>{X.forEach(($)=>$.dispose())},z=(X)=>PX(X)?X.value:X,y=(X)=>["source-signal","derived-signal"].includes(X?.type),cX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((J)=>typeof X?.value===J)),PX=(X)=>y(X)||cX(X),mX=(X)=>cX(X,["string"]),pX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),D=(X,...$)=>{return R(()=>{let J=$.map((Q)=>z(Q));return X(...J)})},H=(X)=>{let $=typeof X==="function"?X:()=>z(X);return{...{get truthy(){return R(()=>!!$())},get falsy(){return R(()=>!$())},get truthyFalsyPair(){return R(()=>{let Q=!!$();return[Q,!Q]})},ternary:(Q,Z)=>R(()=>{return $()?z(Q):z(Z)})},or:(Q)=>H(()=>{return!!($()||z(Q))}),orNot:(Q)=>H(()=>{return!!($()||!z(Q))}),and:(Q)=>H(()=>{return!!($()&&z(Q))}),andNot:(Q)=>H(()=>{return!!($()&&!z(Q))}),equals:(Q)=>H(()=>{return $()===z(Q)}),notEquals:(Q)=>H(()=>{return $()!==z(Q)}),orBothEqual:(Q,Z)=>H(()=>{let q=$(),W=z(Q)===z(Z);return!!(q||W)}),orBothUnequal:(Q,Z)=>H(()=>{let q=$(),W=z(Q)!==z(Z);return!!(q||W)}),andBothEqual:(Q,Z)=>H(()=>{let q=$(),W=z(Q)===z(Z);return!!(q&&W)}),andBothUnequal:(Q,Z)=>H(()=>{let q=$(),W=z(Q)!==z(Z);return!!(q&&W)}),orThisIsLT:(Q,Z)=>H(()=>{let q=$(),W=z(Q)<z(Z);return!!(q||W)}),orThisIsLTE:(Q,Z)=>H(()=>{let q=$(),W=z(Q)<=z(Z);return!!(q||W)}),orThisIsGT:(Q,Z)=>H(()=>{let q=$(),W=z(Q)>z(Z);return!!(q||W)}),orThisIsGTE:(Q,Z)=>H(()=>{let q=$(),W=z(Q)>=z(Z);return!!(q||W)}),andThisIsLT:(Q,Z)=>H(()=>{let q=$(),W=z(Q)<z(Z);return!!(q&&W)}),andThisIsLTE:(Q,Z)=>H(()=>{let q=$(),W=z(Q)<=z(Z);return!!(q&&W)}),andThisIsGT:(Q,Z)=>H(()=>{let q=$(),W=z(Q)>z(Z);return!!(q&&W)}),andThisIsGTE:(Q,Z)=>H(()=>{let q=$(),W=z(Q)>=z(Z);return!!(q&&W)})}},h=(X)=>{let $=typeof X==="function"?X:()=>z(X);return{...H(X),get result(){return R($)},add:(J)=>h(()=>{return $()+z(J)}),sub:(J)=>h(()=>{return $()-z(J)}),mul:(J)=>h(()=>{return $()*z(J)}),div:(J)=>h(()=>{return $()/z(J)}),mod:(J)=>h(()=>{return $()%z(J)}),pow:(J)=>h(()=>{return $()**z(J)}),isBetween:(J,Q,Z=!0,q=!0)=>H(()=>{let W=$(),G=z(J),_=z(Q),U=Z?W>=G:W>G,B=q?W<=_:W<_;return U&&B}),isLT:(J)=>H(()=>$()<z(J)),isLTE:(J)=>H(()=>$()<=z(J)),isGT:(J)=>H(()=>$()>z(J)),isGTE:(J)=>H(()=>$()>=z(J))}},M0=(X)=>{let $=typeof X==="function"?X:()=>z(X);return{...H(X),lengthBetween:(J,Q,Z=!0,q=!0)=>H(()=>{let G=$().length,_=z(J),U=z(Q),B=Z?G>=_:G>_,K=q?G<=U:G<U;return B&&K}),lengthEquals:(J)=>H(()=>{return $().length===z(J)}),lengthNotEquals:(J)=>H(()=>{return $().length!==z(J)}),lengthLT:(J)=>H(()=>{return $().length<z(J)}),lengthLTE:(J)=>H(()=>{return $().length<=z(J)}),lengthGT:(J)=>H(()=>{return $().length>z(J)}),lengthGTE:(J)=>H(()=>{return $().length>=z(J)})}},M=(X)=>{let J=(typeof X==="function"?X:()=>z(X))();return typeof J==="number"?h(X):typeof J==="string"||Array.isArray(J)?M0(X):H(X)},HX=(...X)=>X.map(($)=>z($)),o=(X)=>{return{get string(){return R(()=>{let $=z(X);return $===void 0||$===null?void 0:$.toString()})},or:($)=>R(()=>z(X)||z($))}},E0=(X)=>{let J=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce((Q,Z)=>{let q=(...W)=>{return R(()=>{let G=HX(...W);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...o(X),...J,concat:(Q)=>R(()=>z(X).concat(z(Q))),every:(Q)=>R(()=>z(X).every(Q)),filter:(Q)=>R(()=>z(X).filter(Q)),find:(Q)=>R(()=>z(X).find(Q)),findIndex:(Q)=>R(()=>z(X).findIndex(Q)),findLast:(Q)=>R(()=>z(X).findLast(Q)),findLastIndex:(Q)=>R(()=>z(X).findLastIndex(Q)),get lastItem(){return R(()=>{return m(z(X)).pop()})},get length(){return R(()=>z(X).length)},map:(Q)=>R(()=>z(X).map(Q)),partition:(Q)=>{let Z=R(()=>z(X).filter(Q)),q=R(()=>z(X).filter((W,G,_)=>!Q(W,G,_)));return[Z,q]},reduce:(Q,Z)=>R(()=>z(X).reduce(Q,Z)),reduceRight:(Q,Z)=>R(()=>z(X).reduceRight(Q,Z)),get reversed(){return R(()=>z(X).toReversed())},some:(Q)=>R(()=>z(X).every(Q)),toSorted:(Q)=>R(()=>z(X).toSorted(Q)),toSpliced:(Q,Z,...q)=>R(()=>z(X).toSpliced(z(Q),z(Z),...q))}},O0=(X)=>{let J=["toExponential","toFixed","toPrecision"].reduce((Q,Z)=>{let q=(...W)=>{return R(()=>{let G=HX(...W);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...o(X),...J,toConfined:(Q,Z)=>R(()=>z(X)<z(Q)?z(Q):z(X)>z(Z)?z(Z):z(X)),toLocaleString:(Q,Z)=>R(()=>z(X).toLocaleString(z(Q),Z))}},k0=(X)=>{if(!QX(z(X)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...o(X),prop:($)=>R(()=>z(X)[$]),get props(){return Object.keys(z(X)).reduce((J,Q)=>{let Z=Q;return J[Z]=this.prop(Z),J},{})},get keys(){return R(()=>Object.keys(z(X)))}}},dX=(X)=>{let J=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce((Q,Z)=>{let q=(...W)=>{return R(()=>{let G=HX(...W);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...o(X),...J,get length(){return R(()=>z(X).length)},get lowercase(){return R(()=>z(X).toLowerCase())},get Sentencecase(){return R(()=>{let Q=z(X);return Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase()})},get TitleCase(){return R(()=>z(X).toLowerCase().replace(/\b\w/g,(Q)=>Q.toUpperCase()))},get UPPERCASE(){return R(()=>z(X).toUpperCase())},localeCompare:(Q,Z,q)=>R(()=>z(X).localeCompare(z(Q),z(Z),q)),normalize:(Q)=>R(()=>z(X).normalize(z(Q))),replace:(Q,Z)=>R(()=>z(X).replace(z(Q),z(Z))),replaceAll:(Q,Z)=>R(()=>z(X).replaceAll(z(Q),z(Z))),search:(Q)=>R(()=>z(X).search(Q)),split:(Q,Z)=>R(()=>{let q=Q instanceof RegExp?Q:z(Q);return z(X).split(q,z(Z))}),toLocaleLowerCase:(Q)=>R(()=>z(X).toLocaleLowerCase(z(Q))),toLocaleUpperCase:(Q)=>R(()=>z(X).toLocaleUpperCase(z(Q)))}},D0=V("dksjfbksjnd"),H4=dX(D0).split(""),w=(X)=>{return typeof z(X)==="number"?O0(X):typeof z(X)==="string"?dX(X):Array.isArray(z(X))?E0(X):QX(z(X))?k0(X):o(X)},F=(X,...$)=>R(()=>{return X.reduce((J,Q,Z)=>{let q,W=$[Z];if(typeof W==="function")q=W()??"";else if(PX(W))q=W.value??"";else q=W??"";return`${J}${Q}${q.toString()}`},"")}),uX=["onmount","onunmount"],rX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],f0=[...rX,...uX],V0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],l,oX=(X)=>{if(!l)l=document.createElement("textarea");return l.innerHTML=X,l.value},S0=(X)=>{try{return decodeURIComponent(X)}catch{return X}},I0=(X)=>{return X.replace(/\\u[\dA-Fa-f]{4}/g,($)=>String.fromCharCode(parseInt($.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,($)=>String.fromCharCode(parseInt($.slice(2),16)))},y0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},iX=y0(),f={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},sX=(X,$,J)=>{let Q=X;Q=oX(Q),Q=S0(Q),Q=I0(Q);let Z=Q.trim().toLowerCase();for(let q of $)if(q.test(Z))throw J;return X},g0=(X)=>sX(X,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),C0=(X)=>sX(X,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),b0=(X,$)=>{if(X==="href"){if(typeof $==="boolean")throw"The value of 'href' attribute should not be a boolean";return g0($||"")}if(X==="style"){if(typeof $==="boolean")throw"The value of 'style' attribute should not be a boolean";return C0($||"")}return $},XX=(X)=>Array.isArray(X),$X=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,p=(X)=>X===void 0||typeof X==="string"||typeof X==="function"&&X.isElementGetter,AX=(X)=>y(X)&&p(X.value),h0=(X)=>p(X)||AX(X),nX=(X)=>{return y(X)&&(p(X.value)||XX(X.value)&&X.value.every(($)=>p($)))},lX=(X)=>{return!y(X)&&(mX(X)||pX(X)||p(X)||XX(X)&&X.every(($)=>h0($)))},LX=(X)=>{return nX(X)||lX(X)},SX=!1,v0={},c={},c0=globalThis.MutationObserver,m0=new c0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((J)=>{if($X(J)){let Q=J,Z=Q.elementId;if(c[Z])delete c[Z];else v0[Z]=Q.tagName}}),$.removedNodes.forEach((J)=>{if($X(J)){let Q=J,Z=Q.elementId,q=Q.unmountListener;if(q)c[Z]={element:Q,unmountListener:q}}})}),Object.entries(c).forEach(([$,J])=>{let{element:Q,unmountListener:Z}=J;aX(Q,Z)})}),aX=(X,$)=>{if(!$X(X))return;let J=X.children;for(let Q=0;Q<J.length;Q++){let Z=J[Q];aX(Z,Z.unmountListener)}if($&&$(X),c[X.elementId])delete c[X.elementId]},p0=()=>{if(!SX&&!f.currentIs("build"))m0.observe(document.body,{childList:!0,subtree:!0}),SX=!0},tX=(X,$)=>f0.includes(X)&&$===void 0,eX=(X,$)=>rX.includes(X)&&typeof $==="function",X0=(X,$)=>uX.includes(X)&&typeof $==="function",d0=(X,$)=>tX(X,$)||eX(X,$)||X0(X,$),u0=(X,$)=>{Object.entries($).forEach(([J,Q])=>{if(tX(J,Q));else if(eX(J,Q)){let Z=J.slice(2);X.addEventListener(Z,(q)=>{if(Z==="keypress")q.preventDefault();Q(q)})}else if(X0(J,Q)){if(J==="onmount"&&!f.currentIs("build")){let Z=Q;setTimeout(()=>Z(X),0)}if(J==="onunmount"){p0();let Z=X.unmountListener;X.unmountListener=(q)=>{if(Q(q),typeof Z==="function")Z(q)}}}else console.error(`Invalid event key: ${J} for element with tagName: ${X.tagName}`)})},IX=(X,$,J)=>{let Q=PX(J)?J.value:J,Z=b0($,Q);if(typeof Z==="boolean")if(Z)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=Z||"";else X.setAttribute($,Z||"")},r0=(X,$)=>{let J={};Object.entries($).forEach((Z)=>{let[q,W]=Z;if(y(W))J[q]=W;IX(X,q,W)});let Q=r(()=>{Object.entries(J).forEach((Z)=>{let[q,W]=Z,G=W.value;if(!f.currentIs("run"))return;IX(X,q,G)})});X.effects.push(Q)},a=(X)=>{if(AX(X)){let $=X.value;return a($)}if(!X||typeof X==="string")return document.createTextNode(oX(X||""));if(p(X)){let $=X();if(!$X($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},o0=(X,$)=>{if(!$)return;if(nX($)){let J=r(()=>{let Z=$.value,q=XX(Z)?Z:[Z];q.forEach((G,_)=>{let U=X.childNodes[_],B=a(G);if(U&&B)X.replaceChild(B,U);else if(B)X.appendChild(B);else console.error(`No child found for node with tagName: ${X.tagName}`)});let W=q.length;while(W<X.childNodes.length){let G=X.childNodes[W];if(G)X.removeChild(G)}});X.effects.push(J)}if(lX($)){let J=mX($)?[$.value]:pX($)?$.value:XX($)?$:[$],Q=[];if(J.forEach((Z,q)=>{if(AX(Z))Q.push({index:q,childSignal:Z});let W=a(Z),G=X.childNodes[q];if(G&&W)X.replaceChild(W,G);else if(!G&&W)X.appendChild(W);else console.error(`No child found for node with tagName: ${X.tagName}`)}),Q.length)Q.forEach(({index:Z,childSignal:q})=>{let W=r(()=>{if(!q.value)return;if(!f.currentIs("run"))return;let G=a(q.value),_=X.childNodes[Z];if(_&&G)X.replaceChild(G,_);else if(!_&&G)X.appendChild(G);else console.error(`No child found for node with tagName: ${X.tagName}`)});X.effects.push(W)})}},i0=(X,$)=>{let J=void 0,Q={},Z={};return Object.entries(X).forEach(([q,W])=>{if(q==="children")if(LX(W))J=W;else if(W===void 0)J=W;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(W)}`);else if(d0(q,W))Q[q]=W;else Z[q]=W}),{children:J,eventProps:Q,attributeProps:Z}},s0=(X,$)=>{let J=()=>{let Q=iX.getNewId(),Z=f.currentIs("mount")?document.querySelector(`[data-elem-id="${Q}"]`):document.createElement(X);Z.elementId=Q,Z.effects=[],Z.unmountListener=()=>{Z.effects.forEach((G)=>G.dispose())};let q=LX($)?{children:$}:$;if(!f.currentIs("run"))q["data-elem-id"]=Z.elementId.toString();let W=i0(q,Z.tagName);if(u0(Z,W.eventProps),r0(Z,W.attributeProps),o0(Z,W.children),!f.currentIs("build"))Z.removeAttribute("data-elem-id");return Z};return J.isElementGetter=!0,J},yX=(X,$,J)=>{let Q=V($),Z=V(X),q=J(R(()=>Z.value),R(()=>Q.value)),W,G,_=!1;if(q?.isElementGetter)W=()=>{if(_&&G)return G;return G=q(),_=!0,G},W.isElementGetter=!0;else if(!q||typeof q==="string")W=q||"";else throw`One of the child, ${q} passed in ForElement is invalid.`;return{indexSignal:Q,itemSignal:Z,mappedChild:W}},WX=(X,$,J)=>{if($!==void 0&&$>=0&&J){let Q=$>X.length?X.length:$;X.splice(Q,0,J)}return X},n0=({subject:X,itemKey:$,map:J,n:Q,nthChild:Z})=>{if(Z&&Q===void 0||Q!==void 0&&Q>-1&&!Z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");if(!y(X))return WX(z(X).map(J),Q,Z);let q=R(()=>{let j=z(X);return Array.isArray(j)?j:[]});if(!$)return R(()=>WX(q.value.map(J),Q,Z));let W=Z;if(Z&&typeof Z!=="string"){let j=Z(),x=()=>j;x.isElementGetter=!0,W=x}let G=q.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let _=null,U=R((j)=>{return _=j||_,q.value}),B=R((j)=>{if(!j||!_)return U.value.map((T,N)=>yX(T,N,J));return T0(_,U.value,$).map((A,T)=>{let N=(j||[])[A.oldIndex];if(console.assert(A.type==="add"&&A.oldIndex===-1&&!N||A.oldIndex>-1&&!!N,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),N){if(A.type==="shuffle")N.indexSignal.value=T;if(A.type==="update")N.indexSignal.value=T,N.itemSignal.value={...A.value};return N}return yX(A.value,T,J)})});return R(()=>WX(B.value.map((j)=>j.mappedChild),Q,W))},l0=({subject:X,isTruthy:$,isFalsy:J})=>{let Q=Y.Span({style:"display: none;"}),Z=()=>(z(X)?$:J)||Q;return y(X)?R(Z):Z()},a0=({subject:X,caseMatcher:$,defaultCase:J,cases:Q})=>{let Z=()=>{let q=z(X),W=void 0;for(let[G,_]of Object.entries(Q))if($&&$(X,G)||q===G){W=_;break}return W||J||Y.Span({style:"display: none;"})};return y(X)?R(Z):Z()},t0=V0.reduce((X,$)=>{let J=$.split("").map((Z,q)=>!q?Z.toUpperCase():Z).join(""),Q=(Z)=>s0($,Z);return X[J]=Q,X},{}),e0={For:n0,If:l0,Switch:a0},Y={...t0,...e0},P=(X)=>($)=>{for(let Q of Object.keys($))if($[Q]===void 0)delete $[Q];let J=Object.entries($).reduce((Q,Z)=>{let[q,W]=Z,G=typeof W==="string",_=Array.isArray(W)&&W.every((B)=>typeof B==="string"),U=y(W)||typeof W==="function"?W:G||_?{type:"non-signal",get value(){return z(W)}}:LX(W)?W:{type:"non-signal",get value(){return z(W)}};return Q[q]=U,Q},{});return X(J)},X1=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],$1=[1,1,1,1,1,1,1],Q1=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],J1=["Not started","Completed"],Z1=[70,60,45],gX={id:"analytics",lastInteraction:new Date().getTime()},CX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var _X=86400000,q1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W1=["January","February","March","April","May","June","July","August","September","October","November","December"],$0=(X,$)=>q1[X].substring(0,$),Q0=(X,$)=>W1[X].substring(0,$),xX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},C=(X)=>xX(X).getTime(),i=(X,$)=>C(X)===C($),Y1=(X,$)=>{let J=$||new Date;return C(X)>C(J)},J0=(X,$)=>{let J=C(X),Q=C($);return Math.round((Q-J)/_X)},z1=(X)=>J0(new Date,X),Z0=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),G1=(X)=>{let $=new Date;return Array(X).fill(0).map((J,Q)=>new Date($.getFullYear(),$.getMonth()-Q,1)).reverse()},_1=(X)=>{let $=X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()-$)},R1=(X)=>{let $=6-X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()+$)},U1=(X,$)=>{let J=C(X),Q=C($);if(J===Q)return[xX(new Date(J))];let Z=J<Q?J:Q,W=((J<Q?Q:J)-Z)/_X;return Array(W+1).fill(0).map((G,_)=>new Date(Z+_*_X))},B1=(X)=>{if(X<1)throw"";let $=new Date,J=$.getFullYear(),Q=$.getMonth(),Z=new Date(J,Q-(X-1),1),q=new Date(J,Q+1,0);return{startDate:Z,endDate:q}},wX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},F1=(X)=>location.href=X,K1=()=>location.href=wX.HABITS.NEW.href,j1=(X)=>location.href=`${wX.HABITS.HABIT.href}?id=${X}`,P1=(X)=>location.href=`${wX.HABITS.HABIT.EDIT.href}?id=${X}`,H1=(X)=>{if(!f.currentIs("run"))return"";let $=window.location.search;return new URLSearchParams($).get(X)||""},A1=1.6181,L1=()=>{let $=+H1("id");if(isNaN($)||!$)return;try{return EX($)}catch(J){return}},x1=(X)=>Q1.find(($)=>$.code===X),q0=(X,$)=>{return X<0?x1(-1):{isMaxLevel:X===$.length-1,name:$[X],code:X}},w1=(X)=>({key:X.getTime(),level:q0(-1,[]),date:X}),N1=(X,$,J)=>({key:J.getTime(),level:q0(X,$),date:J}),W0=(X,$)=>X.find((J)=>i(J.date,$)),Y0=(X)=>{let $=xX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((J,Q)=>({isMaxLevel:Q===X.levels.length-1,name:J,code:Q})),tracker:X.tracker.map((J,Q)=>N1(J,X.levels,Z0($,Q))),milestones:E1(X.milestones)}},T1=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,J)=>$.level.code),milestones:O1(X.milestones)}},M1=()=>{let $={id:new Date().getTime(),title:"",frequency:$1,colorIndex:0,levels:J1,tracker:[],milestones:Z1,pauses:[],isStopped:!1};return Y0($)},E1=(X)=>[{label:"Successful",upperLimit:100,percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:X[0],percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:X[1],percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:X[2],percent:0,icon:"close",color:"red"}],O1=(X)=>X.filter(($)=>!!$.percent).map(($)=>$.percent),z0=(X,$)=>{let J=X[0];for(let Q=0;Q<X.length;Q++)if(J=X[Q],J.percent<=$)break;return{label:J.label,icon:J.icon,color:J.color}},NX=(X,$,J)=>{let Q=TX(X.tracker,$,J),Z=X.levels.length-1,q=0,W=0,G=0,_=0,U=0,B=0;return Q.forEach((K,j)=>{if(q+=K.level.code>-1?1:0,W+=K.level.code>0?1:0,G+=K.level.code>0?K.level.code:0,j===Q.length-1)return;let A=K.level.code<1;B=A?B+1:0;let N=100*((K.level.code>0?K.level.code:0)/(X.levels.length-1));_=Math.round(N)>50?_+1:0,U=A?0:U+1}),{title:X.title,aceStreak:_,followStreak:U,missed:B,percent:Math.round(100*(G/(q*Z))),totalDays:q,workingDays:W}},k1=(X,$,J,Q=!1)=>{let Z=X1[J],q=X/($-1),G=Math.trunc(Math.pow(q,A1)*255).toString(16),_=G.length===1?`0${G}`:G,U=X<0||_==="0"?"transparent":`${Z}${_}`,B=Q?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:U,fontColor:B,peakBackgroundColor:Z,levelPercent:Math.round(q*100)}},D1=(X,$,J)=>{let Q=EX(X.id),Z=Q.tracker.map((W)=>{if(i(W.date,J))return{...W,level:{...W.level,code:$}};return W}),q={...Q,tracker:Z};o1(q)},f1=(X,$)=>{let J=[];for(let Q of $)if(!X.some((q)=>{if(i(q.date,Q))return J.push(q),!0;return!1}))J.push(w1(Q));return J},TX=(X,$,J)=>{let Q=U1($,J);return f1(X,Q)},V1=(X)=>{let $=_1(new Date(X.id)),J=R1(new Date),Q=TX(X.tracker,$,J);return{...X,tracker:Q}},G0=(X)=>{let $=V1(X),J=[];for(let Q=0;Q<$.tracker.length;Q++){let Z=Math.floor(Q/7);if(!J[Z])J[Z]=[];J[Z][Q%7]=$.tracker[Q]}return J.reverse(),J},S1=(X)=>{let $=new Date,J=new Date(X),Q=-z1(J);if(Q===0)return"Just created this habit today";if(Q===1)return"This habit started from yesterday";if(Q>1&&Q<5)return`Started following this ${Q} back`;let{aceStreak:Z,followStreak:q,missed:W}=NX(EX(X),Z0($,-Q),$);if(Z>=12)return`Nailed ${Z} days in a row. Woah! Don't stop.`;if(Z>=4)return`Doing good for ${Z} days straight! Keep it up.`;if(q>=15)return`Didn't miss for ${q} days in a row. Kudos!`;if(q>=4)return`${q} days in a row. Nice! keep going.`;if(W)`Missed ${W} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},I1=(X)=>{let $=X.levels.map((q)=>0),J=X.tracker.reduce((q,W)=>{if(W.level.code>-1)q[W.level.code]=q[W.level.code]?q[W.level.code]+1:1;return q},$),Q=J.reduce((q,W)=>q+W),Z=J.map((q,W)=>({level:X.levels[W],count:q,weightage:q*(W/(X.levels.length-1)),percent:Math.round(100*q/Q)}));return Z.reverse(),Z},y1=(X)=>{return`${X.reduce(($,J)=>$+J.weightage,0).toFixed(1)} / ${X.reduce(($,J)=>$+J.count,0)}`},g1=(X)=>[{label:"Today",icon:"calendar_month",isSelected:X==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:X==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:X==="/settings/",href:"/settings/"}],C1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},_0=(X,$,J)=>{let Q=JSON.parse(X||"{}"),Z=Q&&typeof Q==="object",q=Q[$];if(!Z||!(J?q===J:!!q))return;return Q},E=(X)=>{return(...$)=>{return C1(),u1(new Date),X&&X(...$)}},R0="analytics",b1="id",h1="analytics",U0=(X)=>{localStorage.setItem(R0,JSON.stringify(X))},v1=()=>{if(!f.currentIs("run"))return gX;let X=()=>{let Q=localStorage.getItem(R0);return _0(Q,b1,h1)};if(!X())U0(gX);let J=X();if(!J)throw"Error fetching analytics";return J},c1=()=>{let X=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;X.push($)}return X},m1=(X)=>X.startsWith("h."),MX=(X)=>`h.${X}`,B0=(X)=>{if(!m1(X))return;let $=localStorage.getItem(X),J=_0($,"title");if(!J)return;return J},p1=()=>{if(!f.currentIs("run"))return[];let X=[];for(let $ of c1()){let J=B0($);if(!J)continue;X.push(J)}return X},F0=(X)=>{let $=MX(X.id);localStorage.setItem($,JSON.stringify(X))},d1=(X)=>{let $=MX(X);localStorage.removeItem($)},u1=(X)=>{let $=v1();U0({...$,lastInteraction:X.getTime()})},EX=(X)=>{let $=MX(X),J=B0($);if(!J)throw`Error fetching habit with id '${X}' from storage`;return Y0(J)},r1=()=>{let X=p1();for(let $ of X){let J=new Date($.id),Q=new Date,Z=J0(J,Q),q=[...$.tracker];if(Z+2<=q.length)continue;let W=q.length-1,G=new Date(J.getFullYear(),J.getMonth(),J.getDate()+W),_=G.getDay();if(i(Q,G)){let U=q[W];q[W]=$.frequency[_]?U<0?0:U:-1}for(let U=q.length;U<=Z;U++){let K=new Date(J.getFullYear(),J.getMonth(),J.getDate()+U).getDay();q[U]=$.frequency[K]?0:-1}$.tracker=q,F0($)}},o1=(X)=>{let $=T1(X);F0($)},i1=(X)=>d1(X),A4=P(({cssClasses:X,hideRemove:$,hideAdd:J,onRemove:Q,onAdd:Z})=>{let q=M($).and(J).ternary("bn","ba"),W=F`br3 pb1 f4 bw1 b--light-silver dark-gray ${q} ${X}`,G=M(J).ternary("","br"),_=F`pointer ph2 pb1 bw1 b--light-silver ${G}`,U=()=>L(q,W,G,_);return Y.Span({onunmount:U,class:W,children:[Y.If({subject:$,isFalsy:Y.Span({class:_,onclick:E(Q),children:"-"})}),Y.If({subject:J,isFalsy:Y.Span({class:"pointer ph2 pb1",onclick:E(Z),children:"+"})})]})}),b=P(({cssClasses:X,onTap:$,onUnmount:J,children:Q})=>{let Z=F`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,q=()=>{if(L(Z),J)J()};return Y.Button({onunmount:q,class:Z,onclick:E(()=>$()),children:Q})}),L4=P(({cssClasses:X})=>{let $=F`bb b--light-gray ${X}`;return Y.Div({onunmount:()=>L($),class:$})}),I=P(({cssClasses:X,size:$,onClick:J,iconName:Q,title:Z})=>{let W=F`material-symbols-outlined ${J?"pointer":""} ${X}`,G=w($).or(16),_=F`font-size: ${G}px`;return Y.Span({onunmount:()=>L(W,G,_),class:W,style:_,onclick:E(J),children:Q,title:Z})}),x4=P(({cssClasses:X,href:$,target:J,onClick:Q,children:Z})=>{let q=M($).or(Q).ternary("pointer underline",""),W=F`noselect ${q} ${X}`;return Y.A({onunmount:()=>L(q,W),...$?{href:$}:{},class:W,target:J,onclick:E(Q),children:Z})}),JX=P(({cssClasses:X,isOpen:$,content:J,onTapOutside:Q,onUnmount:Z})=>{let q=F`pa0 br3 ${X}`,W=(_)=>{setTimeout(()=>r(()=>{if($.value)_.showModal();else _.close()}))},G=()=>{if(L(q),Z)Z()};return Y.Dialog({onmount:W,onunmount:G,onclick:E(Q),class:q,children:[Y.Div({onclick:(_)=>_.stopPropagation(),children:J})]})}),w4=P(({cssClasses:X,placeholder:$,num:J,onchange:Q})=>{let Z=w(J).string,q=(W)=>{let G=W.target.value,_=Number.parseFloat(Number.parseFloat(G||"0").toFixed(2));Q(_)};return Y.Input({onunmount:()=>L(Z),class:X,type:"number",placeholder:$,value:Z,onchange:q})}),s1=P(({progress:X,cssClasses:$})=>{let J=F`br-pill bg-moon-gray ${$}`,Q=F`width: ${w(X).toConfined(0,100)}%;`;return Y.Div({onunmount:()=>L(J,Q),class:J,children:Y.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),K0=P(({cssClasses:X,header:$,content:J,bottombar:Q})=>{let Z=F`w6-ns ${X}`;return Y.Div({onunmount:()=>L(Z),class:"flex-ns justify-center-ns",children:Y.Div({class:Z,children:[Y.If({subject:$,isTruthy:Y.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),J,Y.Div({class:"pv6 mt5"}),Y.If({subject:Q,isTruthy:Y.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:Q})})]})})}),N4=P(({cssClasses:X,tabs:$,onTabChange:J})=>{let Q=F`bg-white br3 ${X}`,Z=w($).map((q)=>{return{tabClasses:`
                w-100 br3 pv2dot5 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${q.isSelected?`b--light-silver b black ${q.classes||""}`:"pointer b--transparent b--hover-black silver pointer"} ${q.classes}`,label:q.label}});return Y.Div({onunmount:()=>L(Q,Z),class:Q,children:Y.Div({class:"flex items-center justify-between pa1",children:Y.For({subject:Z,itemKey:"label",map:(q,W)=>{let{tabClasses:G,label:_}=w(q).props;return Y.Span({onunmount:()=>L(G,_),onclick:E(()=>J(W.value)),class:G,children:_})}})})})}),T4=P(({cssClasses:X,placeholder:$,disabled:J,text:Q,onmount:Z,onchange:q,onkeydown:W,onfocus:G,onblur:_})=>{let U,B=M(J).truthy,K=(A)=>{if(U=A,Z)Z(A)},j=(A)=>{let T=A.target.value;if(q)q(T)},x=(A)=>{let T=A.key.length===1?U.value+A.key:A.key==="Backspace"?U.value.slice(0,-1):U.value,N={key:A.key,text:T};if(W)W(N)};return Y.Input({onmount:K,onunmount:()=>L(B),class:X,type:"text",placeholder:$,disabled:B,value:Q,onchange:j,onkeydown:x,onfocus:G,onblur:_})}),M4=P(({cssClasses:X,isOn:$,onToggle:J})=>{let Q=F`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,Z="br-100 ba bw1 b--hover-black pa1",q=F`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--transparent":"b--moon-gray bg-moon-gray"}`,W=F`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--mid-gray bg-mid-gray":"b--transparent"}`;return Y.Div({onunmount:()=>L(Q,q,W),class:Q,onclick:E(J),children:[Y.Div({class:q}),Y.Div({class:"pa05"}),Y.Div({class:W})]})}),n1=P(({cssClasses:X,justifyCssClasses:$,label:J})=>{let Q=w($).or("justify-end"),Z=w(J).or("Add habit"),q=F`w-100 flex ${Q} ${X}`;return Y.Div({onunmount:()=>L(Q,Z,q),class:q,children:b({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[I({cssClasses:"nl1 mr1",size:22,iconName:"add"}),Z],onTap:K1})})}),s=P(({cssClasses:X,dotCssClasses:$,colorIndex:J,level:Q,totalLevels:Z,showText:q,textContent:W,icon:G,iconSize:_,isRectangular:U,showHeight:B,onClick:K})=>{let j=M(U).ternary("br0","br-100"),x=M(Q).isLT(0).ternary("bg-transparent","bg-light-gray"),A=D(k1,Q,Z,J,q),{peakBackgroundColor:T,backgroundColor:N,fontColor:O,levelPercent:k}=w(A).props,g=w(W).or("·"),v=M(B).and(G).andThisIsGT(k,99).truthy,ZX=F`pointer relative overflow-hidden ${j} ${x} ${X}`,n=F`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,qX=F`
      background-color: ${T};
      color: white;
      height: ${k}%;`,kX=F`flex items-center justify-around absolute absolute--fill ${$}`,DX=F`
      background-color: ${N};
      color: ${O};`,L0=()=>{if(K&&Q.value>=0)K()},x0=()=>{L(j,x,A,T,N,O,k,g,v,ZX,n,qX,kX,DX)};return Y.Span({onunmount:x0,class:ZX,onclick:E(L0),children:Y.If({subject:B,isTruthy:Y.Span({class:n,style:qX,children:Y.If({subject:v,isTruthy:I({iconName:G,size:_})})}),isFalsy:Y.Span({class:kX,style:DX,children:Y.If({subject:G,isTruthy:I({iconName:G,size:_}),isFalsy:Y.Span(g)})})})})}),E4=P(({habit:X,day:$,onColorDotClick:J})=>{let{id:Q,title:Z,colorIndex:q,levels:W,tracker:G}=w(X).props,_=w(W).length,U=R(()=>{return W0(G.value,$.value).level.code}),B=M(U).isGT(0).truthy,K=M(U).isLT(1).ternary("b--light-silver","b--transparent"),j=F`pa3 mr3 ba b ${K}`,x=()=>L(Q,Z,q,W,G,_,U,B,K);return Y.Div({onunmount:x,class:"mt4 flex items-center",children:[s({cssClasses:j,colorIndex:q,level:U,totalLevels:_,icon:"check",iconSize:22,showText:B,showHeight:!0,onClick:J}),Y.Div({class:"pointer",onclick:E(()=>j1(Q.value)),children:[Y.Div({class:"f5 fw6 f4-ns fw4-ns",children:Z}),Y.Div({class:"f6 light-silver pt05",children:S1(Q.value)})]})]})}),l1=P(({cssClasses:X})=>{let $=F`pa3 flex items-center ${X}`;return b({onUnmount:()=>L($),cssClasses:$,children:[I({iconName:"arrow_back"}),Y.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),a1=P(({cssClasses:X,milestones:$,achievedMilestone:J,completionPercent:Q})=>{let Z=w(J).prop("color"),q=D((j)=>j>53?"Average completion":j>43?"Avg completion":j>35?"Completion":"",Q),W=F`center ${X}`,G=F`nt3dot6 h1dot2 bw1 relative br b--${Z}`,_=F`width: ${Q}%;`,U=F`absolute right-0 pr1 b f6 ${Z}`,B=F`${Q}%`,K=()=>L(Z,q,W,G,_,U,B);return Y.Div({onunmount:K,class:W,children:[Y.Div({class:"pb2 w-100 relative",children:Y.For({subject:$,map:(j,x)=>{return t1({colorCss:`bg-${j.color}`,percent:j.upperLimit,hideUpperLimit:x===0})}})}),Y.Div({class:G,style:_,children:Y.Div({class:"relative flex items-start nt1 justify-between f7 mid-gray",children:[Y.Div(q),Y.Div({class:U,children:B})]})})]})}),t1=P(({colorCss:X,hideUpperLimit:$,percent:J})=>{let Q=M($).ternary("",F`${J}%`),Z=F`width: ${J}%;`,q=F`absolute absolute-fill h0dot15 w-100 ${X}`;return Y.Div({onunmount:()=>L(Q,Z,q),class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:Z,children:[Y.Div({class:q}),Y.Div({class:"flex justify-end w-100 pt2 f7",children:Y.Div({class:"nr3 pb2 light-silver b",children:Q})})]})}),e1=P(({cssClasses:X,habit:$,date:J,colorIndex:Q,totalLevels:Z})=>{let q=R(()=>{let U=J.value.getFullYear(),B=J.value.getMonth(),K=new Date(U,B,1),j=new Date(U,B+1,0);return TX($.value.tracker,K,j).map((x)=>({...x,level:x.level.code}))}),W=F`flex items-center ${X}`,G=R(()=>Q0(J.value.getMonth(),3)),_=()=>L(q,W,G);return Y.Div({onunmount:_,class:W,children:[Y.Div({class:"f8 b w2 light-silver",children:G}),Y.Div({class:"w-100 flex items-center justify-between",children:Y.For({subject:q,itemKey:"key",map:(U)=>{let B=w(U).prop("level");return s({cssClasses:"pa1",colorIndex:Q,level:B,totalLevels:Z})}})})]})}),O4=P(({cssClasses:X,habit:$,months:J,onClick:Q})=>{let{milestones:Z,title:q,colorIndex:W,levels:G}=w($).props,_=D((O,k)=>{let{startDate:g,endDate:v}=B1(O);return NX(k,g,v).percent},J,$),U=D(z0,Z,_),{icon:B,color:K}=w(U).props,j=D((O)=>G1(O).map((k)=>({monthFirstDate:k,index:k.getTime()})),J),x=F`pointer bg-white ${X}`,A=F`mr1 ${K}`,T=F`${_}%`,N=()=>{L(Z,q,W,G,_,U,B,K,j,x,A,T)};return Y.Div({onunmount:N,class:x,onclick:E(Q),children:[Y.Div({class:"flex items-center justify-between nt1 mb2",children:[Y.Div({class:"f5 dark-gray b",children:q}),Y.Div({class:"f6 silver b flex items-center",children:[I({cssClasses:A,iconName:B}),T]})]}),Y.Div({class:"mt2 mb1",children:Y.For({subject:j,itemKey:"index",map:(O)=>{return e1({cssClasses:"mb1",habit:$,date:w(O).prop("monthFirstDate"),colorIndex:W,totalLevels:G.value.length})}})})]})}),k4=P(({cssClasses:X})=>{let $=F`flex flex-column items-center justify-around ${X}`;return Y.Div({onunmount:()=>L($),class:$,children:[Y.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),Y.Div("Looks like, you just landed here!"),n1({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),X4=P(({isOpen:X,habit:$,onClose:J,onDone:Q})=>{let Z=F`Delete '${()=>$.value.title}'?`,q=()=>{i1($.value.id),Q()};return JX({onUnmount:()=>L(Z),cssClasses:"bn w-30-ns",isOpen:X,onTapOutside:J,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:Z}),Y.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,Y.Br({}),Y.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),Y.Div({class:"flex items-center justify-between f6",children:[b({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:J}),b({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:q})]})]})})}),$4=P(({isOpen:X,habit:$,date:J,showTitleInHeader:Q,onClose:Z,onChange:q})=>{let{title:W,levels:G,tracker:_,colorIndex:U}=w($).props,B=R(()=>Q?.value?`Change status of  '${W.value}'`:`Change status for ${J.value.toDateString()}`),K=D(W0,_,J),j=w(G).length,x=R(()=>{let T=[...G.value];return T.reverse(),T.map((N,O)=>{let k=j.value-1-O,v=`pointer flex items-center pv3 pa3 bt b--moon-gray ${K.value?.level.code===k?"bg-near-white black fw6":"gray fw5"}`,n=`pa1 mr3 ba b ${k<1?"b--light-silver":"b--transparent"}`;return{levelName:N.name,levelCode:k,levelTileCSS:v,dotClasses:n}})});return JX({onUnmount:()=>L(W,G,_,U,B,K,j,x),cssClasses:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:Z,content:Y.Div({class:"mnw5",children:[Y.Div({class:"f5 b tc pa3",children:B}),Y.Div({class:"f5 mb1",children:Y.For({subject:x,map:(T)=>{let{levelName:N,levelCode:O,levelTileCSS:k,dotClasses:g}=w(T).props;return Y.Div({onunmount:()=>L(N,O,k,g),class:k,onclick:E(()=>q(O.value)),children:[s({cssClasses:g,colorIndex:U,level:O,totalLevels:G.value.length,isRectangular:!0}),Y.Span(N)]})}})})]})})}),D4=P(({isOpen:X,habit:$,onClose:J,onDone:Q})=>{let Z=F`Stop '${()=>$.value.title}'?`;return JX({onUnmount:()=>L(Z),cssClasses:"bn",isOpen:X,onTapOutside:J,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:Z}),Y.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",Y.Br({}),Y.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),Y.Div({class:"flex items-center justify-between f6",children:[b({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:J}),b({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:Q})]})]})})}),Q4=P(({cssClasses:X,links:$})=>{let J=F`flex items-center justify-between pv3 bg-near-white ${X}`;return Y.Div({onunmount:()=>L(J),class:J,children:Y.For({subject:$,map:(Q)=>J4({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),J4=P(({cssClasses:X,label:$,icon:J,isSelected:Q,href:Z})=>{let q=M(Q).ternary("app-theme-color b","black"),W=F`pointer noselect flex flex-column items-center justify-center pb2 ${q} ${X}`;return Y.Div({onunmount:()=>L(q,W),class:W,onclick:E(()=>F1(Z.value)),children:[I({size:22,iconName:J}),Y.Div({class:"f7",children:$})]})}),f4=P(({cssClasses:X,header:$,content:J,navbarTop:Q,route:Z})=>{return K0({cssClasses:X,header:$,content:J,bottombar:Y.Div({children:[Y.If({subject:Q,isTruthy:Q}),Q4({cssClasses:"nl3 nr3 ph4",links:D(g1,Z)})]})})}),d=V("stylesheet"),Z4=P(({cssClasses:X,body:$,onMount:J,onUnMount:Q})=>{return Y.Html({lang:"en",children:[Y.Head({onmount:()=>d.value="stylesheet",children:[Y.Title("Habits (by Cyfer)"),Y.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),Y.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),Y.Meta({charset:"UTF-8"}),Y.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),Y.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),Y.Link({rel:d,href:"https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css",as:"style"}),Y.Link({rel:d,href:"https://fonts.googleapis.com/css2?family=Livvic:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,900&display=swap",as:"style"}),Y.Link({rel:d,href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",as:"style"}),Y.Link({rel:d,href:"/assets/styles.css",as:"style"}),Y.Link({rel:"manifest",href:"/manifest.json"})]}),Y.Body({tabindex:"-1",class:X,onmount:J,onunmount:Q,children:[Y.Script({src:"main.js",defer:!0}),$]})]})}),bX=P(({cssClasses:X,contentCssClasses:$,title:J,description:Q,hideDescription:Z,children:q})=>{let W=F`mt3 mb4 ${X}`,G=M(Q).andNot(Z).truthy;return Y.Div({onunmount:()=>L(W,G),class:W,children:[Y.Div({class:"mb2 dark-gray f4 b",children:J}),Y.If({subject:G,isTruthy:Y.Div({class:"mb3 f6 silver fw5",children:Q})}),Y.Div({class:$,children:q})]})}),V4=P(({cssClasses:X,iconSize:$,selectedOptionIndex:J,onChange:Q})=>{let Z=V(!1),q=R(()=>CX[J.value]),W=w(q).prop("decending"),G=w(q).prop("icon"),_=w($).or(20),U=()=>Z.value=!0,B=()=>Z.value=!1,K=(x)=>x===q.value.label?"bg-near-white black fw6":"gray fw5",j=(x)=>{Q(x),B()};return Y.Div({onunmount:()=>L(q,W,G,_),class:X,children:[hX({cssClasses:"pointer",descending:W,iconName:G,size:_,onClick:U}),JX({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Z,onTapOutside:B,content:Y.Div({children:[Y.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),Y.Div({class:"f5 mb1",children:Y.For({subject:CX,map:(x,A)=>Y.Div({class:`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${K(x.label)}`,onclick:E(()=>j(A)),children:[hX({cssClasses:"ml1 mr2",descending:x.decending,iconName:x.icon,size:20}),Y.Span(x.label)]})})})]})})]})}),hX=P(({cssClasses:X,descending:$,iconName:J,size:Q,onClick:Z})=>{let q=Z?"pointer":"",W=M($).ternary("arrow_upward","arrow_downward"),G=M(Q).mul(4).div(5).result;return Y.Span({class:F`flex items-center ${q} ${X}`,onclick:E(Z),children:[I({cssClasses:"silver",iconName:W,size:G}),I({size:Q,iconName:J})]})}),S4=P(({cssClasses:X,progress:$})=>{let J=F`flex flex-column justify-center items-center vh-100 ${X}`;return Y.Div({onunmount:()=>L(J),class:J,children:[Y.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),Y.Div({class:"f3 b mv3",children:"Habits"}),s1({cssClasses:"w-40",progress:$}),Y.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),I4=P(({date:X,selectedDate:$,onChange:J})=>{let Q=D(Y1,X),Z=D(i,$,X),q=M(Q).ternary("light-gray b--transparent","light-silver pointer b--transparent"),W=M(Z).ternary("black b b--silver",q),G=F`bw1 ba br-pill ph2 pv3 pb2 tc ${W}`,_=R(()=>$0(X.value.getDay(),3)),U=R(()=>("0"+X.value.getDate()).slice(-2)),B=()=>{if(Z.value||Q.value)return;J(X.value)},K=()=>L(Q,Z,q,W,G,_,U);return Y.Div({onunmount:K,class:G,onclick:E(B),children:[Y.Div({class:"f7 ",children:_}),Y.Div({class:"mt2 f4",children:U})]})}),q4=P(({cssClasses:X,habit:$,onDateClick:J})=>{let Q=D(G0,$),{colorIndex:Z,levels:q}=w($).props;return Y.Div({class:X,children:[Y.Div({class:"mb2 flex items-center justify-between",children:Y.For({subject:Array(7).fill(0),map:(W,G)=>Y.Div({class:"h2 w2 br-100 gray f7 flex items-center justify-center",children:$0(G,1)})})}),Y.Div({children:Y.For({subject:Q,map:(W)=>Y.Div({class:"flex items-center h-60",children:[Y.Div({class:"w-100 mb3 flex items-center justify-between",children:Y.For({subject:W,map:(G)=>{let _=G.date.getDate(),U=G.date.getMonth(),B=Q0(U,3),K=`${_===1?U===0?G.date.getFullYear().toString():B:_}`;return s({cssClasses:"h2 w2 flex items-center justify-center f7",colorIndex:Z,level:G.level.code,totalLevels:q.value.length||2,textContent:K,showText:G.level!==void 0,onClick:()=>J(G)})}})})]})})})]})}),RX=V(""),S=V(M1()),{id:j0,title:vX,colorIndex:W4,levels:Y4,milestones:UX,isStopped:YX}=w(S).props,u=V(!1),OX=V(!1),t=V(!1),BX=V({date:new Date,selectedLevelIndex:0}),P0=D(I1,S),z4=D(y1,P0),FX=R(()=>NX(S.value,new Date(j0.value),new Date).percent),H0=D(z0,UX,FX),{icon:G4,label:_4,color:R4}=w(H0).props,y4=D(G0,S),KX=()=>{let X=L1();if(!X){RX.value="Incorrect habit ID provided in the query params.";return}S.value=X},U4=()=>OX.value=!0,A0=()=>OX.value=!1,B4=()=>{A0(),history.back()},F4=(X)=>{if(!S.value)return;D1(S.value,X,BX.value.date),t.value=!1,KX()},K4=()=>{r1(),KX(),window.addEventListener("pageshow",KX)},j4=Z4({onMount:K4,body:K0({cssClasses:"bg-white ph3",header:Y.Div({class:"flex items-start justify-between",children:[Y.Div({class:M(vX).lengthGT(22).ternary("f2dot66",""),children:vX}),Y.If({subject:YX,isFalsy:I({cssClasses:"mt1 mr1 ba b--silver bw1 br-100 pa1 noselect",size:18,iconName:"edit",onClick:()=>P1(j0.value)})})]}),content:Y.Div({children:[X4({isOpen:OX,habit:S,onClose:A0,onDone:B4}),$4({isOpen:t,habit:S,date:w(BX).prop("date"),onClose:()=>t.value=!1,onChange:F4}),Y.If({subject:RX,isTruthy:Y.Div({class:"red",children:RX}),isFalsy:Y.Div(Y.If({subject:S,isFalsy:Y.Div({class:"",children:"habit.."}),isTruthy:Y.Div({children:[Y.If({subject:YX,isTruthy:Y.Div([Y.Div({class:"red mb3",children:"Status: STOPPED PERMANENTLY"}),b({cssClasses:"pv2 ph3 nt2 mb4 red",onTap:U4,children:"Delete Permanently"})])}),bX({cssClasses:"pb3",title:F`Completion status ${()=>u.value?"":`(target ${UX.value[0].percent}%)`}`,children:[Y.Div({class:"mt3",children:Y.For({subject:P0,n:1/0,nthChild:Y.Div({class:"flex items-center justify-between mt2 pt1 bt bw1 b--near-white b mid-gray",children:[Y.Div({class:"flex items-center",children:[I({cssClasses:F`mr1 ${R4}`,size:12,iconName:G4}),_4]}),Y.Div({class:"flex items-center",children:[z4,Y.Span({class:"ml1"}),Y.Div(F` (${FX}%)`)]})]}),map:(X)=>Y.Div({class:"flex items-center justify-between mb2",children:[Y.Div({class:"flex items-center",children:[s({cssClasses:"pa1 mr2",colorIndex:W4,level:X.level.code,totalLevels:Y4.value.length,isRectangular:!0}),Y.Div(X.level.name)]}),Y.Div(`${X.count} times (${X.percent}%)`)]})})}),Y.If({subject:u,isTruthy:a1({cssClasses:"pt4 mt3 mb3",milestones:UX,achievedMilestone:H0,completionPercent:FX})}),b({cssClasses:"pa2 ph3 mt4 mb2",children:F`${M(u).ternary("Hide","Show")} target goal status`,onTap:()=>u.value=!u.value})]}),bX({title:"Tracker",children:q4({habit:S,onDateClick:(X)=>{if(YX.value)return;t.value=!0,BX.value={date:X.date,selectedLevelIndex:X.level.code}}})})]})}))})]}),bottombar:Y.Div({class:"pb3",children:l1({})})})}),P4=()=>{f.start("mount"),iX.resetIdCounter(),j4(),f.start("run")};P4();
