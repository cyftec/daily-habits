var XX=(X)=>{let $=Object.entries(X).sort((Q,J)=>Q[0].localeCompare(J[0]));return $.forEach(([Q,J],W)=>{if(J&&typeof J==="object"&&!Array.isArray(J))$[W]=[Q,XX(J)]}),Object.fromEntries($)},qX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},r=(X)=>{if(Array.isArray(X)){let $=[...X],Q=[];return $.forEach((J)=>{Q.push(r(J))}),Q}if(qX(X)){let $={...X},Q={};return Object.keys($).forEach((J)=>{Q[J]=r($[J])}),Object.freeze(Q)}return X},b=(X)=>{if(Array.isArray(X)){let Q=[...X],J=[];return Q.forEach((W)=>{J.push(b(W))}),J}if(qX(X)){let Q={...X},J={};return Object.keys(Q).forEach((W)=>{J[W]=b(Q[W])}),J}return X},AX=(X,$="index")=>X.map((Q,J)=>({[$]:J,value:Q})),M0=(X,$)=>{let Q=XX(X),J=XX($),W=Object.keys(Q),q=Object.keys(J);if(W.length!==q.length)return!1;for(let Z of W)if(!q.includes(Z)||!UX(Q[Z],J[Z]))return!1;return!0},k0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let Q=0;Q<X.length;Q++)if(!UX(X[Q],$[Q]))return!1;return!0},UX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return k0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return M0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},A0=(X,$,Q)=>{let W=AX(b(X),"index");return AX(b($),"index").map((Z)=>{let U="add",R=-1,Y=Z.value;return W.some((F,f)=>{if(U=UX(F.value,Z.value)?F.index===Z.index?"idle":"shuffle":Q&&F.value[Q]!==void 0&&F.value[Q]===Z.value[Q]?"update":"add",U!=="add")return R=F.index,W.splice(f,1),!0;return!1}),{type:U,oldIndex:R,value:Y}})},N=(X)=>["source-signal","derived-signal"].includes(X?.type),IX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((Q)=>typeof X?.value===Q)),YX=(X)=>N(X)||IX(X),yX=(X)=>IX(X,["string"]),gX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),v=(X)=>YX(X)?X.value:X,o=null,E=(X)=>{let $=r(X),Q=new Set;return{type:"source-signal",get value(){if(o)Q.add(o);return b($)},set value(J){if(J===$)return;$=r(J),Q.forEach((W)=>W&&W())}}},S=(X)=>{o=X,X(),o=null},B=(X)=>{let $,Q=E($);return S(()=>{$=X($),Q.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return Q.value}}},l=(X)=>{if(!qX(X.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:($)=>B(()=>X.value[$]),get props(){return Object.keys(X.value).reduce((Q,J)=>{let W=J;return Q[W]=this.prop(W),Q},{})}}},G=(X,...$)=>B(()=>{return X.reduce((Q,J,W)=>{let q,Z=$[W];if(typeof Z==="function")q=Z()??"";else if(YX(Z))q=Z.value??"";else q=Z??"";return`${Q}${J}${q.toString()}`},"")}),bX=["onmount","onunmount"],vX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],E0=[...vX,...bX],D0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],p,T0=(X)=>{if(!p)p=document.createElement("textarea");return p.innerHTML=X,p.value},L0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},hX=L0(),D={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},s=(X)=>Array.isArray(X),d=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,g=(X)=>typeof X==="string"||typeof X==="function"&&X.isElementGetter,RX=(X)=>N(X)&&g(X.value),H0=(X)=>g(X)||RX(X),cX=(X)=>{return N(X)&&(g(X.value)||s(X.value)&&X.value.every(($)=>g($)))},pX=(X)=>{return!N(X)&&(yX(X)||gX(X)||g(X)||s(X)&&X.every(($)=>H0($)))},BX=(X)=>{return cX(X)||pX(X)},EX=!1,x0={},I={},N0=globalThis.MutationObserver,S0=new N0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((Q)=>{if(d(Q)){let J=Q,W=J.elementId;if(I[W])delete I[W];else x0[W]=J.tagName}}),$.removedNodes.forEach((Q)=>{if(d(Q)){let J=Q,W=J.elementId,q=J.unmountListener;if(q)I[W]={element:J,unmountListener:q}}})}),Object.entries(I).forEach(([$,Q])=>{let{element:J,unmountListener:W}=Q;uX(J,W)})}),uX=(X,$)=>{if(!d(X))return;let Q=X.children;for(let J=0;J<Q.length;J++){let W=Q[J];uX(W,W.unmountListener)}if($&&$(X),I[X.elementId])delete I[X.elementId]},C0=()=>{if(!EX&&!D.currentIs("build"))S0.observe(document.body,{childList:!0,subtree:!0}),EX=!0},mX=(X,$)=>E0.includes(X)&&$===void 0,rX=(X,$)=>vX.includes(X)&&typeof $==="function",oX=(X,$)=>bX.includes(X)&&typeof $==="function",I0=(X,$)=>mX(X,$)||rX(X,$)||oX(X,$),y0=(X,$)=>{Object.entries($).forEach(([Q,J])=>{if(mX(Q,J));else if(rX(Q,J)){let W=Q.slice(2);X.addEventListener(W,(q)=>{if(W==="keypress")q.preventDefault();J(q)})}else if(oX(Q,J)){if(Q==="onmount"&&!D.currentIs("build")){let W=J;setTimeout(()=>W(X),0)}if(Q==="onunmount")C0(),X.unmountListener=J}else console.error(`Invalid event key: ${Q} for element with tagName: ${X.tagName}`)})},DX=(X,$,Q)=>{let J=(YX(Q)?Q.value:Q)??"";if(typeof J==="boolean")if(J)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=J;else if(J)X.setAttribute($,J)},g0=(X,$)=>{let Q={};Object.entries($).forEach((J)=>{let[W,q]=J;if(N(q))Q[W]=q;DX(X,W,q)}),S(()=>{Object.entries(Q).forEach((J)=>{let[W,q]=J,Z=q.value;if(!D.currentIs("run"))return;DX(X,W,Z)})})},m=(X)=>{if(RX(X)){let $=X.value;return m($)}if(typeof X==="string")return document.createTextNode(T0(X));if(g(X)){let $=X();if(!d($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},b0=(X,$)=>{if(!$)return;if(cX($))S(()=>{let J=$.value,W=s(J)?J:[J];W.forEach((Z,U)=>{let R=X.childNodes[U],Y=m(Z);if(R&&Y)X.replaceChild(Y,R);else if(Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)});let q=W.length;while(q<X.childNodes.length){let Z=X.childNodes[q];if(Z)X.removeChild(Z)}});if(pX($)){let Q=yX($)?[$.value]:gX($)?$.value:s($)?$:[$],J=[];if(Q.forEach((W,q)=>{if(RX(W))J.push({index:q,childSignal:W});let Z=m(W),U=X.childNodes[q];if(U&&Z)X.replaceChild(Z,U);else if(!U&&Z)X.appendChild(Z);else console.error(`No child found for node with tagName: ${X.tagName}`)}),J.length)J.forEach(({index:W,childSignal:q})=>{S(()=>{if(!q.value)return;if(!D.currentIs("run"))return;let Z=m(q.value),U=X.childNodes[W];if(U&&Z)X.replaceChild(Z,U);else if(!U&&Z)X.appendChild(Z);else console.error(`No child found for node with tagName: ${X.tagName}`)})})}},v0=(X,$)=>{let Q=void 0,J={},W={};return Object.entries(X).forEach(([q,Z])=>{if(q==="children")if(BX(Z))Q=Z;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(Z)}`);else if(I0(q,Z))J[q]=Z;else W[q]=Z}),{children:Q,eventProps:J,attributeProps:W}},h0=(X,$)=>{let Q=()=>{let J=hX.getNewId(),W=D.currentIs("mount")?document.querySelector(`[data-elem-id="${J}"]`):document.createElement(X);W.elementId=J,W.unmountListener=void 0;let q=BX($)?{children:$}:$;if(!D.currentIs("run"))q["data-elem-id"]=W.elementId.toString();let Z=v0(q,W.tagName);if(y0(W,Z.eventProps),g0(W,Z.attributeProps),b0(W,Z.children),!D.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Q.isElementGetter=!0,Q},TX=(X,$,Q)=>{let J=E($),W=E(X),q=Q(B(()=>W.value),B(()=>J.value)),Z,U,R=!1;if(q?.isElementGetter)Z=()=>{if(R&&U)return U;return U=q(),R=!0,U},Z.isElementGetter=!0;else if(typeof q==="string")Z=q;else throw`One of the child, ${q} passed in ForElement is invalid.`;return{indexSignal:J,itemSignal:W,mappedChild:Z}},LX=(X,$,Q)=>{if($!==void 0&&$>=0&&Q){let J=$>X.length?X.length:$;X.splice(J,0,Q)}return X},c0=({subject:X,itemKey:$,map:Q,n:J,nthChild:W})=>{if(W&&J===void 0||J!==void 0&&J>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let q=B(()=>{let K=v(X);return Array.isArray(K)?K:[]});if(!$)return B(()=>LX(q.value.map(Q),J,W));let Z=W;if(W&&typeof W!=="string"){let K=W(),j=()=>K;j.isElementGetter=!0,Z=j}let U=q.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null,Y=B((K)=>{return R=K||R,q.value}),F=B((K)=>{if(!K||!R)return Y.value.map((M,k)=>TX(M,k,Q));return A0(R,Y.value,$).map((V,M)=>{let k=(K||[])[V.oldIndex];if(console.assert(V.type==="add"&&V.oldIndex===-1&&!k||V.oldIndex>-1&&!!k,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),k){if(V.type==="shuffle")k.indexSignal.value=M;if(V.type==="update")k.indexSignal.value=M,k.itemSignal.value={...V.value};return k}return TX(V.value,M,Q)})});return B(()=>LX(F.value.map((K)=>K.mappedChild),J,Z))},p0=({subject:X,isTruthy:$,isFalsy:Q})=>{let J=z.Span({style:"display: none;"}),W=()=>(v(X)?$:Q)||J;return N(X)?B(W):W()},u0=({subject:X,caseMatcher:$,defaultCase:Q,cases:J})=>{let W=()=>{let q=v(X),Z=void 0;for(let[U,R]of Object.entries(J))if($&&$(X,U)||q===U){Z=R;break}return Z||Q||z.Span({style:"display: none;"})};return N(X)?B(W):W()},m0=D0.reduce((X,$)=>{let Q=$.split("").map((W,q)=>!q?W.toUpperCase():W).join(""),J=(W)=>h0($,W);return X[Q]=J,X},{}),r0={For:c0,If:p0,Switch:u0},z={...m0,...r0},w=(X)=>($)=>{for(let J of Object.keys($))if($[J]===void 0)delete $[J];let Q=Object.entries($).reduce((J,W)=>{let[q,Z]=W,U=typeof Z==="string",R=Array.isArray(Z)&&Z.every((F)=>typeof F==="string"),Y=N(Z)||typeof Z==="function"?Z:U||R?{type:"non-signal",get value(){return v(Z)}}:BX(Z)?Z:{type:"non-signal",get value(){return v(Z)}};return J[q]=Y,J},{});return X(Q)},o0=60000,n=86400000,s0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d0=["January","February","March","April","May","June","July","August","September","October","November","December"],n0=(X)=>X*o0,sX=(X,$)=>s0[X].substring(0,$),i0=(X,$)=>d0[X].substring(0,$),GX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},T=(X)=>GX(X).getTime(),a=(X,$)=>T(X)===T($),l0=(X,$)=>{let Q=$||new Date;return T(X)>T(Q)},FX=(X,$)=>{let Q=T(X),J=T($);return Math.round((J-Q)/n)},a0=(X)=>FX(new Date,X),_X=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),t0=(X,$)=>{if($<1)throw"N should be some positive integer";let Q=T(X);return Array($).fill(0).map((J,W)=>new Date(Q-($-1-W)*n))},e0=(X)=>{let $=new Date;return Array(X).fill(0).map((Q,J)=>new Date($.getFullYear(),$.getMonth()-J,1)).reverse()},X1=(X,$)=>{let Q=T(X),J=T($);if(Q===J)return[GX(new Date(Q))];let W=Q<J?Q:J,Z=((Q<J?J:Q)-W)/n;return Array(Z+1).fill(0).map((U,R)=>new Date(W+R*n))},dX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],$1=[1,1,1,1,1,1,1],Q1=[{name:"Not Applicable",code:-1},{name:"Paused",code:-2},{name:"Stopped",code:-3}],$X=["Not started","Completed"],J1=[70,60,45],QX={id:"analytics",lastInteraction:new Date().getTime()},h={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},HX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],nX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},W1=(X)=>location.href=X,iX=()=>location.href=nX.HABITS.NEW.href,z1=(X)=>location.href=`${nX.HABITS.HABIT.href}?id=${X}`,Z1=1.6181,q1=(X)=>Q1.find(($)=>$.code===X),lX=(X,$)=>{return X<0?q1(-1):{name:$[X],code:X}},U1=(X)=>({level:lX(-1,[]),date:X}),Y1=(X,$,Q)=>({level:lX(X,$),date:Q}),PX=(X,$)=>X.find((Q)=>T(Q.date)===T($)),R1=(X)=>N1().filter(($)=>{let Q=!$.isStopped,J=$.frequency[X.getDay()],W=T(X)>=T(new Date($.id));return Q&&J&&W}),t=(X)=>{let $=GX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((Q,J)=>({name:Q,code:J})),tracker:X.tracker.map((Q,J)=>Y1(Q,X.levels,_X($,J)))}},aX=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,Q)=>$.level.code)}},tX=()=>{let $={id:new Date().getTime(),title:"",frequency:$1,colorIndex:0,levels:$X,tracker:[],milestones:J1,pauses:[],isStopped:!1};return t($)},eX=(X)=>[{label:"Successful",percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",percent:0,icon:"close",color:"red"}],JX=(X,$)=>{let Q=eX(X),J=Q[0];for(let W=0;W<Q.length;W++)if(J=Q[W],J.percent<$)break;return J},B1=(X,$)=>{if(!X.title)return"Title should not be empty";if($&&S1(X.title))return"A habit with same name already exists";if(X.frequency.every((J)=>!J))return"Select at least one day in a week";if(!X.levels.every((J)=>!!J.name))return"One of the levels is empty";if(X.levels.some((J,W)=>{for(let q=W+1;q<X.levels.length;q++)if(X.levels[q].name===J.name)return!0;return!1}))return"Multiple levels have same name";if(!X.milestones.every((J)=>J<=100&&J>=0))return"The milestones should be between 0 and 100 percents";if(!X.milestones.every((J,W,q)=>W===0?!0:q[W-1]>J))return"Milestones should be in order (from high to low)";return""},X0=(X,$,Q)=>{let J=$0(X.tracker,$,Q),W=X.levels.length-1,q=0,Z=0,U=0,R=0,Y=0,F=0;return J.forEach((f,K)=>{if(q+=f.level.code>-1?1:0,Z+=f.level.code>0?1:0,U+=f.level.code>0?f.level.code:0,K===J.length-1)return;let V=f.level.code<1;F=V?F+1:0;let k=100*((f.level.code>0?f.level.code:0)/(X.levels.length-1));R=Math.round(k)>50?R+1:0,Y=V?0:Y+1}),{title:X.title,aceStreak:R,followStreak:Y,missed:F,percent:Math.ceil(100*(U/(q*W))),totalDays:q,workingDays:Z}},G1=(X,$,Q)=>{let J=!!X.length;if(!J)return{hideAddButton:!1,hideRemoveButton:$.length<3};let W=$[Q],q=!!(J&&X.find((K)=>K.name===W.name)),Z=X.length!==$.length,U=$.length<X.length,R=$.length>X.length,Y=!Z&&X.length&&X.some((K,j)=>K.name!==$[j].name);return{hideAddButton:U||Y||q&&U,hideRemoveButton:U||Y||q&&R}},F1=(X,$,Q)=>{let J=!!X.length,W=$[Q],q=!!(J&&X.find((U)=>U.name===W.name)),Z=X.length!==$.length;return q&&Z},_1=(X,$,Q,J=!1)=>{let W=dX[Q],Z=Math.trunc(Math.pow(X/($-1),Z1)*255).toString(16),U=Z.length===1?`0${Z}`:Z,R=X<0||U==="0"?"transparent":`${W}${U}`,Y=J?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:R,fontColor:Y}},P1=(X,$,Q)=>{let J=fX(X.id),W=J.tracker.map((Z)=>{if(a(Z.date,Q))return{...Z,level:{...Z.level,code:$}};return Z}),q={...J,tracker:W};R0(q)},j1=(X,$)=>{let Q=[];for(let J of $)if(!X.some((q)=>{if(a(q.date,J))return Q.push(q),!0;return!1}))Q.push(U1(J));return Q},$0=(X,$,Q)=>{let J=X1($,Q);return j1(X,J)},K1=(X)=>{let Q=FX(new Date,X);if(Q<-2)return`${-Q} days back`;if(Q===-2)return"Day before yesterday";if(Q===-1)return"Yesterday";if(Q===0)return"Today";if(Q===1)return"Tomorrow";if(Q===2)return"Day after tomorrow";return`${Q} days after`},w1=(X)=>{let $=new Date,Q=new Date(X),J=-a0(Q);if(J===0)return"Just created this habit today";if(J===1)return"This habit started from yesterday";if(J>1&&J<5)return`Started following this ${J} back`;let{aceStreak:W,followStreak:q,missed:Z}=X0(fX(X),_X($,-J),$);if(console.log({aceStreak:W,followStreak:q,missed:Z}),W>=12)return`Nailed ${W} days in a row. Woah! Don't stop.`;if(W>=4)return`Doing good for ${W} days straight! Keep it up.`;if(q>=15)return`Didn't miss for ${q} days in a row. Kudos!`;if(q>=4)return`${q} days in a row. Nice! keep going.`;if(Z)`Missed ${Z} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},V1=(X,$,Q)=>{if(!X.length||X.length===$.length)return Q;let J=[...Q],W=[];return X.forEach((q)=>{let Z=$.find((F)=>F.name===q.name);if(!Z)return;if(Z.code===q.code)return;let Y=[];Q.forEach((F,f)=>{if(F.level.code===q.code)Y.push(f)}),W.push({indices:Y,newLevel:Z})}),W.forEach((q)=>{q.indices.forEach((Z)=>{J[Z]={...J[Z],level:q.newLevel}})}),J},f1=()=>{let X=new Date().getTime(),$=x1();return X-$>n0(1)},O1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},jX=(X,$,Q)=>{let J=JSON.parse(X||"{}"),W=J&&typeof J==="object",q=J[$];if(!W||!(Q?q===Q:!!q))return;return J},O=(X)=>{return(...$)=>{return O1(),U0(new Date),X&&X(...$)}},M1=(X)=>X.startsWith("h."),KX=(X)=>`h.${X}`,Q0=(X)=>{if(!M1(X))return;let $=localStorage.getItem(X),Q=jX($,"title");if(!Q)return;return Q},wX=()=>{if(!D.currentIs("run"))return[];let X=[];for(let $ in localStorage){let Q=Q0($);if(!Q)continue;X.push(Q)}return X},VX=(X)=>{let $=KX(X.id);localStorage.setItem($,JSON.stringify(X))},k1=(X)=>{let $=KX(X);localStorage.removeItem($)},J0="settings",A1="id",E1="local-settings",W0=(X)=>{localStorage.setItem(J0,JSON.stringify(X))},D1=()=>{if(!D.currentIs("run"))return h;let X=()=>{let J=localStorage.getItem(J0);return jX(J,A1,E1)};if(!X())W0(h);let Q=X();if(!Q)throw"Error fetching settings";return T1(Q),X()},T1=(X)=>{if(!X.editPage)console.log("settings.editPage is missing"),console.log("adding ",{...X,editPage:h.editPage}),W0({...X,editPage:h.editPage})},z0="analytics",L1="id",H1="analytics",Z0=(X)=>{localStorage.setItem(z0,JSON.stringify(X))},q0=()=>{if(!D.currentIs("run"))return console.log("return initial analytics"),QX;let X=()=>{let J=localStorage.getItem(z0);return jX(J,L1,H1)};if(!X())console.log("NO ANALYTICS FOUND"),Z0(QX);let Q=X();if(!Q)throw"Error fetching analytics";return Q},x1=()=>{if(!D.currentIs("run"))return console.log("current phase is not run"),QX.lastInteraction;return q0().lastInteraction},U0=(X)=>{let $=q0();Z0({...$,lastInteraction:X.getTime()})},fX=(X)=>{let $=KX(X),Q=Q0($);if(!Q)throw`Error fetching habit with id '${X}' from storage`;return t(Q)},N1=()=>{return wX().map(($)=>t($))},S1=(X)=>{let Q=wX().find((J)=>J.title.trim()===X.trim());return Q?t(Q):void 0},Y0=()=>{let X=wX();for(let $ of X){let Q=new Date($.id),J=new Date,W=FX(Q,J),q=[...$.tracker];if(W+2<=q.length)continue;let Z=q.length-1,U=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+Z),R=U.getDay();if(a(J,U)){let Y=q[Z];q[Z]=$.frequency[R]?Y<0?0:Y:-1}for(let Y=q.length;Y<=W;Y++){let f=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+Y).getDay();q[Y]=$.frequency[f]?0:-1}$.tracker=q,VX($)}},R0=(X)=>{let $=aX(X);VX($)},C1=(X)=>{let $=fX(X),J={...aX($),isStopped:!0};VX(J)},I1=(X)=>k1(X),y1=()=>{return D1().editPage},g1=w(({classNames:X,hideRemove:$,hideAdd:Q,onRemove:J,onAdd:W})=>{return z.Span({class:G`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>$?.value&&Q?.value?"bn":"ba"} ${X}`,children:[z.If({subject:$,isFalsy:z.Span({class:G`pointer ph2 pb1 bw1 b--light-silver ${()=>Q?.value?"":"br"}`,onclick:O(J),children:"-"})}),z.If({subject:Q,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:O(W),children:"+"})})]})}),x=w(({className:X,onTap:$,children:Q})=>z.Button({class:G`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,onclick:O(()=>$()),children:Q})),H=w(({className:X,size:$,onClick:Q,iconName:J,title:W})=>z.Span({class:G`material-symbols-outlined ${()=>Q?"pointer":""} ${X}`,style:G`font-size: ${()=>$?.value||"16"}px`,onclick:O(Q),children:J,title:W})),OX=w(({classNames:X,dotClassNames:$,colorIndex:Q,level:J,totalLevels:W,showText:q,textContent:Z,icon:U,iconSize:R,isRectangular:Y,onClick:F})=>{let f=B(()=>Y?.value?"br0":"br-100"),K=B(()=>J.value<0?"bg-transparent":"bg-light-gray"),{backgroundColor:j,fontColor:V}=l(B(()=>_1(J.value,W.value,Q.value,q?.value))).props,M=B(()=>Y?.value?"br0":"br-100"),k=B(()=>Z?.value||"·"),c=()=>{if(F&&J.value>=0)F()};return z.Span({class:G`pointer relative ${f} ${K} ${X}`,onclick:O(c),children:[z.Span({class:G`flex items-center justify-around absolute absolute--fill ${M} ${$}`,style:G`
            background-color: ${j};
            color: ${V};
          `,children:z.If({subject:U,isTruthy:H({iconName:U,size:R}),isFalsy:z.Span(k)})})]})}),X5=w(({classNames:X})=>{return z.Div({class:G`bb b--light-gray ${X}`})}),WX=w(({classNames:X,href:$,target:Q,onClick:J,children:W})=>{return z.A({class:G`noselect ${()=>!$&&!J?"":"pointer underline"} ${X}`,href:$,target:Q,onclick:O(J),children:W})}),e=w(({classNames:X,isOpen:$,content:Q,onTapOutside:J})=>{return z.Dialog({onmount:(W)=>setTimeout(()=>S(()=>{if($.value)W.showModal();else W.close()})),onclick:O(J),class:G`pa0 br3 ${X}`,children:[z.Div({onclick:(W)=>W.stopPropagation(),children:Q})]})}),b1=w(({classNames:X,placeholder:$,num:Q,onchange:J})=>{let W=(q)=>{let Z=q.target.value,U=Number.parseFloat(Number.parseFloat(Z||"0").toFixed(2));J(U)};return z.Input({class:X,type:"number",placeholder:$,value:G`${()=>Q.value??""}`,onchange:W})}),B0=w(({classNames:X,body:$,onMount:Q})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:X,onmount:Q,children:[z.Script({src:"main.js",defer:"true"}),$]})]})}),v1=w(({progress:X,classNames:$})=>{let Q=G`width: ${()=>X.value<0?0:X.value>100?100:X.value}%;`;return z.Div({class:G`br-pill bg-moon-gray ${$}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),G0=w(({classNames:X,header:$,content:Q,bottombar:J})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:G`w6-ns ${X}`,children:[z.If({subject:$,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),Q,z.Div({class:"pv6 mt5"}),z.If({subject:J,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:J})})]})})}),$5=w(({classNames:X,tabItemClassNames:$,selectedTabClassNames:Q,tabs:J,selectedTabIndex:W,onTabChange:q})=>{return z.Div({class:G`bg-white br3 ${X}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:J,map:(Z,U)=>z.Span({class:G`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>U===W.value?`b--light-silver b black ${Q?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${$}`,onclick:O(()=>q(U)),children:Z})})})})}),xX=w(({classNames:X,placeholder:$,disabled:Q,text:J,onmount:W,onchange:q,onkeydown:Z,onfocus:U,onblur:R})=>{let Y,F=(j)=>{if(Y=j,W)W(j)},f=(j)=>{let V=j.target.value;if(q)q(V)},K=(j)=>{let V=j.key.length===1?Y.value+j.key:j.key==="Backspace"?Y.value.slice(0,-1):Y.value,M={key:j.key,text:V};if(Z)Z(M)};return z.Input({onmount:F,class:G`${X}`,type:"text",placeholder:$,disabled:Q,value:J,onchange:f,onkeydown:K,onfocus:U,onblur:R})}),Q5=w(({classNames:X,isOn:$,onToggle:Q})=>{return z.Div({class:G`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,onclick:O(Q),children:[z.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),z.Div({class:"pa05"}),z.Div({class:G`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),h1=w(({classNames:X})=>{return z.Div({class:G`w-100 flex justify-end ${X}`,children:x({className:"pa3 mb3 shadow-4 b flex items-center",children:[H({className:"nl1 mr1",size:22,iconName:"add"}),"Add habit"],onTap:iX})})}),c1=w(({classNames:X})=>{return x({className:G`pa3 flex items-center ${X}`,children:[H({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),p1=w(({classNames:X,habit:$,date:Q,colorIndex:J,totalLevels:W})=>{let q=B(()=>{let Z=Q.value.getFullYear(),U=Q.value.getMonth(),R=new Date(Z,U,1),Y=new Date(Z,U+1,0);return $0($.value.tracker,R,Y)});return z.Div({class:G`flex items-center ${X}`,children:[z.Div({class:"f8 b w2 light-silver",children:B(()=>i0(Q.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:q,map:(Z)=>OX({classNames:"pa1",colorIndex:J,level:Z.level.code,totalLevels:W})})})]})}),J5=w(({classNames:X,habit:$,months:Q,onClick:J})=>{let{milestones:W,title:q,colorIndex:Z,levels:U}=l(B(()=>$.value)).props,R=B(()=>{let K=new Date,j=K.getFullYear(),V=K.getMonth(),M=new Date(j,V-Q.value,1),k=new Date(j,V+1,0);return X0($.value,M,k).percent}),Y=B(()=>JX(W.value,R.value).icon),F=B(()=>JX(W.value,R.value).color),f=B(()=>e0(Q.value));return z.Div({class:G`pointer bg-white ${X}`,onclick:O(J),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:q}),z.Div({class:"f6 silver b flex items-center",children:[H({className:G`mr1 ${F}`,iconName:Y}),G`${R}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:f,map:(K)=>p1({classNames:"mb1",habit:$,date:K,colorIndex:Z,totalLevels:U.value.length})})})]})}),u1=w(({classNames:X,editableHabit:$,editedHabit:Q,hideDescriptions:J,showFullCustomisations:W,onChange:q})=>{S(()=>console.log(J?.value));let Z=E(!1),U=B(()=>{let P=Z.value;return W?.value||P}),{title:R,frequency:Y,levels:F,milestones:f,colorIndex:K}=l(Q).props,j=B(()=>Y.value.every((P)=>!!P)),V="bg-mid-gray white",M="bg-near-white light-silver",k=(P)=>{q({...Q.value,title:P})},c=(P)=>{q({...Q.value,colorIndex:P})},MX=(P)=>{if(P<-1||P>6)throw"Invalid day index";if(P===-1){q({...Q.value,frequency:[1,1,1,1,1,1,1]});return}let _=j.value?Y.value.map((A)=>0):Y.value;_[P]=j.value?1:_[P]?0:1,q({...Q.value,frequency:_})},_0=(P,_)=>{let A=F.value;A[_]={...A[_],name:P},q({...Q.value,levels:A})},P0=(P)=>{let _=F.value;_.splice(P,0,{name:"",code:P}),q({...Q.value,levels:_})},j0=(P)=>{let _=F.value;if(_.length<3)return;_.splice(P,1),q({...Q.value,levels:_})},K0=(P,_)=>{if(_<0||_>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let A=[...Q.value.milestones];A[_]=P,q({...Q.value,milestones:A})};return z.Div({class:X,children:[C({classNames:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:G`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>j.value?V:M}`,children:"Daily",onclick:O(()=>MX(-1))}),map:(P,_)=>{let A=B(()=>Y.value[_]&&!j.value?V:M);return z.Span({class:G`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${A}`,children:sX(_,1),onclick:O(()=>MX(_))})}})})}),C({classNames:"pb2",title:"Title of the habit",children:xX({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:R,onchange:k})}),z.If({subject:U,isTruthy:z.Div([C({classNames:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:dX,map:(P,_)=>{let A=B(()=>_===K.value?"#999":"#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:G`border-color: ${A}`,onclick:O(()=>c(_)),children:z.Span({class:G`pa2 br-100`,style:`background-color: ${P}`})})}})})}),C({classNames:"pb3",title:"Status update levels",hideDescription:J,description:`
                  When updating a habit status in a day, we generally have only two levels - "${$X[0]}"
                  or "${$X[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:z.For({subject:F,map:(P,_)=>{let A=$?.value?.levels||[],kX=F.value,{hideAddButton:w0,hideRemoveButton:V0}=G1(A,kX,_),f0=F1(A,kX,_);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[OX({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:K,level:_,isRectangular:!0,totalLevels:F.value.length}),xX({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${_}`,disabled:f0,text:P.name,onchange:(O0)=>_0(O0,_)})]}),g1({hideAdd:w0,hideRemove:V0,onAdd:()=>P0(_+1),onRemove:()=>j0(_)})]}),z.If({subject:_<F.value.length-1,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),C({title:"Your goal",hideDescription:J,description:G`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>JX(Q.value.milestones,67).label}'. For acheiving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:z.For({subject:B(()=>eX(f.value)),n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(P,_)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[H({className:`mr2 ${P.color}`,size:20,iconName:P.icon}),P.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:_===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:b1({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:P.percent,onchange:(A)=>K0(A,_)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:W,isFalsy:x({className:"pv2 ph3 flex items-center",onTap:()=>Z.value=!Z.value,children:[H({className:"mr1",iconName:B(()=>Z.value?"remove":"add")}),G`Show ${()=>Z.value?"Less":"More"} Customisations`]})})]})}),W5=w(({editableHabit:X,onMount:$})=>{let Q=E(h.editPage),J=E(!1),W=E(!1),q=E(""),Z=E(tX()),U=B(()=>X?.value?`Edit '${X.value.title}'`:"Add new habit");S(()=>console.log(Q.value.showHints));let R=()=>J.value=!0,Y=()=>J.value=!1,F=()=>{Y(),history.go(-2)},f=()=>{if(q.value=B1(Z.value,!X?.value),q.value)return;let j=Z.value,V=[...X?.value?.levels||[]],M=V1(V,j.levels,j.tracker);R0({...Z.value,tracker:M}),history.back()};return B0({onMount:()=>{if($)$(),Z.value=X?.value;Q.value=y1()},body:G0({classNames:"bg-white ph3",header:z.Div({class:G`${()=>U.value.length>22?"f2dot66":""}`,children:U}),content:z.Div([z.If({subject:X,isTruthy:z.Div([C({classNames:"pb2",title:"Actions",children:[m1({isOpen:J,habit:Z,onClose:Y,onDone:F}),WX({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:R}),e({classNames:"bn",isOpen:W,onTapOutside:()=>W.value=!1,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:G`Stop '${()=>Z.value.title}'?`}),z.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,z.Br({}),z.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),z.Div({class:"flex items-center justify-between f6",children:[x({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>W.value=!1}),x({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{C1(Z.value.id),W.value=!1,history.back()}})]})]})}),WX({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>W.value=!0})]})])}),u1({editableHabit:X,editedHabit:Z,hideDescriptions:B(()=>!Q.value.showHints),showFullCustomisations:l(Q).prop("showFullCustomisation"),onChange:(j)=>Z.value=j})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:q,isTruthy:z.Div({class:"red mb3",children:q})}),z.Div({class:"flex items-center justify-stretch",children:[c1({classNames:"w4dot50 w4dot25-ns"}),x({className:"w-100 pa3 ml3 b",children:B(()=>X?.value?"Update":"Add"),onTap:f})]})]})})})}),m1=w(({isOpen:X,habit:$,onClose:Q,onDone:J})=>{return e({classNames:"bn w-30-ns",isOpen:X,onTapOutside:Q,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:G`Delete '${()=>$.value?.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the acheivements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[x({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Q}),x({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{I1($.value.id),J()}})]})]})})}),r1=w(({isOpen:X,habit:$,date:Q,showTitleInHeader:J,onClose:W,onChange:q})=>{return e({classNames:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:W,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:G`Change status ${()=>J?.value?`of  '${$.value.title}'`:`for ${Q.value.toDateString()}`}`}),z.Div({class:"f5 mb1",children:z.For({subject:B(()=>$.value.levels||[]),map:(Z,U)=>{let R=G`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>PX($.value.tracker,Q.value)?.level.code===U?"bg-near-white black":"gray"}`;return z.Div({class:R,onclick:O(()=>q(U)),children:[z.Span(Z.name)]})}})})]})})}),o1=w(({classNames:X,links:$})=>{return z.Div({class:G`flex items-center justify-between pv3 bg-near-white ${X}`,children:z.For({subject:$,map:(Q)=>s1({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),s1=w(({classNames:X,label:$,icon:Q,isSelected:J,href:W})=>{return z.Div({class:G`pointer noselect flex flex-column items-center justify-center pb2 ${()=>J.value?"app-theme-color b":"black"} ${X}`,onclick:O(()=>W1(W.value)),children:[H({size:22,iconName:Q}),z.Div({class:"f7",children:$})]})}),d1=w(({classNames:X,header:$,content:Q,navbarTop:J,route:W})=>{return G0({classNames:X,header:$,content:Q,bottombar:z.Div({children:[z.If({subject:J,isTruthy:J}),o1({classNames:"nl3 nr3 ph4",links:B(()=>[{label:"Today",icon:"calendar_month",isSelected:W.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:W.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:W.value==="/settings/",href:"/settings/"}])})]})})}),C=w(({classNames:X,contentClassNames:$,title:Q,description:J,hideDescription:W,children:q})=>{return z.Div({class:G`mt3 mb4 ${X}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Q}),z.If({subject:B(()=>J?.value&&!W?.value),isTruthy:z.Div({class:"mb3 f6 silver fw5",children:G`${J}`})}),z.Div({class:$,children:q})]})}),z5=w(({classNames:X,iconSize:$,selectedOptionIndex:Q,onChange:J})=>{let W=E(!1),q=B(()=>HX[Q.value]),Z=(U)=>{J(U),W.value=!1};return z.Div({class:X,children:[NX({classNames:"pointer",descending:B(()=>q.value.decending),iconName:B(()=>q.value.icon),size:B(()=>$?.value??20),onClick:()=>W.value=!0}),e({classNames:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:()=>W.value=!1,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:HX,map:(U,R)=>{let Y=G`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>U.label===q.value.label?"bg-near-white black":"gray"}`;return z.Div({class:Y,onclick:O(()=>Z(R)),children:[NX({classNames:"ml1 mr2",descending:U.decending,iconName:U.icon,size:20}),z.Span(U.label)]})}})})]})})]})}),NX=w(({classNames:X,descending:$,iconName:Q,size:J,onClick:W})=>{return z.Span({class:G`flex items-center ${()=>W?"pointer":""} ${X}`,onclick:O(W),children:[H({className:"silver",size:B(()=>4*J.value/5),iconName:B(()=>$.value?"arrow_upward":"arrow_downward")}),H({className:"",size:J,iconName:Q})]})}),F0=new Date,i=E(0),zX=E(!1),n1=t0(_X(F0,2),7),L=E(F0),y=B(()=>R1(L.value)),i1=B(()=>{let X=y.value.map((Q)=>PX(Q.tracker,L.value)),$={done:X.reduce((Q,J)=>Q+(J.level.code>0?1:0),0),notDone:X.reduce((Q,J)=>Q+(J.level.code===0?1:0),0)};if($.done===0&&$.notDone===0)return"";if($.done===0&&$.notDone>0)return`Update below ${$.notDone} tsaks for the day.`;if($.done>0&&$.notDone===0)return"Great! All tasks updated.";return`${$.done} done. ${$.notDone} more to go.`}),u=E(!1),ZX=E(0),SX=B(()=>y.value?.[ZX.value]||tX()),l1=()=>{zX.value=f1();let X=setInterval(()=>{if(i.value+=1,i.value>=100)clearInterval(X),zX.value=!1,U0(new Date)},30)},CX=()=>{Y0(),L.value=new Date},a1=()=>{l1(),Y0(),CX(),window.addEventListener("pageshow",CX)},t1=B0({classNames:"bg-white",onMount:a1,body:z.Div({children:[r1({isOpen:u,showTitleInHeader:!0,habit:SX,date:L,onClose:()=>{u.value=!1,ZX.value=0},onChange:function(X){console.log(X),P1(SX.value,X,L.value),u.value=!1,L.value=new Date(L.value.getTime()+1)}}),z.If({subject:B(()=>zX.value&&i.value<100),isTruthy:z.Div({class:"flex flex-column justify-center items-center vh-100",children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),v1({classNames:"w-40",progress:i}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]}),isFalsy:d1({classNames:"ph3 bg-white",route:"/",header:"Tasks in a day",content:z.Div({children:[z.Div({onmount:(X)=>X.scrollLeft=X.scrollWidth,class:"sticky top-3 bg-white pb2 flex items-center justify-between z-999 w-100",children:z.For({subject:n1,map:(X)=>{let $=l0(X),Q=a(L.value,X);return z.Div({class:`bw1 ba br-pill ph2 pv3 pb2 tc ${Q?"black b b--silver":$?"light-gray b--transparent":"light-silver pointer b--transparent"}`,onclick:O(()=>!(Q||$)&&(L.value=X)),children:[z.Div({class:"f7 ",children:sX(X.getDay(),3)}),z.Div({class:"mt2 f4",children:("0"+X.getDate()).slice(-2)})]})}})}),z.Div({class:"mt2 mb2 f4 b",children:B(()=>K1(L.value))}),z.Div({class:"mb4 pb2 silver",children:i1}),z.Div({class:"mt4",children:z.For({subject:y,n:1/0,nthChild:WX({classNames:"flex pl5 pr3 nl3 mt4",onClick:iX,children:B(()=>y.value.length===0?"No habit for the day! Add one.":y.value.length<5?`Only ${y.value.length} habits a day! Add more.`:"")}),map:(X,$)=>{let Q=PX(X.tracker,L.value);return z.Div({class:"mt4 flex items-center",children:[OX({classNames:`pa3 mr3 ba b ${Q.level.code<1?"b--light-silver":"b--transparent"}`,colorIndex:X.colorIndex,level:Q.level.code,totalLevels:X.levels.length,icon:"check",iconSize:22,showText:Q.level.code>0,onClick:()=>{u.value=!0,ZX.value=$}}),z.Div({class:"pointer",onclick:O(()=>z1(X.id)),children:[z.Div({class:"f5 fw6 f4-ns fw4-ns",children:X.title}),z.Div({class:"f6 light-silver pt05",children:B(()=>w1(X.id))})]})]})}})}),z.Div({class:"pv6"})]}),navbarTop:h1({})})})]})}),e1=()=>{D.start("mount"),hX.resetIdCounter(),t1(),D.start("run")};e1();
